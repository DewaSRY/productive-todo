"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[197],{5197:(_l,At,S)=>{S.r(At),S.d(At,{TodoModule:()=>l2});var b=S(177),o=S(4438),xe=S(1635);class D{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class F extends D{constructor(t,e,n,s,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=s,this.projectableNodes=r}}class ee extends D{constructor(t,e,n,s){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=s}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class $ extends D{constructor(t){super(),this.element=t instanceof o.aKT?t.nativeElement:t}}class de{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof F?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof ee?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof $?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Ue extends de{constructor(t,e,n,s,r){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=s,this.attachDomPortal=a=>{const l=a.element,c=this._document.createComment("dom-portal");l.parentNode.insertBefore(c,l),this.outletElement.appendChild(l),this._attachedPortal=a,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(l,c)})},this._document=r}attachComponentPortal(t){const n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let s;return t.viewContainerRef?(s=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>s.destroy())):(s=n.create(t.injector||this._defaultInjector||o.zZn.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=t,s}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(s=>this.outletElement.appendChild(s)),n.detectChanges(),this.setDisposeFn(()=>{let s=e.indexOf(n);-1!==s&&e.remove(s)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Cm=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=o.$C({type:i})}static{this.\u0275inj=o.G2t({})}}return i})();var Hi=S(3726),Ts=S(152),K=S(9969);function Tm(){}function Kr(i){return null==i?Tm:function(){return this.querySelector(i)}}function Sm(){return[]}function xl(i){return null==i?Sm:function(){return this.querySelectorAll(i)}}function vl(i){return function(){return this.matches(i)}}function yl(i){return function(t){return t.matches(i)}}var Mm=Array.prototype.find;function Em(){return this.firstElementChild}var Om=Array.prototype.filter;function Im(){return Array.from(this.children)}function bl(i){return new Array(i.length)}function ks(i,t){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=t}function zm(i,t,e,n,s,r){for(var l,a=0,c=t.length,h=r.length;a<h;++a)(l=t[a])?(l.__data__=r[a],n[a]=l):e[a]=new ks(i,r[a]);for(;a<c;++a)(l=t[a])&&(s[a]=l)}function Hm(i,t,e,n,s,r,a){var l,c,m,h=new Map,d=t.length,u=r.length,p=new Array(d);for(l=0;l<d;++l)(c=t[l])&&(p[l]=m=a.call(c,c.__data__,l,t)+"",h.has(m)?s[l]=c:h.set(m,c));for(l=0;l<u;++l)m=a.call(i,r[l],l,r)+"",(c=h.get(m))?(n[l]=c,c.__data__=r[l],h.delete(m)):e[l]=new ks(i,r[l]);for(l=0;l<d;++l)(c=t[l])&&h.get(p[l])===c&&(s[l]=c)}function $m(i){return i.__data__}function Xm(i){return"object"==typeof i&&"length"in i?i:Array.from(i)}function qm(i,t){return i<t?-1:i>t?1:i>=t?0:NaN}ks.prototype={constructor:ks,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,t){return this._parent.insertBefore(i,t)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};var Jr="http://www.w3.org/1999/xhtml";const Cl={svg:"http://www.w3.org/2000/svg",xhtml:Jr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ws(i){var t=i+="",e=t.indexOf(":");return e>=0&&"xmlns"!==(t=i.slice(0,e))&&(i=i.slice(e+1)),Cl.hasOwnProperty(t)?{space:Cl[t],local:i}:i}function ng(i){return function(){this.removeAttribute(i)}}function sg(i){return function(){this.removeAttributeNS(i.space,i.local)}}function rg(i,t){return function(){this.setAttribute(i,t)}}function og(i,t){return function(){this.setAttributeNS(i.space,i.local,t)}}function ag(i,t){return function(){var e=t.apply(this,arguments);null==e?this.removeAttribute(i):this.setAttribute(i,e)}}function lg(i,t){return function(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,e)}}function Tl(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function hg(i){return function(){this.style.removeProperty(i)}}function dg(i,t,e){return function(){this.style.setProperty(i,t,e)}}function ug(i,t,e){return function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(i):this.style.setProperty(i,n,e)}}function $i(i,t){return i.style.getPropertyValue(t)||Tl(i).getComputedStyle(i,null).getPropertyValue(t)}function mg(i){return function(){delete this[i]}}function gg(i,t){return function(){this[i]=t}}function fg(i,t){return function(){var e=t.apply(this,arguments);null==e?delete this[i]:this[i]=e}}function kl(i){return i.trim().split(/^|\s+/)}function Zr(i){return i.classList||new wl(i)}function wl(i){this._node=i,this._names=kl(i.getAttribute("class")||"")}function Sl(i,t){for(var e=Zr(i),n=-1,s=t.length;++n<s;)e.add(t[n])}function Al(i,t){for(var e=Zr(i),n=-1,s=t.length;++n<s;)e.remove(t[n])}function xg(i){return function(){Sl(this,i)}}function vg(i){return function(){Al(this,i)}}function yg(i,t){return function(){(t.apply(this,arguments)?Sl:Al)(this,i)}}function Cg(){this.textContent=""}function Tg(i){return function(){this.textContent=i}}function kg(i){return function(){var t=i.apply(this,arguments);this.textContent=t??""}}function Sg(){this.innerHTML=""}function Ag(i){return function(){this.innerHTML=i}}function Dg(i){return function(){var t=i.apply(this,arguments);this.innerHTML=t??""}}function Lg(){this.nextSibling&&this.parentNode.appendChild(this)}function Fg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ig(i){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Jr&&t.documentElement.namespaceURI===Jr?t.createElement(i):t.createElementNS(e,i)}}function Pg(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function Dl(i){var t=ws(i);return(t.local?Pg:Ig)(t)}function Rg(){return null}function Vg(){var i=this.parentNode;i&&i.removeChild(this)}function Hg(){var i=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(i,this.nextSibling):i}function $g(){var i=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(i,this.nextSibling):i}function jg(i){return function(){var t=this.__on;if(t){for(var r,e=0,n=-1,s=t.length;e<s;++e)r=t[e],i.type&&r.type!==i.type||r.name!==i.name?t[++n]=r:this.removeEventListener(r.type,r.listener,r.options);++n?t.length=n:delete this.__on}}}function Ug(i,t,e){return function(){var s,n=this.__on,r=function Yg(i){return function(t){i.call(this,t,this.__data__)}}(t);if(n)for(var a=0,l=n.length;a<l;++a)if((s=n[a]).type===i.type&&s.name===i.name)return this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=r,s.options=e),void(s.value=t);this.addEventListener(i.type,r,e),s={type:i.type,name:i.name,value:t,listener:r,options:e},n?n.push(s):this.__on=[s]}}function Ml(i,t,e){var n=Tl(i),s=n.CustomEvent;"function"==typeof s?s=new s(t,e):(s=n.document.createEvent("Event"),e?(s.initEvent(t,e.bubbles,e.cancelable),s.detail=e.detail):s.initEvent(t,!1,!1)),i.dispatchEvent(s)}function qg(i,t){return function(){return Ml(this,i,t)}}function Kg(i,t){return function(){return Ml(this,i,t.apply(this,arguments))}}wl.prototype={add:function(i){this._names.indexOf(i)<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var t=this._names.indexOf(i);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};var Ll=[null];function Qe(i,t){this._groups=i,this._parents=t}function El(){return new Qe([[document.documentElement]],Ll)}Qe.prototype=El.prototype={constructor:Qe,select:function km(i){"function"!=typeof i&&(i=Kr(i));for(var t=this._groups,e=t.length,n=new Array(e),s=0;s<e;++s)for(var c,h,r=t[s],a=r.length,l=n[s]=new Array(a),d=0;d<a;++d)(c=r[d])&&(h=i.call(c,c.__data__,d,r))&&("__data__"in c&&(h.__data__=c.__data__),l[d]=h);return new Qe(n,this._parents)},selectAll:function Dm(i){i="function"==typeof i?function Am(i){return function(){return function wm(i){return null==i?[]:Array.isArray(i)?i:Array.from(i)}(i.apply(this,arguments))}}(i):xl(i);for(var t=this._groups,e=t.length,n=[],s=[],r=0;r<e;++r)for(var c,a=t[r],l=a.length,h=0;h<l;++h)(c=a[h])&&(n.push(i.call(c,c.__data__,h,a)),s.push(c));return new Qe(n,s)},selectChild:function Fm(i){return this.select(null==i?Em:function Lm(i){return function(){return Mm.call(this.children,i)}}("function"==typeof i?i:yl(i)))},selectChildren:function Bm(i){return this.selectAll(null==i?Im:function Pm(i){return function(){return Om.call(this.children,i)}}("function"==typeof i?i:yl(i)))},filter:function Rm(i){"function"!=typeof i&&(i=vl(i));for(var t=this._groups,e=t.length,n=new Array(e),s=0;s<e;++s)for(var c,r=t[s],a=r.length,l=n[s]=[],h=0;h<a;++h)(c=r[h])&&i.call(c,c.__data__,h,r)&&l.push(c);return new Qe(n,this._parents)},data:function Gm(i,t){if(!arguments.length)return Array.from(this,$m);var e=t?Hm:zm,n=this._parents,s=this._groups;"function"!=typeof i&&(i=function Vm(i){return function(){return i}}(i));for(var r=s.length,a=new Array(r),l=new Array(r),c=new Array(r),h=0;h<r;++h){var d=n[h],u=s[h],p=u.length,m=Xm(i.call(d,d&&d.__data__,h,n)),g=m.length,_=l[h]=new Array(g),f=a[h]=new Array(g);e(d,u,_,f,c[h]=new Array(p),m,t);for(var M,E,T=0,C=0;T<g;++T)if(M=_[T]){for(T>=C&&(C=T+1);!(E=f[C])&&++C<g;);M._next=E||null}}return(a=new Qe(a,n))._enter=l,a._exit=c,a},enter:function Nm(){return new Qe(this._enter||this._groups.map(bl),this._parents)},exit:function Ym(){return new Qe(this._exit||this._groups.map(bl),this._parents)},join:function Wm(i,t,e){var n=this.enter(),s=this,r=this.exit();return"function"==typeof i?(n=i(n))&&(n=n.selection()):n=n.append(i+""),null!=t&&(s=t(s))&&(s=s.selection()),null==e?r.remove():e(r),n&&s?n.merge(s).order():s},merge:function jm(i){for(var t=i.selection?i.selection():i,e=this._groups,n=t._groups,s=e.length,a=Math.min(s,n.length),l=new Array(s),c=0;c<a;++c)for(var m,h=e[c],d=n[c],u=h.length,p=l[c]=new Array(u),g=0;g<u;++g)(m=h[g]||d[g])&&(p[g]=m);for(;c<s;++c)l[c]=e[c];return new Qe(l,this._parents)},selection:function ef(){return this},order:function Um(){for(var i=this._groups,t=-1,e=i.length;++t<e;)for(var a,n=i[t],s=n.length-1,r=n[s];--s>=0;)(a=n[s])&&(r&&4^a.compareDocumentPosition(r)&&r.parentNode.insertBefore(a,r),r=a);return this},sort:function Qm(i){function t(u,p){return u&&p?i(u.__data__,p.__data__):!u-!p}i||(i=qm);for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r){for(var h,a=e[r],l=a.length,c=s[r]=new Array(l),d=0;d<l;++d)(h=a[d])&&(c[d]=h);c.sort(t)}return new Qe(s,this._parents).order()},call:function Km(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this},nodes:function Jm(){return Array.from(this)},node:function Zm(){for(var i=this._groups,t=0,e=i.length;t<e;++t)for(var n=i[t],s=0,r=n.length;s<r;++s){var a=n[s];if(a)return a}return null},size:function eg(){let i=0;for(const t of this)++i;return i},empty:function tg(){return!this.node()},each:function ig(i){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var l,s=t[e],r=0,a=s.length;r<a;++r)(l=s[r])&&i.call(l,l.__data__,r,s);return this},attr:function cg(i,t){var e=ws(i);if(arguments.length<2){var n=this.node();return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}return this.each((null==t?e.local?sg:ng:"function"==typeof t?e.local?lg:ag:e.local?og:rg)(e,t))},style:function pg(i,t,e){return arguments.length>1?this.each((null==t?hg:"function"==typeof t?ug:dg)(i,t,e??"")):$i(this.node(),i)},property:function _g(i,t){return arguments.length>1?this.each((null==t?mg:"function"==typeof t?fg:gg)(i,t)):this.node()[i]},classed:function bg(i,t){var e=kl(i+"");if(arguments.length<2){for(var n=Zr(this.node()),s=-1,r=e.length;++s<r;)if(!n.contains(e[s]))return!1;return!0}return this.each(("function"==typeof t?yg:t?xg:vg)(e,t))},text:function wg(i){return arguments.length?this.each(null==i?Cg:("function"==typeof i?kg:Tg)(i)):this.node().textContent},html:function Mg(i){return arguments.length?this.each(null==i?Sg:("function"==typeof i?Dg:Ag)(i)):this.node().innerHTML},raise:function Eg(){return this.each(Lg)},lower:function Og(){return this.each(Fg)},append:function Bg(i){var t="function"==typeof i?i:Dl(i);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function Ng(i,t){var e="function"==typeof i?i:Dl(i),n=null==t?Rg:"function"==typeof t?t:Kr(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),n.apply(this,arguments)||null)})},remove:function zg(){return this.each(Vg)},clone:function Gg(i){return this.select(i?$g:Hg)},datum:function Xg(i){return arguments.length?this.property("__data__",i):this.node().__data__},on:function Qg(i,t,e){var s,a,n=function Wg(i){return i.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(i+""),r=n.length;if(!(arguments.length<2)){for(l=t?Ug:jg,s=0;s<r;++s)this.each(l(n[s],t,e));return this}var l=this.node().__on;if(l)for(var d,c=0,h=l.length;c<h;++c)for(s=0,d=l[c];s<r;++s)if((a=n[s]).type===d.type&&a.name===d.name)return d.value},dispatch:function Jg(i,t){return this.each(("function"==typeof t?Kg:qg)(i,t))},[Symbol.iterator]:function*Zg(){for(var i=this._groups,t=0,e=i.length;t<e;++t)for(var a,n=i[t],s=0,r=n.length;s<r;++s)(a=n[s])&&(yield a)}};const kn=El;function qe(i){return"string"==typeof i?new Qe([[document.querySelector(i)]],[document.documentElement]):new Qe([[i]],Ll)}var tf={value:()=>{}};function Fl(){for(var n,i=0,t=arguments.length,e={};i<t;++i){if(!(n=arguments[i]+"")||n in e||/[\s.]/.test(n))throw new Error("illegal type: "+n);e[n]=[]}return new Ss(e)}function Ss(i){this._=i}function sf(i,t){for(var s,e=0,n=i.length;e<n;++e)if((s=i[e]).name===t)return s.value}function Ol(i,t,e){for(var n=0,s=i.length;n<s;++n)if(i[n].name===t){i[n]=tf,i=i.slice(0,n).concat(i.slice(n+1));break}return null!=e&&i.push({name:t,value:e}),i}Ss.prototype=Fl.prototype={constructor:Ss,on:function(i,t){var s,e=this._,n=function nf(i,t){return i.trim().split(/^|\s+/).map(function(e){var n="",s=e.indexOf(".");if(s>=0&&(n=e.slice(s+1),e=e.slice(0,s)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}(i+"",e),r=-1,a=n.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++r<a;)if(s=(i=n[r]).type)e[s]=Ol(e[s],i.name,t);else if(null==t)for(s in e)e[s]=Ol(e[s],i.name,null);return this}for(;++r<a;)if((s=(i=n[r]).type)&&(s=sf(e[s],i.name)))return s},copy:function(){var i={},t=this._;for(var e in t)i[e]=t[e].slice();return new Ss(i)},call:function(i,t){if((s=arguments.length-2)>0)for(var s,r,e=new Array(s),n=0;n<s;++n)e[n]=arguments[n+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(n=0,s=(r=this._[i]).length;n<s;++n)r[n].value.apply(t,e)},apply:function(i,t,e){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var n=this._[i],s=0,r=n.length;s<r;++s)n[s].value.apply(t,e)}};const Il=Fl;function io(i,t,e){i.prototype=t.prototype=e,e.constructor=i}function Pl(i,t){var e=Object.create(i.prototype);for(var n in t)e[n]=t[n];return e}function wn(){}var As=1/.7,Gi="\\s*([+-]?\\d+)\\s*",An="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",af=/^#([0-9a-f]{3,8})$/,lf=new RegExp(`^rgb\\(${Gi},${Gi},${Gi}\\)$`),cf=new RegExp(`^rgb\\(${xt},${xt},${xt}\\)$`),hf=new RegExp(`^rgba\\(${Gi},${Gi},${Gi},${An}\\)$`),df=new RegExp(`^rgba\\(${xt},${xt},${xt},${An}\\)$`),uf=new RegExp(`^hsl\\(${An},${xt},${xt}\\)$`),pf=new RegExp(`^hsla\\(${An},${xt},${xt},${An}\\)$`),Bl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Rl(){return this.rgb().formatHex()}function Nl(){return this.rgb().formatRgb()}function pi(i){var t,e;return i=(i+"").trim().toLowerCase(),(t=af.exec(i))?(e=t[1].length,t=parseInt(t[1],16),6===e?Vl(t):3===e?new Ye(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===e?Ds(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===e?Ds(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=lf.exec(i))?new Ye(t[1],t[2],t[3],1):(t=cf.exec(i))?new Ye(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=hf.exec(i))?Ds(t[1],t[2],t[3],t[4]):(t=df.exec(i))?Ds(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=uf.exec(i))?$l(t[1],t[2]/100,t[3]/100,1):(t=pf.exec(i))?$l(t[1],t[2]/100,t[3]/100,t[4]):Bl.hasOwnProperty(i)?Vl(Bl[i]):"transparent"===i?new Ye(NaN,NaN,NaN,0):null}function Vl(i){return new Ye(i>>16&255,i>>8&255,255&i,1)}function Ds(i,t,e,n){return n<=0&&(i=t=e=NaN),new Ye(i,t,e,n)}function Ms(i,t,e,n){return 1===arguments.length?function ff(i){return i instanceof wn||(i=pi(i)),i?new Ye((i=i.rgb()).r,i.g,i.b,i.opacity):new Ye}(i):new Ye(i,t,e,n??1)}function Ye(i,t,e,n){this.r=+i,this.g=+t,this.b=+e,this.opacity=+n}function zl(){return`#${gi(this.r)}${gi(this.g)}${gi(this.b)}`}function Hl(){const i=Ls(this.opacity);return`${1===i?"rgb(":"rgba("}${mi(this.r)}, ${mi(this.g)}, ${mi(this.b)}${1===i?")":`, ${i})`}`}function Ls(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function mi(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function gi(i){return((i=mi(i))<16?"0":"")+i.toString(16)}function $l(i,t,e,n){return n<=0?i=t=e=NaN:e<=0||e>=1?i=t=NaN:t<=0&&(i=NaN),new ct(i,t,e,n)}function Gl(i){if(i instanceof ct)return new ct(i.h,i.s,i.l,i.opacity);if(i instanceof wn||(i=pi(i)),!i)return new ct;if(i instanceof ct)return i;var t=(i=i.rgb()).r/255,e=i.g/255,n=i.b/255,s=Math.min(t,e,n),r=Math.max(t,e,n),a=NaN,l=r-s,c=(r+s)/2;return l?(a=t===r?(e-n)/l+6*(e<n):e===r?(n-t)/l+2:(t-e)/l+4,l/=c<.5?r+s:2-r-s,a*=60):l=c>0&&c<1?0:a,new ct(a,l,c,i.opacity)}function ct(i,t,e,n){this.h=+i,this.s=+t,this.l=+e,this.opacity=+n}function Xl(i){return(i=(i||0)%360)<0?i+360:i}function Es(i){return Math.max(0,Math.min(1,i||0))}function no(i,t,e){return 255*(i<60?t+(e-t)*i/60:i<180?e:i<240?t+(e-t)*(240-i)/60:t)}function Yl(i,t,e,n,s){var r=i*i,a=r*i;return((1-3*i+3*r-a)*t+(4-6*r+3*a)*e+(1+3*i+3*r-3*a)*n+a*s)/6}io(wn,pi,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:Rl,formatHex:Rl,formatHex8:function mf(){return this.rgb().formatHex8()},formatHsl:function gf(){return Gl(this).formatHsl()},formatRgb:Nl,toString:Nl}),io(Ye,Ms,Pl(wn,{brighter(i){return i=null==i?As:Math.pow(As,i),new Ye(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=null==i?.7:Math.pow(.7,i),new Ye(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new Ye(mi(this.r),mi(this.g),mi(this.b),Ls(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zl,formatHex:zl,formatHex8:function _f(){return`#${gi(this.r)}${gi(this.g)}${gi(this.b)}${gi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Hl,toString:Hl})),io(ct,function xf(i,t,e,n){return 1===arguments.length?Gl(i):new ct(i,t,e,n??1)},Pl(wn,{brighter(i){return i=null==i?As:Math.pow(As,i),new ct(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=null==i?.7:Math.pow(.7,i),new ct(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+360*(this.h<0),t=isNaN(i)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*t,s=2*e-n;return new Ye(no(i>=240?i-240:i+120,s,n),no(i,s,n),no(i<120?i+240:i-120,s,n),this.opacity)},clamp(){return new ct(Xl(this.h),Es(this.s),Es(this.l),Ls(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=Ls(this.opacity);return`${1===i?"hsl(":"hsla("}${Xl(this.h)}, ${100*Es(this.s)}%, ${100*Es(this.l)}%${1===i?")":`, ${i})`}`}}));const so=i=>()=>i;function jl(i,t){var e=t-i;return e?function Wl(i,t){return function(e){return i+e*t}}(i,e):so(isNaN(i)?t:i)}const Fs=function i(t){var e=function Cf(i){return 1==(i=+i)?jl:function(t,e){return e-t?function bf(i,t,e){return i=Math.pow(i,e),t=Math.pow(t,e)-i,e=1/e,function(n){return Math.pow(i+n*t,e)}}(t,e,i):so(isNaN(t)?e:t)}}(t);function n(s,r){var a=e((s=Ms(s)).r,(r=Ms(r)).r),l=e(s.g,r.g),c=e(s.b,r.b),h=jl(s.opacity,r.opacity);return function(d){return s.r=a(d),s.g=l(d),s.b=c(d),s.opacity=h(d),s+""}}return n.gamma=i,n}(1);function Ul(i){return function(t){var a,l,e=t.length,n=new Array(e),s=new Array(e),r=new Array(e);for(a=0;a<e;++a)l=Ms(t[a]),n[a]=l.r||0,s[a]=l.g||0,r[a]=l.b||0;return n=i(n),s=i(s),r=i(r),l.opacity=1,function(c){return l.r=n(c),l.g=s(c),l.b=r(c),l+""}}}function Ql(i,t){var a,e=t?t.length:0,n=i?Math.min(e,i.length):0,s=new Array(n),r=new Array(e);for(a=0;a<n;++a)s[a]=Os(i[a],t[a]);for(;a<e;++a)r[a]=t[a];return function(l){for(a=0;a<n;++a)r[a]=s[a](l);return r}}function Tf(i,t){var e=new Date;return i=+i,t=+t,function(n){return e.setTime(i*(1-n)+t*n),e}}function ht(i,t){return i=+i,t=+t,function(e){return i*(1-e)+t*e}}function kf(i,t){var s,e={},n={};for(s in(null===i||"object"!=typeof i)&&(i={}),(null===t||"object"!=typeof t)&&(t={}),t)s in i?e[s]=Os(i[s],t[s]):n[s]=t[s];return function(r){for(s in e)n[s]=e[s](r);return n}}Ul(function vf(i){var t=i.length-1;return function(e){var n=e<=0?e=0:e>=1?(e=1,t-1):Math.floor(e*t),s=i[n],r=i[n+1];return Yl((e-n/t)*t,n>0?i[n-1]:2*s-r,s,r,n<t-1?i[n+2]:2*r-s)}}),Ul(function yf(i){var t=i.length;return function(e){var n=Math.floor(((e%=1)<0?++e:e)*t);return Yl((e-n/t)*t,i[(n+t-1)%t],i[n%t],i[(n+1)%t],i[(n+2)%t])}});var ro=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oo=new RegExp(ro.source,"g");function ql(i,t){var n,s,r,e=ro.lastIndex=oo.lastIndex=0,a=-1,l=[],c=[];for(i+="",t+="";(n=ro.exec(i))&&(s=oo.exec(t));)(r=s.index)>e&&(r=t.slice(e,r),l[a]?l[a]+=r:l[++a]=r),(n=n[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,c.push({i:a,x:ht(n,s)})),e=oo.lastIndex;return e<t.length&&(r=t.slice(e),l[a]?l[a]+=r:l[++a]=r),l.length<2?c[0]?function Sf(i){return function(t){return i(t)+""}}(c[0].x):function wf(i){return function(){return i}}(t):(t=c.length,function(h){for(var u,d=0;d<t;++d)l[(u=c[d]).i]=u.x(h);return l.join("")})}function Af(i,t){t||(t=[]);var s,e=i?Math.min(t.length,i.length):0,n=t.slice();return function(r){for(s=0;s<e;++s)n[s]=i[s]*(1-r)+t[s]*r;return n}}function Os(i,t){var n,e=typeof t;return null==t||"boolean"===e?so(t):("number"===e?ht:"string"===e?(n=pi(t))?(t=n,Fs):ql:t instanceof pi?Fs:t instanceof Date?Tf:function Df(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}(t)?Af:Array.isArray(t)?Ql:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?kf:ht)(i,t)}var Is,Ln,Xi=0,Dn=0,Mn=0,Jl=1e3,Ps=0,fi=0,Bs=0,En="object"==typeof performance&&performance.now?performance:Date,Zl="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function ao(){return fi||(Zl(Lf),fi=En.now()+Bs)}function Lf(){fi=0}function Rs(){this._call=this._time=this._next=null}function ec(i,t,e){var n=new Rs;return n.restart(i,t,e),n}function tc(){fi=(Ps=En.now())+Bs,Xi=Dn=0;try{!function Ef(){ao(),++Xi;for(var t,i=Is;i;)(t=fi-i._time)>=0&&i._call.call(void 0,t),i=i._next;--Xi}()}finally{Xi=0,function Of(){for(var i,e,t=Is,n=1/0;t;)t._call?(n>t._time&&(n=t._time),i=t,t=t._next):(e=t._next,t._next=null,t=i?i._next=e:Is=e);Ln=i,lo(n)}(),fi=0}}function Ff(){var i=En.now(),t=i-Ps;t>Jl&&(Bs-=t,Ps=i)}function lo(i){Xi||(Dn&&(Dn=clearTimeout(Dn)),i-fi>24?(i<1/0&&(Dn=setTimeout(tc,i-En.now()-Bs)),Mn&&(Mn=clearInterval(Mn))):(Mn||(Ps=En.now(),Mn=setInterval(Ff,Jl)),Xi=1,Zl(tc)))}function ic(i,t,e){var n=new Rs;return n.restart(s=>{n.stop(),i(s+t)},t=null==t?0:+t,e),n}Rs.prototype=ec.prototype={constructor:Rs,restart:function(i,t,e){if("function"!=typeof i)throw new TypeError("callback is not a function");e=(null==e?ao():+e)+(null==t?0:+t),!this._next&&Ln!==this&&(Ln?Ln._next=this:Is=this,Ln=this),this._call=i,this._time=e,lo()},stop:function(){this._call&&(this._call=null,this._time=1/0,lo())}};var If=Il("start","end","cancel","interrupt"),Pf=[],nc=0,Ns=3;function zs(i,t,e,n,s,r){var a=i.__transition;if(a){if(e in a)return}else i.__transition={};!function Bf(i,t,e){var s,n=i.__transition;function a(h){var d,u,p,m;if(1!==e.state)return c();for(d in n)if((m=n[d]).name===e.name){if(m.state===Ns)return ic(a);4===m.state?(m.state=6,m.timer.stop(),m.on.call("interrupt",i,i.__data__,m.index,m.group),delete n[d]):+d<t&&(m.state=6,m.timer.stop(),m.on.call("cancel",i,i.__data__,m.index,m.group),delete n[d])}if(ic(function(){e.state===Ns&&(e.state=4,e.timer.restart(l,e.delay,e.time),l(h))}),e.state=2,e.on.call("start",i,i.__data__,e.index,e.group),2===e.state){for(e.state=Ns,s=new Array(p=e.tween.length),d=0,u=-1;d<p;++d)(m=e.tween[d].value.call(i,i.__data__,e.index,e.group))&&(s[++u]=m);s.length=u+1}}function l(h){for(var d=h<e.duration?e.ease.call(null,h/e.duration):(e.timer.restart(c),e.state=5,1),u=-1,p=s.length;++u<p;)s[u].call(i,d);5===e.state&&(e.on.call("end",i,i.__data__,e.index,e.group),c())}function c(){for(var h in e.state=6,e.timer.stop(),delete n[t],n)return;delete i.__transition}n[t]=e,e.timer=ec(function r(h){e.state=1,e.timer.restart(a,e.delay,e.time),e.delay<=h&&a(h-e.delay)},0,e.time)}(i,e,{name:t,index:n,group:s,on:If,tween:Pf,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:nc})}function uo(i,t){var e=dt(i,t);if(e.state>nc)throw new Error("too late; already scheduled");return e}function vt(i,t){var e=dt(i,t);if(e.state>Ns)throw new Error("too late; already running");return e}function dt(i,t){var e=i.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}var Hs,oc=180/Math.PI,mo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ac(i,t,e,n,s,r){var a,l,c;return(a=Math.sqrt(i*i+t*t))&&(i/=a,t/=a),(c=i*e+t*n)&&(e-=i*c,n-=t*c),(l=Math.sqrt(e*e+n*n))&&(e/=l,n/=l,c/=l),i*n<t*e&&(i=-i,t=-t,c=-c,a=-a),{translateX:s,translateY:r,rotate:Math.atan2(t,i)*oc,skewX:Math.atan(c)*oc,scaleX:a,scaleY:l}}function lc(i,t,e,n){function s(h){return h.length?h.pop()+" ":""}return function(h,d){var u=[],p=[];return h=i(h),d=i(d),function r(h,d,u,p,m,g){if(h!==u||d!==p){var _=m.push("translate(",null,t,null,e);g.push({i:_-4,x:ht(h,u)},{i:_-2,x:ht(d,p)})}else(u||p)&&m.push("translate("+u+t+p+e)}(h.translateX,h.translateY,d.translateX,d.translateY,u,p),function a(h,d,u,p){h!==d?(h-d>180?d+=360:d-h>180&&(h+=360),p.push({i:u.push(s(u)+"rotate(",null,n)-2,x:ht(h,d)})):d&&u.push(s(u)+"rotate("+d+n)}(h.rotate,d.rotate,u,p),function l(h,d,u,p){h!==d?p.push({i:u.push(s(u)+"skewX(",null,n)-2,x:ht(h,d)}):d&&u.push(s(u)+"skewX("+d+n)}(h.skewX,d.skewX,u,p),function c(h,d,u,p,m,g){if(h!==u||d!==p){var _=m.push(s(m)+"scale(",null,",",null,")");g.push({i:_-4,x:ht(h,u)},{i:_-2,x:ht(d,p)})}else(1!==u||1!==p)&&m.push(s(m)+"scale("+u+","+p+")")}(h.scaleX,h.scaleY,d.scaleX,d.scaleY,u,p),h=d=null,function(m){for(var f,g=-1,_=p.length;++g<_;)u[(f=p[g]).i]=f.x(m);return u.join("")}}}var zf=lc(function Nf(i){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(i+"");return t.isIdentity?mo:ac(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),Hf=lc(function Vf(i){return null!=i&&(Hs||(Hs=document.createElementNS("http://www.w3.org/2000/svg","g")),Hs.setAttribute("transform",i),i=Hs.transform.baseVal.consolidate())?ac((i=i.matrix).a,i.b,i.c,i.d,i.e,i.f):mo},", ",")",")");function $f(i,t){var e,n;return function(){var s=vt(this,i),r=s.tween;if(r!==e)for(var a=0,l=(n=e=r).length;a<l;++a)if(n[a].name===t){(n=n.slice()).splice(a,1);break}s.tween=n}}function Gf(i,t,e){var n,s;if("function"!=typeof e)throw new Error;return function(){var r=vt(this,i),a=r.tween;if(a!==n){s=(n=a).slice();for(var l={name:t,value:e},c=0,h=s.length;c<h;++c)if(s[c].name===t){s[c]=l;break}c===h&&s.push(l)}r.tween=s}}function go(i,t,e){var n=i._id;return i.each(function(){var s=vt(this,n);(s.value||(s.value={}))[t]=e.apply(this,arguments)}),function(s){return dt(s,n).value[t]}}function cc(i,t){var e;return("number"==typeof t?ht:t instanceof pi?Fs:(e=pi(t))?(t=e,Fs):ql)(i,t)}function Yf(i){return function(){this.removeAttribute(i)}}function Wf(i){return function(){this.removeAttributeNS(i.space,i.local)}}function jf(i,t,e){var n,r,s=e+"";return function(){var a=this.getAttribute(i);return a===s?null:a===n?r:r=t(n=a,e)}}function Uf(i,t,e){var n,r,s=e+"";return function(){var a=this.getAttributeNS(i.space,i.local);return a===s?null:a===n?r:r=t(n=a,e)}}function Qf(i,t,e){var n,s,r;return function(){var a,c,l=e(this);return null==l?void this.removeAttribute(i):(a=this.getAttribute(i))===(c=l+"")?null:a===n&&c===s?r:(s=c,r=t(n=a,l))}}function qf(i,t,e){var n,s,r;return function(){var a,c,l=e(this);return null==l?void this.removeAttributeNS(i.space,i.local):(a=this.getAttributeNS(i.space,i.local))===(c=l+"")?null:a===n&&c===s?r:(s=c,r=t(n=a,l))}}function e_(i,t){var e,n;function s(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function Zf(i,t){return function(e){this.setAttributeNS(i.space,i.local,t.call(this,e))}}(i,r)),e}return s._value=t,s}function t_(i,t){var e,n;function s(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function Jf(i,t){return function(e){this.setAttribute(i,t.call(this,e))}}(i,r)),e}return s._value=t,s}function n_(i,t){return function(){uo(this,i).delay=+t.apply(this,arguments)}}function s_(i,t){return t=+t,function(){uo(this,i).delay=t}}function o_(i,t){return function(){vt(this,i).duration=+t.apply(this,arguments)}}function a_(i,t){return t=+t,function(){vt(this,i).duration=t}}var C_=kn.prototype.constructor;function hc(i){return function(){this.style.removeProperty(i)}}var z_=0;function Dt(i,t,e,n){this._groups=i,this._parents=t,this._name=e,this._id=n}function dc(){return++z_}var Mt=kn.prototype;Dt.prototype=function H_(i){return kn().transition(i)}.prototype={constructor:Dt,select:function y_(i){var t=this._name,e=this._id;"function"!=typeof i&&(i=Kr(i));for(var n=this._groups,s=n.length,r=new Array(s),a=0;a<s;++a)for(var d,u,l=n[a],c=l.length,h=r[a]=new Array(c),p=0;p<c;++p)(d=l[p])&&(u=i.call(d,d.__data__,p,l))&&("__data__"in d&&(u.__data__=d.__data__),h[p]=u,zs(h[p],t,e,p,h,dt(d,e)));return new Dt(r,this._parents,t,e)},selectAll:function b_(i){var t=this._name,e=this._id;"function"!=typeof i&&(i=xl(i));for(var n=this._groups,s=n.length,r=[],a=[],l=0;l<s;++l)for(var d,c=n[l],h=c.length,u=0;u<h;++u)if(d=c[u]){for(var m,p=i.call(d,d.__data__,u,c),g=dt(d,e),_=0,f=p.length;_<f;++_)(m=p[_])&&zs(m,t,e,_,p,g);r.push(p),a.push(d)}return new Dt(r,a,t,e)},selectChild:Mt.selectChild,selectChildren:Mt.selectChildren,filter:function p_(i){"function"!=typeof i&&(i=vl(i));for(var t=this._groups,e=t.length,n=new Array(e),s=0;s<e;++s)for(var c,r=t[s],a=r.length,l=n[s]=[],h=0;h<a;++h)(c=r[h])&&i.call(c,c.__data__,h,r)&&l.push(c);return new Dt(n,this._parents,this._name,this._id)},merge:function m_(i){if(i._id!==this._id)throw new Error;for(var t=this._groups,e=i._groups,n=t.length,r=Math.min(n,e.length),a=new Array(n),l=0;l<r;++l)for(var p,c=t[l],h=e[l],d=c.length,u=a[l]=new Array(d),m=0;m<d;++m)(p=c[m]||h[m])&&(u[m]=p);for(;l<n;++l)a[l]=t[l];return new Dt(a,this._parents,this._name,this._id)},selection:function T_(){return new C_(this._groups,this._parents)},transition:function N_(){for(var i=this._name,t=this._id,e=dc(),n=this._groups,s=n.length,r=0;r<s;++r)for(var c,a=n[r],l=a.length,h=0;h<l;++h)if(c=a[h]){var d=dt(c,t);zs(c,i,e,h,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Dt(n,this._parents,i,e)},call:Mt.call,nodes:Mt.nodes,node:Mt.node,size:Mt.size,empty:Mt.empty,each:Mt.each,on:function __(i,t){var e=this._id;return arguments.length<2?dt(this.node(),e).on.on(i):this.each(function f_(i,t,e){var n,s,r=function g_(i){return(i+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(t)?uo:vt;return function(){var a=r(this,i),l=a.on;l!==n&&(s=(n=l).copy()).on(t,e),a.on=s}}(e,i,t))},attr:function Kf(i,t){var e=ws(i),n="transform"===e?Hf:cc;return this.attrTween(i,"function"==typeof t?(e.local?qf:Qf)(e,n,go(this,"attr."+i,t)):null==t?(e.local?Wf:Yf)(e):(e.local?Uf:jf)(e,n,t))},attrTween:function i_(i,t){var e="attr."+i;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;var n=ws(i);return this.tween(e,(n.local?e_:t_)(n,t))},style:function D_(i,t,e){var n="transform"==(i+="")?zf:cc;return null==t?this.styleTween(i,function k_(i,t){var e,n,s;return function(){var r=$i(this,i),a=(this.style.removeProperty(i),$i(this,i));return r===a?null:r===e&&a===n?s:s=t(e=r,n=a)}}(i,n)).on("end.style."+i,hc(i)):"function"==typeof t?this.styleTween(i,function S_(i,t,e){var n,s,r;return function(){var a=$i(this,i),l=e(this),c=l+"";return null==l&&(this.style.removeProperty(i),c=l=$i(this,i)),a===c?null:a===n&&c===s?r:(s=c,r=t(n=a,l))}}(i,n,go(this,"style."+i,t))).each(function A_(i,t){var e,n,s,l,r="style."+t,a="end."+r;return function(){var c=vt(this,i),h=c.on,d=null==c.value[r]?l||(l=hc(t)):void 0;(h!==e||s!==d)&&(n=(e=h).copy()).on(a,s=d),c.on=n}}(this._id,i)):this.styleTween(i,function w_(i,t,e){var n,r,s=e+"";return function(){var a=$i(this,i);return a===s?null:a===n?r:r=t(n=a,e)}}(i,n,t),e).on("end.style."+i,null)},styleTween:function E_(i,t,e){var n="style."+(i+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,function L_(i,t,e){var n,s;function r(){var a=t.apply(this,arguments);return a!==s&&(n=(s=a)&&function M_(i,t,e){return function(n){this.style.setProperty(i,t.call(this,n),e)}}(i,a,e)),n}return r._value=t,r}(i,t,e??""))},text:function I_(i){return this.tween("text","function"==typeof i?function O_(i){return function(){var t=i(this);this.textContent=t??""}}(go(this,"text",i)):function F_(i){return function(){this.textContent=i}}(null==i?"":i+""))},textTween:function R_(i){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==i)return this.tween(t,null);if("function"!=typeof i)throw new Error;return this.tween(t,function B_(i){var t,e;function n(){var s=i.apply(this,arguments);return s!==e&&(t=(e=s)&&function P_(i){return function(t){this.textContent=i.call(this,t)}}(s)),t}return n._value=i,n}(i))},remove:function v_(){return this.on("end.remove",function x_(i){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==i)return;t&&t.removeChild(this)}}(this._id))},tween:function Xf(i,t){var e=this._id;if(i+="",arguments.length<2){for(var a,n=dt(this.node(),e).tween,s=0,r=n.length;s<r;++s)if((a=n[s]).name===i)return a.value;return null}return this.each((null==t?$f:Gf)(e,i,t))},delay:function r_(i){var t=this._id;return arguments.length?this.each(("function"==typeof i?n_:s_)(t,i)):dt(this.node(),t).delay},duration:function l_(i){var t=this._id;return arguments.length?this.each(("function"==typeof i?o_:a_)(t,i)):dt(this.node(),t).duration},ease:function h_(i){var t=this._id;return arguments.length?this.each(function c_(i,t){if("function"!=typeof t)throw new Error;return function(){vt(this,i).ease=t}}(t,i)):dt(this.node(),t).ease},easeVarying:function u_(i){if("function"!=typeof i)throw new Error;return this.each(function d_(i,t){return function(){var e=t.apply(this,arguments);if("function"!=typeof e)throw new Error;vt(this,i).ease=e}}(this._id,i))},end:function V_(){var i,t,e=this,n=e._id,s=e.size();return new Promise(function(r,a){var l={value:a},c={value:function(){0==--s&&r()}};e.each(function(){var h=vt(this,n),d=h.on;d!==i&&((t=(i=d).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),h.on=t}),0===s&&r()})},[Symbol.iterator]:Mt[Symbol.iterator]};var G_={time:null,delay:0,duration:250,ease:function $_(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}};function X_(i,t){for(var e;!(e=i.__transition)||!(e=e[t]);)if(!(i=i.parentNode))throw new Error(`transition ${t} not found`);return e}kn.prototype.interrupt=function Rf(i){return this.each(function(){!function po(i,t){var n,s,a,e=i.__transition,r=!0;if(e){for(a in t=null==t?null:t+"",e)(n=e[a]).name===t?(s=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(s?"interrupt":"cancel",i,i.__data__,n.index,n.group),delete e[a]):r=!1;r&&delete i.__transition}}(this,i)})},kn.prototype.transition=function Y_(i){var t,e;i instanceof Dt?(t=i._id,i=i._name):(t=dc(),(e=G_).time=ao(),i=null==i?null:i+"");for(var n=this._groups,s=n.length,r=0;r<s;++r)for(var c,a=n[r],l=a.length,h=0;h<l;++h)(c=a[h])&&zs(c,i,t,h,a,e||X_(c,t));return new Dt(n,this._parents,i,t)};Math;function Fn(i){return{type:i}}function On(i,t){return null==i||null==t?NaN:i<t?-1:i>t?1:i>=t?0:NaN}function ix(i,t){return null==i||null==t?NaN:t<i?-1:t>i?1:t>=i?0:NaN}function Co(i){let t,e,n;function s(l,c,h=0,d=l.length){if(h<d){if(0!==t(c,c))return d;do{const u=h+d>>>1;e(l[u],c)<0?h=u+1:d=u}while(h<d)}return h}return 2!==i.length?(t=On,e=(l,c)=>On(i(l),c),n=(l,c)=>i(l)-c):(t=i===On||i===ix?i:nx,e=i,n=i),{left:s,center:function a(l,c,h=0,d=l.length){const u=s(l,c,h,d-1);return u>h&&n(l[u-1],c)>-n(l[u],c)?u-1:u},right:function r(l,c,h=0,d=l.length){if(h<d){if(0!==t(c,c))return d;do{const u=h+d>>>1;e(l[u],c)<=0?h=u+1:d=u}while(h<d)}return h}}}function nx(){return 0}["w","e"].map(Fn),["n","s"].map(Fn),["n","w","e","s","nw","ne","sw","se"].map(Fn);const sx=Math.sqrt(50),rx=Math.sqrt(10),ox=Math.sqrt(2);function Xs(i,t,e){const n=(t-i)/Math.max(0,e),s=Math.floor(Math.log10(n)),r=n/Math.pow(10,s),a=r>=sx?10:r>=rx?5:r>=ox?2:1;let l,c,h;return s<0?(h=Math.pow(10,-s)/a,l=Math.round(i*h),c=Math.round(t*h),l/h<i&&++l,c/h>t&&--c,h=-h):(h=Math.pow(10,s)*a,l=Math.round(i/h),c=Math.round(t/h),l*h<i&&++l,c*h>t&&--c),c<l&&.5<=e&&e<2?Xs(i,t,2*e):[l,c,h]}function To(i,t,e){return Xs(i=+i,t=+t,e=+e)[2]}function ko(i,t,e){e=+e;const n=(t=+t)<(i=+i),s=n?To(t,i,e):To(i,t,e);return(n?-1:1)*(s<0?1/-s:s)}const Et=1e3,it=6e4,Ft=60*it,Ot=24*Ft,wo=7*Ot,_c=30*Ot,So=365*Ot,Ao=new Date,Do=new Date;function ye(i,t,e,n){function s(r){return i(r=0===arguments.length?new Date:new Date(+r)),r}return s.floor=r=>(i(r=new Date(+r)),r),s.ceil=r=>(i(r=new Date(r-1)),t(r,1),i(r),r),s.round=r=>{const a=s(r),l=s.ceil(r);return r-a<l-r?a:l},s.offset=(r,a)=>(t(r=new Date(+r),null==a?1:Math.floor(a)),r),s.range=(r,a,l)=>{const c=[];if(r=s.ceil(r),l=null==l?1:Math.floor(l),!(r<a&&l>0))return c;let h;do{c.push(h=new Date(+r)),t(r,l),i(r)}while(h<r&&r<a);return c},s.filter=r=>ye(a=>{if(a>=a)for(;i(a),!r(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;t(a,-1),!r(a););else for(;--l>=0;)for(;t(a,1),!r(a););}),e&&(s.count=(r,a)=>(Ao.setTime(+r),Do.setTime(+a),i(Ao),i(Do),Math.floor(e(Ao,Do))),s.every=r=>(r=Math.floor(r),isFinite(r)&&r>0?r>1?s.filter(n?a=>n(a)%r==0:a=>s.count(0,a)%r==0):s:null)),s}const Ys=ye(()=>{},(i,t)=>{i.setTime(+i+t)},(i,t)=>t-i);Ys.every=i=>(i=Math.floor(i),isFinite(i)&&i>0?i>1?ye(t=>{t.setTime(Math.floor(t/i)*i)},(t,e)=>{t.setTime(+t+e*i)},(t,e)=>(e-t)/i):Ys:null);const ji=ye(i=>{i.setTime(i-i.getMilliseconds())},(i,t)=>{i.setTime(+i+t*Et)},(i,t)=>(t-i)/Et,i=>i.getUTCSeconds()),Mo=ye(i=>{i.setTime(i-i.getMilliseconds()-i.getSeconds()*Et)},(i,t)=>{i.setTime(+i+t*it)},(i,t)=>(t-i)/it,i=>i.getMinutes()),xc=ye(i=>{i.setUTCSeconds(0,0)},(i,t)=>{i.setTime(+i+t*it)},(i,t)=>(t-i)/it,i=>i.getUTCMinutes()),Lo=ye(i=>{i.setTime(i-i.getMilliseconds()-i.getSeconds()*Et-i.getMinutes()*it)},(i,t)=>{i.setTime(+i+t*Ft)},(i,t)=>(t-i)/Ft,i=>i.getHours()),vc=ye(i=>{i.setUTCMinutes(0,0,0)},(i,t)=>{i.setTime(+i+t*Ft)},(i,t)=>(t-i)/Ft,i=>i.getUTCHours()),Eo=ye(i=>i.setHours(0,0,0,0),(i,t)=>i.setDate(i.getDate()+t),(i,t)=>(t-i-(t.getTimezoneOffset()-i.getTimezoneOffset())*it)/Ot,i=>i.getDate()-1),yc=(ye(i=>{i.setUTCHours(0,0,0,0)},(i,t)=>{i.setUTCDate(i.getUTCDate()+t)},(i,t)=>(t-i)/Ot,i=>i.getUTCDate()-1),ye(i=>{i.setUTCHours(0,0,0,0)},(i,t)=>{i.setUTCDate(i.getUTCDate()+t)},(i,t)=>(t-i)/Ot,i=>Math.floor(i/Ot)));function _i(i){return ye(t=>{t.setDate(t.getDate()-(t.getDay()+7-i)%7),t.setHours(0,0,0,0)},(t,e)=>{t.setDate(t.getDate()+7*e)},(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*it)/wo)}const Fo=_i(0);function xi(i){return ye(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-i)%7),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)},(t,e)=>(e-t)/wo)}_i(1),_i(2),_i(3),_i(4),_i(5),_i(6);const bc=xi(0),Oo=(xi(1),xi(2),xi(3),xi(4),xi(5),xi(6),ye(i=>{i.setDate(1),i.setHours(0,0,0,0)},(i,t)=>{i.setMonth(i.getMonth()+t)},(i,t)=>t.getMonth()-i.getMonth()+12*(t.getFullYear()-i.getFullYear()),i=>i.getMonth())),Cc=ye(i=>{i.setUTCDate(1),i.setUTCHours(0,0,0,0)},(i,t)=>{i.setUTCMonth(i.getUTCMonth()+t)},(i,t)=>t.getUTCMonth()-i.getUTCMonth()+12*(t.getUTCFullYear()-i.getUTCFullYear()),i=>i.getUTCMonth()),Ws=ye(i=>{i.setMonth(0,1),i.setHours(0,0,0,0)},(i,t)=>{i.setFullYear(i.getFullYear()+t)},(i,t)=>t.getFullYear()-i.getFullYear(),i=>i.getFullYear());Ws.every=i=>isFinite(i=Math.floor(i))&&i>0?ye(t=>{t.setFullYear(Math.floor(t.getFullYear()/i)*i),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e*i)}):null;const Io=ye(i=>{i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},(i,t)=>{i.setUTCFullYear(i.getUTCFullYear()+t)},(i,t)=>t.getUTCFullYear()-i.getUTCFullYear(),i=>i.getUTCFullYear());function Tc(i,t,e,n,s,r){const a=[[ji,1,Et],[ji,5,5e3],[ji,15,15e3],[ji,30,3e4],[r,1,it],[r,5,5*it],[r,15,15*it],[r,30,30*it],[s,1,Ft],[s,3,3*Ft],[s,6,6*Ft],[s,12,12*Ft],[n,1,Ot],[n,2,2*Ot],[e,1,wo],[t,1,_c],[t,3,3*_c],[i,1,So]];function c(h,d,u){const p=Math.abs(d-h)/u,m=Co(([,,f])=>f).right(a,p);if(m===a.length)return i.every(ko(h/So,d/So,u));if(0===m)return Ys.every(Math.max(ko(h,d,u),1));const[g,_]=a[p/a[m-1][2]<a[m][2]/p?m-1:m];return g.every(_)}return[function l(h,d,u){const p=d<h;p&&([h,d]=[d,h]);const m=u&&"function"==typeof u.range?u:c(h,d,u),g=m?m.range(h,+d+1):[];return p?g.reverse():g},c]}Io.every=i=>isFinite(i=Math.floor(i))&&i>0?ye(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/i)*i),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e*i)}):null;const[Z2,eL]=Tc(Io,Cc,bc,yc,vc,xc),[yx,bx]=Tc(Ws,Oo,Fo,Eo,Lo,Mo);var Po=new Date,Bo=new Date;function It(i,t,e,n){function s(r){return i(r=0===arguments.length?new Date:new Date(+r)),r}return s.floor=function(r){return i(r=new Date(+r)),r},s.ceil=function(r){return i(r=new Date(r-1)),t(r,1),i(r),r},s.round=function(r){var a=s(r),l=s.ceil(r);return r-a<l-r?a:l},s.offset=function(r,a){return t(r=new Date(+r),null==a?1:Math.floor(a)),r},s.range=function(r,a,l){var h,c=[];if(r=s.ceil(r),l=null==l?1:Math.floor(l),!(r<a&&l>0))return c;do{c.push(h=new Date(+r)),t(r,l),i(r)}while(h<r&&r<a);return c},s.filter=function(r){return It(function(a){if(a>=a)for(;i(a),!r(a);)a.setTime(a-1)},function(a,l){if(a>=a)if(l<0)for(;++l<=0;)for(;t(a,-1),!r(a););else for(;--l>=0;)for(;t(a,1),!r(a););})},e&&(s.count=function(r,a){return Po.setTime(+r),Bo.setTime(+a),i(Po),i(Bo),Math.floor(e(Po,Bo))},s.every=function(r){return r=Math.floor(r),isFinite(r)&&r>0?r>1?s.filter(n?function(a){return n(a)%r==0}:function(a){return s.count(0,a)%r==0}):s:null}),s}const In=864e5,kc=7*In;function vi(i){return It(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-i)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/kc})}var wc=vi(0),js=vi(1),Ui=(vi(2),vi(3),vi(4));const Ac=(vi(5),vi(6),It(function(i){i.setUTCHours(0,0,0,0)},function(i,t){i.setUTCDate(i.getUTCDate()+t)},function(i,t){return(t-i)/In},function(i){return i.getUTCDate()-1}));function yi(i){return It(function(t){t.setDate(t.getDate()-(t.getDay()+7-i)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/kc})}var Dc=yi(0),Us=yi(1),Qi=(yi(2),yi(3),yi(4));const Lc=(yi(5),yi(6),It(i=>i.setHours(0,0,0,0),(i,t)=>i.setDate(i.getDate()+t),(i,t)=>(t-i-6e4*(t.getTimezoneOffset()-i.getTimezoneOffset()))/In,i=>i.getDate()-1));var No=It(function(i){i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,t){i.setFullYear(i.getFullYear()+t)},function(i,t){return t.getFullYear()-i.getFullYear()},function(i){return i.getFullYear()});No.every=function(i){return isFinite(i=Math.floor(i))&&i>0?It(function(t){t.setFullYear(Math.floor(t.getFullYear()/i)*i),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*i)}):null};const Pn=No;var Vo=It(function(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,t){i.setUTCFullYear(i.getUTCFullYear()+t)},function(i,t){return t.getUTCFullYear()-i.getUTCFullYear()},function(i){return i.getUTCFullYear()});Vo.every=function(i){return isFinite(i=Math.floor(i))&&i>0?It(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/i)*i),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*i)}):null};const Bn=Vo;function zo(i){if(0<=i.y&&i.y<100){var t=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return t.setFullYear(i.y),t}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function Ho(i){if(0<=i.y&&i.y<100){var t=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return t.setUTCFullYear(i.y),t}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function Rn(i,t,e){return{y:i,m:t,d:e,H:0,M:0,S:0,L:0}}var Ec={"-":"",_:" ",0:"0"},Ce=/^\s*\d+/,Ex=/^%/,Fx=/[\\^$*+?|[\]().{}]/g;function W(i,t,e){var n=i<0?"-":"",s=(n?-i:i)+"",r=s.length;return n+(r<e?new Array(e-r+1).join(t)+s:s)}function Ox(i){return i.replace(Fx,"\\$&")}function Nn(i){return new RegExp("^(?:"+i.map(Ox).join("|")+")","i")}function Vn(i){return new Map(i.map((t,e)=>[t.toLowerCase(),e]))}function Ix(i,t,e){var n=Ce.exec(t.slice(e,e+1));return n?(i.w=+n[0],e+n[0].length):-1}function Px(i,t,e){var n=Ce.exec(t.slice(e,e+1));return n?(i.u=+n[0],e+n[0].length):-1}function Bx(i,t,e){var n=Ce.exec(t.slice(e,e+2));return n?(i.U=+n[0],e+n[0].length):-1}function Rx(i,t,e){var n=Ce.exec(t.slice(e,e+2));return n?(i.V=+n[0],e+n[0].length):-1}function Nx(i,t,e){var n=Ce.exec(t.slice(e,e+2));return n?(i.W=+n[0],e+n[0].length):-1}function Fc(i,t,e){var n=Ce.exec(t.slice(e,e+4));return n?(i.y=+n[0],e+n[0].length):-1}function Oc(i,t,e){var n=Ce.exec(t.slice(e,e+2));return n?(i.y=+n[0]+(+n[0]>68?1900:2e3),e+n[0].length):-1}function Vx(i,t,e){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(e,e+6));return n?(i.Z=n[1]?0:-(n[2]+(n[3]||"00")),e+n[0].length):-1}function zx(i,t,e){var n=Ce.exec(t.slice(e,e+1));return n?(i.q=3*n[0]-3,e+n[0].length):-1}function Hx(i,t,e){var n=Ce.exec(t.slice(e,e+2));return n?(i.m=n[0]-1,e+n[0].length):-1}function Ic(i,t,e){var n=Ce.exec(t.slice(e,e+2));return n?(i.d=+n[0],e+n[0].length):-1}function $x(i,t,e){var n=Ce.exec(t.slice(e,e+3));return n?(i.m=0,i.d=+n[0],e+n[0].length):-1}function Pc(i,t,e){var n=Ce.exec(t.slice(e,e+2));return n?(i.H=+n[0],e+n[0].length):-1}function Gx(i,t,e){var n=Ce.exec(t.slice(e,e+2));return n?(i.M=+n[0],e+n[0].length):-1}function Xx(i,t,e){var n=Ce.exec(t.slice(e,e+2));return n?(i.S=+n[0],e+n[0].length):-1}function Yx(i,t,e){var n=Ce.exec(t.slice(e,e+3));return n?(i.L=+n[0],e+n[0].length):-1}function Wx(i,t,e){var n=Ce.exec(t.slice(e,e+6));return n?(i.L=Math.floor(n[0]/1e3),e+n[0].length):-1}function jx(i,t,e){var n=Ex.exec(t.slice(e,e+1));return n?e+n[0].length:-1}function Ux(i,t,e){var n=Ce.exec(t.slice(e));return n?(i.Q=+n[0],e+n[0].length):-1}function Qx(i,t,e){var n=Ce.exec(t.slice(e));return n?(i.s=+n[0],e+n[0].length):-1}function Bc(i,t){return W(i.getDate(),t,2)}function qx(i,t){return W(i.getHours(),t,2)}function Kx(i,t){return W(i.getHours()%12||12,t,2)}function Jx(i,t){return W(1+Lc.count(Pn(i),i),t,3)}function Rc(i,t){return W(i.getMilliseconds(),t,3)}function Zx(i,t){return Rc(i,t)+"000"}function e0(i,t){return W(i.getMonth()+1,t,2)}function t0(i,t){return W(i.getMinutes(),t,2)}function n0(i,t){return W(i.getSeconds(),t,2)}function s0(i){var t=i.getDay();return 0===t?7:t}function r0(i,t){return W(Dc.count(Pn(i)-1,i),t,2)}function Nc(i){var t=i.getDay();return t>=4||0===t?Qi(i):Qi.ceil(i)}function o0(i,t){return i=Nc(i),W(Qi.count(Pn(i),i)+(4===Pn(i).getDay()),t,2)}function a0(i){return i.getDay()}function l0(i,t){return W(Us.count(Pn(i)-1,i),t,2)}function c0(i,t){return W(i.getFullYear()%100,t,2)}function h0(i,t){return W((i=Nc(i)).getFullYear()%100,t,2)}function d0(i,t){return W(i.getFullYear()%1e4,t,4)}function u0(i,t){var e=i.getDay();return W((i=e>=4||0===e?Qi(i):Qi.ceil(i)).getFullYear()%1e4,t,4)}function p0(i){var t=i.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+W(t/60|0,"0",2)+W(t%60,"0",2)}function Vc(i,t){return W(i.getUTCDate(),t,2)}function m0(i,t){return W(i.getUTCHours(),t,2)}function g0(i,t){return W(i.getUTCHours()%12||12,t,2)}function f0(i,t){return W(1+Ac.count(Bn(i),i),t,3)}function zc(i,t){return W(i.getUTCMilliseconds(),t,3)}function _0(i,t){return zc(i,t)+"000"}function x0(i,t){return W(i.getUTCMonth()+1,t,2)}function v0(i,t){return W(i.getUTCMinutes(),t,2)}function y0(i,t){return W(i.getUTCSeconds(),t,2)}function b0(i){var t=i.getUTCDay();return 0===t?7:t}function C0(i,t){return W(wc.count(Bn(i)-1,i),t,2)}function Hc(i){var t=i.getUTCDay();return t>=4||0===t?Ui(i):Ui.ceil(i)}function T0(i,t){return i=Hc(i),W(Ui.count(Bn(i),i)+(4===Bn(i).getUTCDay()),t,2)}function k0(i){return i.getUTCDay()}function w0(i,t){return W(js.count(Bn(i)-1,i),t,2)}function S0(i,t){return W(i.getUTCFullYear()%100,t,2)}function A0(i,t){return W((i=Hc(i)).getUTCFullYear()%100,t,2)}function D0(i,t){return W(i.getUTCFullYear()%1e4,t,4)}function M0(i,t){var e=i.getUTCDay();return W((i=e>=4||0===e?Ui(i):Ui.ceil(i)).getUTCFullYear()%1e4,t,4)}function L0(){return"+0000"}function $c(){return"%"}function Gc(i){return+i}function Xc(i){return Math.floor(+i/1e3)}function Wc(i){return null===i?NaN:+i}!function I0(i){(function Lx(i){var t=i.dateTime,e=i.date,n=i.time,s=i.periods,r=i.days,a=i.shortDays,l=i.months,c=i.shortMonths,h=Nn(s),d=Vn(s),u=Nn(r),p=Vn(r),m=Nn(a),g=Vn(a),_=Nn(l),f=Vn(l),x=Nn(c),T=Vn(c),C={a:function re(A){return a[A.getDay()]},A:function $e(A){return r[A.getDay()]},b:function J(A){return c[A.getMonth()]},B:function be(A){return l[A.getMonth()]},c:null,d:Bc,e:Bc,f:Zx,g:h0,G:u0,H:qx,I:Kx,j:Jx,L:Rc,m:e0,M:t0,p:function pe(A){return s[+(A.getHours()>=12)]},q:function me(A){return 1+~~(A.getMonth()/3)},Q:Gc,s:Xc,S:n0,u:s0,U:r0,V:o0,w:a0,W:l0,x:null,X:null,y:c0,Y:d0,Z:p0,"%":$c},M={a:function bs(A){return a[A.getUTCDay()]},A:function bn(A){return r[A.getUTCDay()]},b:function Cn(A){return c[A.getUTCMonth()]},B:function Tn(A){return l[A.getUTCMonth()]},c:null,d:Vc,e:Vc,f:_0,g:A0,G:M0,H:m0,I:g0,j:f0,L:zc,m:x0,M:v0,p:function Re(A){return s[+(A.getUTCHours()>=12)]},q:function zi(A){return 1+~~(A.getUTCMonth()/3)},Q:Gc,s:Xc,S:y0,u:b0,U:C0,V:T0,w:k0,W:w0,x:null,X:null,y:S0,Y:D0,Z:L0,"%":$c},E={a:function X(A,V,G){var y=m.exec(V.slice(G));return y?(A.w=g.get(y[0].toLowerCase()),G+y[0].length):-1},A:function L(A,V,G){var y=u.exec(V.slice(G));return y?(A.w=p.get(y[0].toLowerCase()),G+y[0].length):-1},b:function _e(A,V,G){var y=x.exec(V.slice(G));return y?(A.m=T.get(y[0].toLowerCase()),G+y[0].length):-1},B:function U(A,V,G){var y=_.exec(V.slice(G));return y?(A.m=f.get(y[0].toLowerCase()),G+y[0].length):-1},c:function ie(A,V,G){return j(A,t,V,G)},d:Ic,e:Ic,f:Wx,g:Oc,G:Fc,H:Pc,I:Pc,j:$x,L:Yx,m:Hx,M:Gx,p:function N(A,V,G){var y=h.exec(V.slice(G));return y?(A.p=d.get(y[0].toLowerCase()),G+y[0].length):-1},q:zx,Q:Ux,s:Qx,S:Xx,u:Px,U:Bx,V:Rx,w:Ix,W:Nx,x:function tt(A,V,G){return j(A,e,V,G)},X:function se(A,V,G){return j(A,n,V,G)},y:Oc,Y:Fc,Z:Vx,"%":jx};function k(A,V){return function(G){var Xe,B,he,y=[],ce=-1,Z=0,Ge=A.length;for(G instanceof Date||(G=new Date(+G));++ce<Ge;)37===A.charCodeAt(ce)&&(y.push(A.slice(Z,ce)),null!=(B=Ec[Xe=A.charAt(++ce)])?Xe=A.charAt(++ce):B="e"===Xe?" ":"0",(he=V[Xe])&&(Xe=he(G,B)),y.push(Xe),Z=ce+1);return y.push(A.slice(Z,ce)),y.join("")}}function Q(A,V){return function(G){var Z,Ge,y=Rn(1900,void 0,1);if(j(y,A,G+="",0)!=G.length)return null;if("Q"in y)return new Date(y.Q);if("s"in y)return new Date(1e3*y.s+("L"in y?y.L:0));if(V&&!("Z"in y)&&(y.Z=0),"p"in y&&(y.H=y.H%12+12*y.p),void 0===y.m&&(y.m="q"in y?y.q:0),"V"in y){if(y.V<1||y.V>53)return null;"w"in y||(y.w=1),"Z"in y?(Ge=(Z=Ho(Rn(y.y,0,1))).getUTCDay(),Z=Ge>4||0===Ge?js.ceil(Z):js(Z),Z=Ac.offset(Z,7*(y.V-1)),y.y=Z.getUTCFullYear(),y.m=Z.getUTCMonth(),y.d=Z.getUTCDate()+(y.w+6)%7):(Ge=(Z=zo(Rn(y.y,0,1))).getDay(),Z=Ge>4||0===Ge?Us.ceil(Z):Us(Z),Z=Lc.offset(Z,7*(y.V-1)),y.y=Z.getFullYear(),y.m=Z.getMonth(),y.d=Z.getDate()+(y.w+6)%7)}else("W"in y||"U"in y)&&("w"in y||(y.w="u"in y?y.u%7:"W"in y?1:0),Ge="Z"in y?Ho(Rn(y.y,0,1)).getUTCDay():zo(Rn(y.y,0,1)).getDay(),y.m=0,y.d="W"in y?(y.w+6)%7+7*y.W-(Ge+5)%7:y.w+7*y.U-(Ge+6)%7);return"Z"in y?(y.H+=y.Z/100|0,y.M+=y.Z%100,Ho(y)):zo(y)}}function j(A,V,G,y){for(var Xe,B,ce=0,Z=V.length,Ge=G.length;ce<Z;){if(y>=Ge)return-1;if(37===(Xe=V.charCodeAt(ce++))){if(Xe=V.charAt(ce++),!(B=E[Xe in Ec?V.charAt(ce++):Xe])||(y=B(A,G,y))<0)return-1}else if(Xe!=G.charCodeAt(y++))return-1}return y}return C.x=k(e,C),C.X=k(n,C),C.c=k(t,C),M.x=k(e,M),M.X=k(n,M),M.c=k(t,M),{format:function(A){var V=k(A+="",C);return V.toString=function(){return A},V},parse:function(A){var V=Q(A+="",!1);return V.toString=function(){return A},V},utcFormat:function(A){var V=k(A+="",M);return V.toString=function(){return A},V},utcParse:function(A){var V=Q(A+="",!0);return V.toString=function(){return A},V}}})(i)}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const P0=Co(On).right,Uc=(Co(Wc),P0);function B0(i,t){return i=+i,t=+t,function(e){return Math.round(i*(1-e)+t*e)}}function N0(i){return+i}var Qc=[0,1];function Ki(i){return i}function $o(i,t){return(t-=i=+i)?function(e){return(e-i)/t}:function R0(i){return function(){return i}}(isNaN(t)?NaN:.5)}function z0(i,t,e){var n=i[0],s=i[1],r=t[0],a=t[1];return s<n?(n=$o(s,n),r=e(a,r)):(n=$o(n,s),r=e(r,a)),function(l){return r(n(l))}}function H0(i,t,e){var n=Math.min(i.length,t.length)-1,s=new Array(n),r=new Array(n),a=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),t=t.slice().reverse());++a<n;)s[a]=$o(i[a],i[a+1]),r[a]=e(t[a],t[a+1]);return function(l){var c=Uc(i,l,1,n)-1;return r[c](s[c](l))}}function Kc(){return function $0(){var n,s,r,l,c,h,i=Qc,t=Qc,e=Os,a=Ki;function d(){var p=Math.min(i.length,t.length);return a!==Ki&&(a=function V0(i,t){var e;return i>t&&(e=i,i=t,t=e),function(n){return Math.max(i,Math.min(t,n))}}(i[0],i[p-1])),l=p>2?H0:z0,c=h=null,u}function u(p){return null==p||isNaN(p=+p)?r:(c||(c=l(i.map(n),t,e)))(n(a(p)))}return u.invert=function(p){return a(s((h||(h=l(t,i.map(n),ht)))(p)))},u.domain=function(p){return arguments.length?(i=Array.from(p,N0),d()):i.slice()},u.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},u.rangeRound=function(p){return t=Array.from(p),e=B0,d()},u.clamp=function(p){return arguments.length?(a=!!p||Ki,d()):a!==Ki},u.interpolate=function(p){return arguments.length?(e=p,d()):e},u.unknown=function(p){return arguments.length?(r=p,u):r},function(p,m){return n=p,s=m,d()}}()(Ki,Ki)}function zn(i,t){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(t).domain(i)}return this}var Zc,j0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qs(i){if(!(t=j0.exec(i)))throw new Error("invalid format: "+i);var t;return new Go({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Go(i){this.fill=void 0===i.fill?" ":i.fill+"",this.align=void 0===i.align?">":i.align+"",this.sign=void 0===i.sign?"-":i.sign+"",this.symbol=void 0===i.symbol?"":i.symbol+"",this.zero=!!i.zero,this.width=void 0===i.width?void 0:+i.width,this.comma=!!i.comma,this.precision=void 0===i.precision?void 0:+i.precision,this.trim=!!i.trim,this.type=void 0===i.type?"":i.type+""}function qs(i,t){if((e=(i=t?i.toExponential(t-1):i.toExponential()).indexOf("e"))<0)return null;var e,n=i.slice(0,e);return[n.length>1?n[0]+n.slice(2):n,+i.slice(e+1)]}function Ji(i){return(i=qs(Math.abs(i)))?i[1]:NaN}function eh(i,t){var e=qs(i,t);if(!e)return i+"";var n=e[0],s=e[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}Qs.prototype=Go.prototype,Go.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const th={"%":(i,t)=>(100*i).toFixed(t),b:i=>Math.round(i).toString(2),c:i=>i+"",d:function U0(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)},e:(i,t)=>i.toExponential(t),f:(i,t)=>i.toFixed(t),g:(i,t)=>i.toPrecision(t),o:i=>Math.round(i).toString(8),p:(i,t)=>eh(100*i,t),r:eh,s:function Z0(i,t){var e=qs(i,t);if(!e)return i+"";var n=e[0],s=e[1],r=s-(Zc=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,a=n.length;return r===a?n:r>a?n+new Array(r-a+1).join("0"):r>0?n.slice(0,r)+"."+n.slice(r):"0."+new Array(1-r).join("0")+qs(i,Math.max(0,t+r-1))[0]},X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function ih(i){return i}var Ks,rh,oh,nh=Array.prototype.map,sh=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function rv(i){var t=i.domain;return i.ticks=function(e){var n=t();return function ax(i,t,e){if(!((e=+e)>0))return[];if((i=+i)==(t=+t))return[i];const n=t<i,[s,r,a]=n?Xs(t,i,e):Xs(i,t,e);if(!(r>=s))return[];const l=r-s+1,c=new Array(l);if(n)if(a<0)for(let h=0;h<l;++h)c[h]=(r-h)/-a;else for(let h=0;h<l;++h)c[h]=(r-h)*a;else if(a<0)for(let h=0;h<l;++h)c[h]=(s+h)/-a;else for(let h=0;h<l;++h)c[h]=(s+h)*a;return c}(n[0],n[n.length-1],e??10)},i.tickFormat=function(e,n){var s=t();return function sv(i,t,e,n){var r,s=ko(i,t,e);switch((n=Qs(n??",f")).type){case"s":var a=Math.max(Math.abs(i),Math.abs(t));return null==n.precision&&!isNaN(r=function Q0(i,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ji(t)/3)))-Ji(Math.abs(i)))}(s,a))&&(n.precision=r),oh(n,a);case"":case"e":case"g":case"p":case"r":null==n.precision&&!isNaN(r=function iv(i,t){return i=Math.abs(i),t=Math.abs(t)-i,Math.max(0,Ji(t)-Ji(i))+1}(s,Math.max(Math.abs(i),Math.abs(t))))&&(n.precision=r-("e"===n.type));break;case"f":case"%":null==n.precision&&!isNaN(r=function nv(i){return Math.max(0,-Ji(Math.abs(i)))}(s))&&(n.precision=r-2*("%"===n.type))}return rh(n)}(s[0],s[s.length-1],e??10,n)},i.nice=function(e){null==e&&(e=10);var c,h,n=t(),s=0,r=n.length-1,a=n[s],l=n[r],d=10;for(l<a&&(h=a,a=l,l=h,h=s,s=r,r=h);d-- >0;){if((h=To(a,l,e))===c)return n[s]=a,n[r]=l,t(n);if(h>0)a=Math.floor(a/h)*h,l=Math.ceil(l/h)*h;else{if(!(h<0))break;a=Math.ceil(a*h)/h,l=Math.floor(l*h)/h}c=h}return i},i}function Hn(){var i=Kc();return i.copy=function(){return function qc(i,t){return t.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}(i,Hn())},zn.apply(i,arguments),rv(i)}function ah(i,t,e){i=+i,t=+t,e=(s=arguments.length)<2?(t=i,i=0,1):s<3?1:+e;for(var n=-1,s=0|Math.max(0,Math.ceil((t-i)/e)),r=new Array(s);++n<s;)r[n]=i+n*e;return r}!function tv(i){Ks=function ev(i){var t=void 0===i.grouping||void 0===i.thousands?ih:function q0(i,t){return function(e,n){for(var s=e.length,r=[],a=0,l=i[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),r.push(e.substring(s-=l,s+l)),!((c+=l+1)>n));)l=i[a=(a+1)%i.length];return r.reverse().join(t)}}(nh.call(i.grouping,Number),i.thousands+""),e=void 0===i.currency?"":i.currency[0]+"",n=void 0===i.currency?"":i.currency[1]+"",s=void 0===i.decimal?".":i.decimal+"",r=void 0===i.numerals?ih:function K0(i){return function(t){return t.replace(/[0-9]/g,function(e){return i[+e]})}}(nh.call(i.numerals,String)),a=void 0===i.percent?"%":i.percent+"",l=void 0===i.minus?"\u2212":i.minus+"",c=void 0===i.nan?"NaN":i.nan+"";function h(u){var p=(u=Qs(u)).fill,m=u.align,g=u.sign,_=u.symbol,f=u.zero,x=u.width,T=u.comma,C=u.precision,M=u.trim,E=u.type;"n"===E?(T=!0,E="g"):th[E]||(void 0===C&&(C=12),M=!0,E="g"),(f||"0"===p&&"="===m)&&(f=!0,p="0",m="=");var k="$"===_?e:"#"===_&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",Q="$"===_?n:/[%p]/.test(E)?a:"",j=th[E],N=/[defgprs%]/.test(E);function X(L){var ie,tt,se,_e=k,U=Q;if("c"===E)U=j(L)+U,L="";else{var re=(L=+L)<0||1/L<0;if(L=isNaN(L)?c:j(Math.abs(L),C),M&&(L=function J0(i){e:for(var s,t=i.length,e=1,n=-1;e<t;++e)switch(i[e]){case".":n=s=e;break;case"0":0===n&&(n=e),s=e;break;default:if(!+i[e])break e;n>0&&(n=0)}return n>0?i.slice(0,n)+i.slice(s+1):i}(L)),re&&0==+L&&"+"!==g&&(re=!1),_e=(re?"("===g?g:l:"-"===g||"("===g?"":g)+_e,U=("s"===E?sh[8+Zc/3]:"")+U+(re&&"("===g?")":""),N)for(ie=-1,tt=L.length;++ie<tt;)if(48>(se=L.charCodeAt(ie))||se>57){U=(46===se?s+L.slice(ie+1):L.slice(ie))+U,L=L.slice(0,ie);break}}T&&!f&&(L=t(L,1/0));var $e=_e.length+L.length+U.length,J=$e<x?new Array(x-$e+1).join(p):"";switch(T&&f&&(L=t(J+L,J.length?x-U.length:1/0),J=""),m){case"<":L=_e+L+U+J;break;case"=":L=_e+J+L+U;break;case"^":L=J.slice(0,$e=J.length>>1)+_e+L+U+J.slice($e);break;default:L=J+_e+L+U}return r(L)}return C=void 0===C?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C)),X.toString=function(){return u+""},X}return{format:h,formatPrefix:function d(u,p){var m=h(((u=Qs(u)).type="f",u)),g=3*Math.max(-8,Math.min(8,Math.floor(Ji(p)/3))),_=Math.pow(10,-g),f=sh[8+g/3];return function(x){return m(_*x)+f}}}}(i),rh=Ks.format,oh=Ks.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});class lh extends Map{constructor(t,e=dh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(Xo(this,t))}has(t){return super.has(Xo(this,t))}set(t,e){return super.set(function ch({_intern:i,_key:t},e){const n=t(e);return i.has(n)?i.get(n):(i.set(n,e),e)}(this,t),e)}delete(t){return super.delete(function hh({_intern:i,_key:t},e){const n=t(e);return i.has(n)&&(e=i.get(n),i.delete(n)),e}(this,t))}}function Xo({_intern:i,_key:t},e){const n=t(e);return i.has(n)?i.get(n):e}function dh(i){return null!==i&&"object"==typeof i?i.valueOf():i}Set;const uh=Symbol("implicit");function Yo(){var i=new lh,t=[],e=[],n=uh;function s(r){let a=i.get(r);if(void 0===a){if(n!==uh)return n;i.set(r,a=t.push(r)-1)}return e[a%e.length]}return s.domain=function(r){if(!arguments.length)return t.slice();t=[],i=new lh;for(const a of r)i.has(a)||i.set(a,t.push(a)-1);return s},s.range=function(r){return arguments.length?(e=Array.from(r),s):e.slice()},s.unknown=function(r){return arguments.length?(n=r,s):n},s.copy=function(){return Yo(t,e).unknown(n)},zn.apply(s,arguments),s}function $n(){var r,a,i=Yo().unknown(void 0),t=i.domain,e=i.range,n=0,s=1,l=!1,c=0,h=0,d=.5;function u(){var p=t().length,m=s<n,g=m?s:n,_=m?n:s;r=(_-g)/Math.max(1,p-c+2*h),l&&(r=Math.floor(r)),g+=(_-g-r*(p-c))*d,a=r*(1-c),l&&(g=Math.round(g),a=Math.round(a));var f=ah(p).map(function(x){return g+r*x});return e(m?f.reverse():f)}return delete i.unknown,i.domain=function(p){return arguments.length?(t(p),u()):t()},i.range=function(p){return arguments.length?([n,s]=p,n=+n,s=+s,u()):[n,s]},i.rangeRound=function(p){return[n,s]=p,n=+n,s=+s,l=!0,u()},i.bandwidth=function(){return a},i.step=function(){return r},i.round=function(p){return arguments.length?(l=!!p,u()):l},i.padding=function(p){return arguments.length?(c=Math.min(1,h=+p),u()):c},i.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),u()):c},i.paddingOuter=function(p){return arguments.length?(h=+p,u()):h},i.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),u()):d},i.copy=function(){return $n(t(),[n,s]).round(l).paddingInner(c).paddingOuter(h).align(d)},zn.apply(u(),arguments)}function av(i,t,e=Wc){if((n=i.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+e(i[0],0,i);if(t>=1)return+e(i[n-1],n-1,i);var n,s=(n-1)*t,r=Math.floor(s),a=+e(i[r],r,i);return a+(+e(i[r+1],r+1,i)-a)*(s-r)}}function mh(){var n,i=[],t=[],e=[];function s(){var a=0,l=Math.max(1,t.length);for(e=new Array(l-1);++a<l;)e[a-1]=av(i,a/l);return r}function r(a){return null==a||isNaN(a=+a)?n:t[Uc(e,a)]}return r.invertExtent=function(a){var l=t.indexOf(a);return l<0?[NaN,NaN]:[l>0?e[l-1]:i[0],l<e.length?e[l]:i[i.length-1]]},r.domain=function(a){if(!arguments.length)return i.slice();i=[];for(let l of a)null!=l&&!isNaN(l=+l)&&i.push(l);return i.sort(On),s()},r.range=function(a){return arguments.length?(t=Array.from(a),s()):t.slice()},r.unknown=function(a){return arguments.length?(n=a,r):n},r.quantiles=function(){return e.slice()},r.copy=function(){return mh().domain(i).range(t).unknown(n)},zn.apply(r,arguments)}var lv=S(6021);const cv=["caretElm"],hv=i=>({model:i});function dv(i,t){}function uv(i,t){if(1&i&&(o.j41(0,"span"),o.DNE(1,dv,0,0,"ng-template",5),o.k0s()),2&i){const e=o.XpG();o.R7$(),o.Y8G("ngTemplateOutlet",e.template)("ngTemplateOutletContext",o.eq3(2,hv,e.context))}}function pv(i,t){if(1&i&&o.nrm(0,"span",6),2&i){const e=o.XpG();o.Y8G("innerHTML",e.title,o.npT)}}function mv(i,t){if(1&i&&(o.j41(0,"header",4)(1,"span",5),o.EFF(2),o.k0s()()),2&i){const e=o.XpG();o.R7$(2),o.JRh(e.title)}}function gv(i,t){if(1&i){const e=o.RV6();o.j41(0,"li",6)(1,"ngx-charts-legend-entry",7),o.bIt("select",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.labelClick.emit(s))})("activate",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.activate(s))})("deactivate",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.deactivate(s))}),o.k0s()()}if(2&i){const e=t.$implicit,n=o.XpG();o.R7$(),o.Y8G("label",e.label)("formattedLabel",e.formattedLabel)("color",e.color)("isActive",n.isActive(e))}}const gh=["*"];function fv(i,t){if(1&i&&o.nrm(0,"ngx-charts-scale-legend",4),2&i){const e=o.XpG();o.Y8G("horizontal",e.legendOptions&&e.legendOptions.position===e.LegendPosition.Below)("valueRange",e.legendOptions.domain)("colors",e.legendOptions.colors)("height",e.view[1])("width",e.legendWidth)}}function _v(i,t){if(1&i){const e=o.RV6();o.j41(0,"ngx-charts-legend",5),o.bIt("labelClick",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.legendLabelClick.emit(s))})("labelActivate",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.legendLabelActivate.emit(s))})("labelDeactivate",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.legendLabelDeactivate.emit(s))}),o.k0s()}if(2&i){const e=o.XpG();o.Y8G("horizontal",e.legendOptions&&e.legendOptions.position===e.LegendPosition.Below)("data",e.legendOptions.domain)("title",e.legendOptions.title)("colors",e.legendOptions.colors)("height",e.view[1])("width",e.legendWidth)("activeEntries",e.activeEntries)}}const xv=["ngx-charts-axis-label",""],fh=["ticksel"],vv=["ngx-charts-x-axis-ticks",""];function yv(i,t){1&i&&(o.qSk(),o.eu8(0))}function bv(i,t){if(1&i&&(o.qSk(),o.j41(0,"tspan",10),o.EFF(1),o.k0s()),2&i){const e=t.$implicit;o.BMQ("y",12*t.index),o.R7$(),o.SpI(" ",e," ")}}function Cv(i,t){if(1&i&&(o.qSk(),o.qex(0),o.DNE(1,bv,2,2,"tspan",9),o.bVm()),2&i){const e=t.ngIf;o.R7$(),o.Y8G("ngForOf",e)}}function Tv(i,t){if(1&i&&o.DNE(0,Cv,2,1,"ng-container",6),2&i){const e=o.XpG(2).$implicit,n=o.XpG();o.Y8G("ngIf",n.tickChunks(e))}}function kv(i,t){if(1&i&&o.EFF(0),2&i){const e=o.XpG().ngIf,n=o.XpG(2);o.SpI(" ",n.tickTrim(e)," ")}}function wv(i,t){if(1&i&&(o.qSk(),o.qex(0),o.j41(1,"title"),o.EFF(2),o.k0s(),o.j41(3,"text",7),o.DNE(4,yv,1,0,"ng-container",8),o.k0s(),o.DNE(5,Tv,1,1,"ng-template",null,1,o.C5r)(7,kv,1,1,"ng-template",null,2,o.C5r),o.bVm()),2&i){const e=t.ngIf,n=o.sdS(6),s=o.sdS(8),r=o.XpG(2);o.R7$(2),o.JRh(e),o.R7$(),o.BMQ("text-anchor",r.textAnchor)("transform",r.textTransform),o.R7$(),o.Y8G("ngIf",r.isWrapTicksSupported)("ngIfThen",n)("ngIfElse",s)}}function Sv(i,t){if(1&i&&(o.qSk(),o.j41(0,"g",5),o.DNE(1,wv,9,6,"ng-container",6),o.k0s()),2&i){const e=t.$implicit,n=o.XpG();o.BMQ("transform",n.tickTransform(e)),o.R7$(),o.Y8G("ngIf",n.tickFormat(e))}}function Av(i,t){if(1&i&&(o.qSk(),o.j41(0,"g"),o.nrm(1,"line",11),o.k0s()),2&i){const e=o.XpG(2);o.BMQ("transform",e.gridLineTransform()),o.R7$(),o.BMQ("y1",-e.gridLineHeight)}}function Dv(i,t){if(1&i&&(o.qSk(),o.j41(0,"g"),o.DNE(1,Av,2,2,"g",6),o.k0s()),2&i){const e=t.$implicit,n=o.XpG();o.BMQ("transform",n.tickTransform(e)),o.R7$(),o.Y8G("ngIf",n.showGridLines)}}const Mv=["ngx-charts-x-axis",""];function Lv(i,t){if(1&i){const e=o.RV6();o.qSk(),o.j41(0,"g",2),o.bIt("dimensionsChanged",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.emitTicksHeight(s))}),o.k0s()}if(2&i){const e=o.XpG();o.Y8G("trimTicks",e.trimTicks)("rotateTicks",e.rotateTicks)("maxTickLength",e.maxTickLength)("tickFormatting",e.tickFormatting)("tickArguments",e.tickArguments)("tickStroke",e.tickStroke)("scale",e.xScale)("orient",e.xOrient)("showGridLines",e.showGridLines)("gridLineHeight",e.dims.height)("width",e.dims.width)("tickValues",e.ticks)("wrapTicks",e.wrapTicks)}}function Ev(i,t){if(1&i&&(o.qSk(),o.nrm(0,"g",3)),2&i){const e=o.XpG();o.Y8G("label",e.labelText)("offset",e.labelOffset)("orient",e.orientation.Bottom)("height",e.dims.height)("width",e.dims.width)}}const Fv=["ngx-charts-y-axis-ticks",""];function Ov(i,t){1&i&&(o.qSk(),o.eu8(0))}function Iv(i,t){if(1&i&&(o.qSk(),o.j41(0,"tspan",12),o.EFF(1),o.k0s()),2&i){const e=t.$implicit,n=t.index,s=o.XpG(6);o.BMQ("y",n*(8+s.tickSpacing)),o.R7$(),o.SpI(" ",e," ")}}function Pv(i,t){if(1&i&&(o.qSk(),o.qex(0),o.DNE(1,Iv,2,2,"tspan",11),o.bVm()),2&i){const e=o.XpG().ngIf;o.R7$(),o.Y8G("ngForOf",e)}}function Bv(i,t){if(1&i&&(o.qSk(),o.qex(0),o.DNE(1,Pv,2,1,"ng-container",10),o.bVm()),2&i){const e=t.ngIf;o.XpG(2);const n=o.sdS(8);o.R7$(),o.Y8G("ngIf",e.length>1)("ngIfElse",n)}}function Rv(i,t){if(1&i&&o.DNE(0,Bv,2,2,"ng-container",7),2&i){const e=o.XpG(2).$implicit,n=o.XpG();o.Y8G("ngIf",n.tickChunks(e))}}function Nv(i,t){if(1&i&&o.EFF(0),2&i){const e=o.XpG().ngIf,n=o.XpG(2);o.SpI(" ",n.tickTrim(e)," ")}}function Vv(i,t){if(1&i&&(o.qSk(),o.qex(0),o.j41(1,"title"),o.EFF(2),o.k0s(),o.j41(3,"text",8),o.DNE(4,Ov,1,0,"ng-container",9),o.k0s(),o.DNE(5,Rv,1,1,"ng-template",null,1,o.C5r)(7,Nv,1,1,"ng-template",null,2,o.C5r),o.bVm()),2&i){const e=t.ngIf,n=o.sdS(6),s=o.sdS(8),r=o.XpG(2);o.R7$(2),o.JRh(e),o.R7$(),o.xc7("font-size","12px"),o.BMQ("dy",r.dy)("x",r.x1)("y",r.y1)("text-anchor",r.textAnchor),o.R7$(),o.Y8G("ngIf",r.wrapTicks)("ngIfThen",n)("ngIfElse",s)}}function zv(i,t){if(1&i&&(o.qSk(),o.j41(0,"g",6),o.DNE(1,Vv,9,10,"ng-container",7),o.k0s()),2&i){const e=t.$implicit,n=o.XpG();o.BMQ("transform",n.transform(e)),o.R7$(),o.Y8G("ngIf",n.tickFormat(e))}}function Hv(i,t){if(1&i&&(o.qSk(),o.nrm(0,"path",13)),2&i){const e=o.XpG();o.BMQ("d",e.referenceAreaPath)("transform",e.gridLineTransform())}}function $v(i,t){if(1&i&&(o.qSk(),o.nrm(0,"line",15)),2&i){const e=o.XpG(3);o.BMQ("x2",e.gridLineWidth)}}function Gv(i,t){if(1&i&&(o.qSk(),o.nrm(0,"line",15)),2&i){const e=o.XpG(3);o.BMQ("x2",-e.gridLineWidth)}}function Xv(i,t){if(1&i&&(o.qSk(),o.j41(0,"g"),o.DNE(1,$v,1,1,"line",14)(2,Gv,1,1,"line",14),o.k0s()),2&i){const e=o.XpG(2);o.BMQ("transform",e.gridLineTransform()),o.R7$(),o.Y8G("ngIf",e.orient===e.Orientation.Left),o.R7$(),o.Y8G("ngIf",e.orient===e.Orientation.Right)}}function Yv(i,t){if(1&i&&(o.qSk(),o.j41(0,"g"),o.DNE(1,Xv,3,3,"g",7),o.k0s()),2&i){const e=t.$implicit,n=o.XpG();o.BMQ("transform",n.transform(e)),o.R7$(),o.Y8G("ngIf",n.showGridLines)}}function Wv(i,t){if(1&i&&(o.qSk(),o.j41(0,"g")(1,"title"),o.EFF(2),o.k0s(),o.j41(3,"text",17),o.EFF(4),o.k0s()()),2&i){const e=o.XpG(2).$implicit,n=o.XpG();o.R7$(2),o.JRh(n.tickTrim(n.tickFormat(e.value))),o.R7$(),o.BMQ("dy",n.dy)("y",-6)("x",n.gridLineWidth)("text-anchor",n.textAnchor),o.R7$(),o.SpI(" ",e.name," ")}}function jv(i,t){if(1&i&&(o.qSk(),o.j41(0,"g"),o.nrm(1,"line",16),o.DNE(2,Wv,5,6,"g",7),o.k0s()),2&i){const e=o.XpG().$implicit,n=o.XpG();o.BMQ("transform",n.transform(e.value)),o.R7$(),o.BMQ("x2",n.gridLineWidth)("transform",n.gridLineTransform()),o.R7$(),o.Y8G("ngIf",n.showRefLabels)}}function Uv(i,t){if(1&i&&(o.qSk(),o.j41(0,"g"),o.DNE(1,jv,3,4,"g",7),o.k0s()),2&i){const e=o.XpG();o.R7$(),o.Y8G("ngIf",e.showRefLines)}}const Qv=["ngx-charts-y-axis",""];function qv(i,t){if(1&i){const e=o.RV6();o.qSk(),o.j41(0,"g",2),o.bIt("dimensionsChanged",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.emitTicksWidth(s))}),o.k0s()}if(2&i){const e=o.XpG();o.Y8G("trimTicks",e.trimTicks)("maxTickLength",e.maxTickLength)("tickFormatting",e.tickFormatting)("tickArguments",e.tickArguments)("tickValues",e.ticks)("tickStroke",e.tickStroke)("scale",e.yScale)("orient",e.yOrient)("showGridLines",e.showGridLines)("gridLineWidth",e.dims.width)("referenceLines",e.referenceLines)("showRefLines",e.showRefLines)("showRefLabels",e.showRefLabels)("height",e.dims.height)("wrapTicks",e.wrapTicks)}}function Kv(i,t){if(1&i&&(o.qSk(),o.nrm(0,"g",3)),2&i){const e=o.XpG();o.Y8G("label",e.labelText)("offset",e.labelOffset)("orient",e.yOrient)("height",e.dims.height)("width",e.dims.width)}}const Jv=["ngx-charts-svg-linear-gradient",""];function Zv(i,t){if(1&i&&(o.qSk(),o.nrm(0,"stop")),2&i){const e=t.$implicit;o.xc7("stop-color",e.color)("stop-opacity",e.opacity),o.BMQ("offset",e.offset+"%")}}const Sy=["tooltipTemplate"],Gn=(i,t)=>[i,t],eb=["ngx-charts-heat-map-cell",""];function tb(i,t){if(1&i&&(o.qSk(),o.j41(0,"defs"),o.nrm(1,"g",3),o.k0s()),2&i){const e=o.XpG();o.R7$(),o.Y8G("orientation",e.barOrientation.Vertical)("name",e.gradientId)("stops",e.gradientStops)}}const ib=["ngx-charts-heat-map-cell-series",""],nb=(i,t,e)=>({series:i,name:t,value:e});function sb(i,t){if(1&i){const e=o.RV6();o.qSk(),o.j41(0,"g",1),o.bIt("select",function(){const s=o.eBV(e).$implicit,r=o.XpG();return o.Njj(r.onClick(s.cell))})("activate",function(){const s=o.eBV(e).$implicit,r=o.XpG();return o.Njj(r.activate.emit(s.cell))})("deactivate",function(){const s=o.eBV(e).$implicit,r=o.XpG();return o.Njj(r.deactivate.emit(s.cell))}),o.k0s()}if(2&i){const e=t.$implicit,n=o.XpG();o.Y8G("x",e.x)("y",e.y)("width",e.width)("height",e.height)("fill",e.fill)("data",e.data)("gradient",n.gradient)("animations",n.animations)("tooltipDisabled",n.tooltipDisabled)("tooltipPlacement",n.placementTypes.Top)("tooltipType",n.styleTypes.tooltip)("tooltipTitle",n.tooltipTemplate?void 0:n.tooltipText(e))("tooltipTemplate",n.tooltipTemplate)("tooltipContext",o.sMw(14,nb,e.series,e.label,e.data))}}function rb(i,t){if(1&i){const e=o.RV6();o.qSk(),o.j41(0,"g",6),o.bIt("dimensionsChanged",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.updateXAxisHeight(s))}),o.k0s()}if(2&i){const e=o.XpG();o.Y8G("xScale",e.xScale)("dims",e.dims)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)("wrapTicks",e.wrapTicks)}}function ob(i,t){if(1&i){const e=o.RV6();o.qSk(),o.j41(0,"g",7),o.bIt("dimensionsChanged",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.updateYAxisWidth(s))}),o.k0s()}if(2&i){const e=o.XpG();o.Y8G("yScale",e.yScale)("dims",e.dims)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)("wrapTicks",e.wrapTicks)}}function ab(i,t){if(1&i&&(o.qSk(),o.nrm(0,"rect")),2&i){const e=t.$implicit;o.BMQ("x",e.x)("y",e.y)("rx",e.rx)("width",e.width)("height",e.height)("fill",e.fill)}}function wb(i,t,e){e=e||{};let n,s,r,a=null,l=0;function c(){l=!1===e.leading?0:+new Date,a=null,r=i.apply(n,s)}return function(){const h=+new Date;!l&&!1===e.leading&&(l=h);const d=t-(h-l);return n=this,s=arguments,d<=0?(clearTimeout(a),a=null,l=h,r=i.apply(n,s)):!a&&!1!==e.trailing&&(a=setTimeout(c,d)),r}}function Sb(i,t){return function(n,s,r){return{configurable:!0,enumerable:r.enumerable,get:function(){return Object.defineProperty(this,s,{configurable:!0,enumerable:r.enumerable,value:wb(r.value,i,t)}),this[s]}}}}var H=function(i){return i.Top="top",i.Bottom="bottom",i.Left="left",i.Right="right",i.Center="center",i}(H||{});function _h(i,t,e){return e===H.Top?i.top-7:e===H.Bottom?i.top+i.height-t.height+7:e===H.Center?i.top+i.height/2-t.height/2:void 0}function xh(i,t,e){return e===H.Left?i.left-7:e===H.Right?i.left+i.width-t.width+7:e===H.Center?i.left+i.width/2-t.width/2:void 0}class Ke{static calculateVerticalAlignment(t,e,n){let s=_h(t,e,n);return s+e.height>window.innerHeight&&(s=window.innerHeight-e.height),s}static calculateVerticalCaret(t,e,n,s){let r;s===H.Top&&(r=t.height/2-n.height/2+7),s===H.Bottom&&(r=e.height-t.height/2-n.height/2-7),s===H.Center&&(r=e.height/2-n.height/2);const a=_h(t,e,s);return a+e.height>window.innerHeight&&(r+=a+e.height-window.innerHeight),r}static calculateHorizontalAlignment(t,e,n){let s=xh(t,e,n);return s+e.width>window.innerWidth&&(s=window.innerWidth-e.width),s}static calculateHorizontalCaret(t,e,n,s){let r;s===H.Left&&(r=t.width/2-n.width/2+7),s===H.Right&&(r=e.width-t.width/2-n.width/2-7),s===H.Center&&(r=e.width/2-n.width/2);const a=xh(t,e,s);return a+e.width>window.innerWidth&&(r+=a+e.width-window.innerWidth),r}static shouldFlip(t,e,n,s){let r=!1;return n===H.Right&&t.left+t.width+e.width+s>window.innerWidth&&(r=!0),n===H.Left&&t.left-e.width-s<0&&(r=!0),n===H.Top&&t.top-e.height-s<0&&(r=!0),n===H.Bottom&&t.top+t.height+e.height+s>window.innerHeight&&(r=!0),r}static positionCaret(t,e,n,s,r){let a=0,l=0;return t===H.Right?(l=-7,a=Ke.calculateVerticalCaret(n,e,s,r)):t===H.Left?(l=e.width,a=Ke.calculateVerticalCaret(n,e,s,r)):t===H.Top?(a=e.height,l=Ke.calculateHorizontalCaret(n,e,s,r)):t===H.Bottom&&(a=-7,l=Ke.calculateHorizontalCaret(n,e,s,r)),{top:a,left:l}}static positionContent(t,e,n,s,r){let a=0,l=0;return t===H.Right?(l=n.left+n.width+s,a=Ke.calculateVerticalAlignment(n,e,r)):t===H.Left?(l=n.left-e.width-s,a=Ke.calculateVerticalAlignment(n,e,r)):t===H.Top?(a=n.top-e.height-s,l=Ke.calculateHorizontalAlignment(n,e,r)):t===H.Bottom&&(a=n.top+n.height+s,l=Ke.calculateHorizontalAlignment(n,e,r)),{top:a,left:l}}static determinePlacement(t,e,n,s){if(Ke.shouldFlip(n,e,t,s)){if(t===H.Right)return H.Left;if(t===H.Left)return H.Right;if(t===H.Top)return H.Bottom;if(t===H.Bottom)return H.Top}return t}}let Ab=(()=>{class i{constructor(e,n,s){this.element=e,this.renderer=n,this.platformId=s}get cssClasses(){let e="ngx-charts-tooltip-content";return e+=` position-${this.placement}`,e+=` type-${this.type}`,e+=` ${this.cssClass}`,e}ngAfterViewInit(){setTimeout(this.position.bind(this))}position(){if(!(0,b.UE)(this.platformId))return;const e=this.element.nativeElement,n=this.host.nativeElement.getBoundingClientRect();if(!n.height&&!n.width)return;const s=e.getBoundingClientRect();this.checkFlip(n,s),this.positionContent(e,n,s),this.showCaret&&this.positionCaret(n,s),setTimeout(()=>this.renderer.addClass(e,"animate"),1)}positionContent(e,n,s){const{top:r,left:a}=Ke.positionContent(this.placement,s,n,this.spacing,this.alignment);this.renderer.setStyle(e,"top",`${r}px`),this.renderer.setStyle(e,"left",`${a}px`)}positionCaret(e,n){const s=this.caretElm.nativeElement,r=s.getBoundingClientRect(),{top:a,left:l}=Ke.positionCaret(this.placement,n,e,r,this.alignment);this.renderer.setStyle(s,"top",`${a}px`),this.renderer.setStyle(s,"left",`${l}px`)}checkFlip(e,n){this.placement=Ke.determinePlacement(this.placement,n,e,this.spacing)}onWindowResize(){this.position()}}return i.\u0275fac=function(e){return new(e||i)(o.rXU(o.aKT),o.rXU(o.sFG),o.rXU(o.Agw))},i.\u0275cmp=o.VBU({type:i,selectors:[["ngx-tooltip-content"]],viewQuery:function(e,n){if(1&e&&o.GBs(cv,5),2&e){let s;o.mGM(s=o.lsd())&&(n.caretElm=s.first)}},hostVars:2,hostBindings:function(e,n){1&e&&o.bIt("resize",function(){return n.onWindowResize()},!1,o.tSv),2&e&&o.HbH(n.cssClasses)},inputs:{host:"host",showCaret:"showCaret",type:"type",placement:"placement",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},decls:6,vars:6,consts:[["caretElm",""],[3,"hidden"],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(e,n){1&e&&(o.j41(0,"div"),o.nrm(1,"span",1,0),o.j41(3,"div",2),o.DNE(4,uv,2,4,"span",3)(5,pv,1,1,"span",4),o.k0s()()),2&e&&(o.R7$(),o.ZvI("tooltip-caret position-",n.placement,""),o.Y8G("hidden",!n.showCaret),o.R7$(3),o.Y8G("ngIf",!n.title),o.R7$(),o.Y8G("ngIf",n.title))},dependencies:[b.bT,b.T3],styles:[".ngx-charts-tooltip-content{position:fixed;border-radius:3px;z-index:5000;display:block;font-weight:400;opacity:0;pointer-events:none!important}.ngx-charts-tooltip-content.type-popover{background:#fff;color:#060709;border:1px solid #72809b;box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff}.ngx-charts-tooltip-content.type-tooltip{color:#fff;background:rgba(0,0,0,.75);font-size:12px;padding:0 10px;text-align:center;pointer-events:auto}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content .tooltip-label{display:block;line-height:1em;padding:8px 5px 5px;font-size:1em}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.position-right{transform:translate(10px)}.ngx-charts-tooltip-content.position-left{transform:translate(-10px)}.ngx-charts-tooltip-content.position-top{transform:translateY(-10px)}.ngx-charts-tooltip-content.position-bottom{transform:translateY(10px)}.ngx-charts-tooltip-content.animate{opacity:1;transition:opacity .3s,transform .3s;transform:translate(0);pointer-events:auto}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{text-align:left;line-height:1.2em;padding:5px 0}.tooltip-item .tooltip-item-color{display:inline-block;height:12px;width:12px;margin-right:5px;color:#5b646b;border-radius:3px}\n"],encapsulation:2}),(0,xe.Cg)([Sb(100)],i.prototype,"onWindowResize",null),i})();class Db{constructor(t){this.injectionService=t,this.defaults={},this.components=new Map}getByType(t=this.type){return this.components.get(t)}create(t){return this.createByType(this.type,t)}createByType(t,e){e=this.assignDefaults(e);const n=this.injectComponent(t,e);return this.register(t,n),n}destroy(t){const e=this.components.get(t.componentType);if(e&&e.length){const n=e.indexOf(t);n>-1&&(e[n].destroy(),e.splice(n,1))}}destroyAll(){this.destroyByType(this.type)}destroyByType(t){const e=this.components.get(t);if(e&&e.length){let n=e.length-1;for(;n>=0;)this.destroy(e[n--])}}injectComponent(t,e){return this.injectionService.appendComponent(t,e)}assignDefaults(t){const e={...this.defaults.inputs},n={...this.defaults.outputs};return!t.inputs&&!t.outputs&&(t={inputs:t}),e&&(t.inputs={...e,...t.inputs}),n&&(t.outputs={...n,...t.outputs}),t}register(t,e){this.components.has(t)||this.components.set(t,[]),this.components.get(t).push(e)}}let vh=(()=>{class i{constructor(e,n,s){this.applicationRef=e,this.componentFactoryResolver=n,this.injector=s}static setGlobalRootViewContainer(e){i.globalRootViewContainer=e}getRootViewContainer(){if(this._container)return this._container;if(i.globalRootViewContainer)return i.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}setRootViewContainer(e){this._container=e}getComponentRootNode(e){return function Mb(i){return i.element}(e)?e.element.nativeElement:e.hostView&&e.hostView.rootNodes.length>0?e.hostView.rootNodes[0]:e.location.nativeElement}getRootViewContainerNode(e){return this.getComponentRootNode(e)}projectComponentBindings(e,n){if(n){if(void 0!==n.inputs){const s=Object.getOwnPropertyNames(n.inputs);for(const r of s)e.instance[r]=n.inputs[r]}if(void 0!==n.outputs){const s=Object.getOwnPropertyNames(n.outputs);for(const r of s)e.instance[r]=n.outputs[r]}}return e}appendComponent(e,n={},s){s||(s=this.getRootViewContainer());const r=this.getComponentRootNode(s),a=new Ue(r,this.componentFactoryResolver,this.applicationRef,this.injector),l=new F(e),c=a.attach(l);return this.projectComponentBindings(c,n),c}}return i.globalRootViewContainer=null,i.\u0275fac=function(e){return new(e||i)(o.KVO(o.o8S),o.KVO(o.OM3),o.KVO(o.zZn))},i.\u0275prov=o.jDH({token:i,factory:i.\u0275fac}),i})(),Wo=(()=>{class i extends Db{constructor(e){super(e),this.type=Ab}}return i.\u0275fac=function(e){return new(e||i)(o.KVO(vh))},i.\u0275prov=o.jDH({token:i,factory:i.\u0275fac}),i})();var bi=function(i){return i.Right="right",i.Below="below",i}(bi||{}),Xn=function(i){return i.ScaleLegend="scaleLegend",i.Legend="legend",i}(Xn||{}),O=function(i){return i.Time="time",i.Linear="linear",i.Ordinal="ordinal",i.Quantile="quantile",i}(O||{});let yh=(()=>{class i{constructor(){this.horizontal=!1}ngOnChanges(e){const n=this.gradientString(this.colors.range(),this.colors.domain());this.gradient=`linear-gradient(to ${this.horizontal?"right":"bottom"}, ${n})`}gradientString(e,n){n.push(1);const s=[];return e.reverse().forEach((r,a)=>{s.push(`${r} ${Math.round(100*n[a])}%`)}),s.join(", ")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=o.VBU({type:i,selectors:[["ngx-charts-scale-legend"]],inputs:{valueRange:"valueRange",colors:"colors",height:"height",width:"width",horizontal:"horizontal"},features:[o.OA$],decls:8,vars:10,consts:[[1,"scale-legend"],[1,"scale-legend-label"],[1,"scale-legend-wrap"]],template:function(e,n){1&e&&(o.j41(0,"div",0)(1,"div",1)(2,"span"),o.EFF(3),o.k0s()(),o.nrm(4,"div",2),o.j41(5,"div",1)(6,"span"),o.EFF(7),o.k0s()()()),2&e&&(o.xc7("height",n.horizontal?void 0:n.height,"px")("width",n.width,"px"),o.AVh("horizontal-legend",n.horizontal),o.R7$(3),o.JRh(n.valueRange[1].toLocaleString()),o.R7$(),o.xc7("background",n.gradient),o.R7$(3),o.JRh(n.valueRange[0].toLocaleString()))},styles:[".chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .scale-legend{text-align:center;display:flex;flex-direction:column}.chart-legend .scale-legend-wrap{display:inline-block;flex:1;width:30px;border-radius:5px;margin:0 auto}.chart-legend .scale-legend-label{font-size:12px}.chart-legend .horizontal-legend.scale-legend{flex-direction:row}.chart-legend .horizontal-legend .scale-legend-wrap{width:auto;height:30px;margin:0 16px}\n"],encapsulation:2,changeDetection:0}),i})();function Js(i){return i instanceof Date?i.toLocaleDateString():i.toLocaleString()}function Zs(i){return i.toLocaleString().replace(/[&'`"<>]/g,t=>({"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"}[t]))}let bh=(()=>{class i{constructor(){this.isActive=!1,this.select=new o.bkB,this.activate=new o.bkB,this.deactivate=new o.bkB,this.toggle=new o.bkB}get trimmedLabel(){return this.formattedLabel||"(empty)"}onMouseEnter(){this.activate.emit({name:this.label})}onMouseLeave(){this.deactivate.emit({name:this.label})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=o.VBU({type:i,selectors:[["ngx-charts-legend-entry"]],hostBindings:function(e,n){1&e&&o.bIt("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()})},inputs:{color:"color",label:"label",formattedLabel:"formattedLabel",isActive:"isActive"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",toggle:"toggle"},decls:4,vars:6,consts:[["tabindex","-1",3,"click","title"],[1,"legend-label-color",3,"click"],[1,"legend-label-text"]],template:function(e,n){1&e&&(o.j41(0,"span",0),o.bIt("click",function(){return n.select.emit(n.formattedLabel)}),o.j41(1,"span",1),o.bIt("click",function(){return n.toggle.emit(n.formattedLabel)}),o.k0s(),o.j41(2,"span",2),o.EFF(3),o.k0s()()),2&e&&(o.AVh("active",n.isActive),o.Y8G("title",n.formattedLabel),o.R7$(),o.xc7("background-color",n.color),o.R7$(2),o.SpI(" ",n.trimmedLabel," "))},encapsulation:2,changeDetection:0}),i})(),Ch=(()=>{class i{constructor(e){this.cd=e,this.horizontal=!1,this.labelClick=new o.bkB,this.labelActivate=new o.bkB,this.labelDeactivate=new o.bkB,this.legendEntries=[]}ngOnChanges(e){this.update()}update(){this.cd.markForCheck(),this.legendEntries=this.getLegendEntries()}getLegendEntries(){const e=[];for(const n of this.data){const s=Js(n);-1===e.findIndex(a=>a.label===s)&&e.push({label:n,formattedLabel:s,color:this.colors.getColor(n)})}return e}isActive(e){return!!this.activeEntries&&void 0!==this.activeEntries.find(s=>e.label===s.name)}activate(e){this.labelActivate.emit(e)}deactivate(e){this.labelDeactivate.emit(e)}trackBy(e,n){return n.label}}return i.\u0275fac=function(e){return new(e||i)(o.rXU(o.gRc))},i.\u0275cmp=o.VBU({type:i,selectors:[["ngx-charts-legend"]],inputs:{data:"data",title:"title",colors:"colors",height:"height",width:"width",activeEntries:"activeEntries",horizontal:"horizontal"},outputs:{labelClick:"labelClick",labelActivate:"labelActivate",labelDeactivate:"labelDeactivate"},features:[o.OA$],decls:5,vars:9,consts:[["class","legend-title",4,"ngIf"],[1,"legend-wrap"],[1,"legend-labels"],["class","legend-label",4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend-title"],[1,"legend-title-text"],[1,"legend-label"],[3,"select","activate","deactivate","label","formattedLabel","color","isActive"]],template:function(e,n){1&e&&(o.j41(0,"div"),o.DNE(1,mv,3,1,"header",0),o.j41(2,"div",1)(3,"ul",2),o.DNE(4,gv,2,4,"li",3),o.k0s()()()),2&e&&(o.xc7("width",n.width,"px"),o.R7$(),o.Y8G("ngIf",(null==n.title?null:n.title.length)>0),o.R7$(2),o.xc7("max-height",n.height-45,"px"),o.AVh("horizontal-legend",n.horizontal),o.R7$(),o.Y8G("ngForOf",n.legendEntries)("ngForTrackBy",n.trackBy))},dependencies:[bh,b.bT,b.Sq],styles:[".chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .legend-title{white-space:nowrap;overflow:hidden;margin-left:10px;margin-bottom:5px;font-size:14px;font-weight:700}.chart-legend ul,.chart-legend li{padding:0;margin:0;list-style:none}.chart-legend .horizontal-legend li{display:inline-block}.chart-legend .legend-wrap{width:calc(100% - 10px)}.chart-legend .legend-labels{line-height:85%;list-style:none;text-align:left;float:left;width:100%;border-radius:3px;overflow-y:auto;overflow-x:hidden;white-space:nowrap;background:rgba(0,0,0,.05)}.chart-legend .legend-label{cursor:pointer;font-size:90%;margin:8px;color:#afb7c8}.chart-legend .legend-label:hover{color:#000;transition:.2s}.chart-legend .legend-label .active .legend-label-text{color:#000}.chart-legend .legend-label-color{display:inline-block;height:15px;width:15px;margin-right:5px;color:#5b646b;border-radius:3px}.chart-legend .legend-label-text{display:inline-block;vertical-align:top;line-height:15px;font-size:12px;width:calc(100% - 20px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chart-legend .legend-title-text{vertical-align:bottom;display:inline-block;line-height:16px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),i})(),Th=(()=>{class i{constructor(){this.showLegend=!1,this.animations=!0,this.legendLabelClick=new o.bkB,this.legendLabelActivate=new o.bkB,this.legendLabelDeactivate=new o.bkB,this.LegendPosition=bi,this.LegendType=Xn}ngOnChanges(e){this.update()}update(){let e=0;this.showLegend&&(this.legendType=this.getLegendType(),(!this.legendOptions||this.legendOptions.position===bi.Right)&&(e=this.legendType===Xn.ScaleLegend?1:2)),this.chartWidth=Math.floor(this.view[0]*(12-e)/12),this.legendWidth=this.legendOptions&&this.legendOptions.position!==bi.Right?this.chartWidth:Math.floor(this.view[0]*e/12)}getLegendType(){return this.legendOptions.scaleType===O.Linear?Xn.ScaleLegend:Xn.Legend}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=o.VBU({type:i,selectors:[["ngx-charts-chart"]],inputs:{view:"view",showLegend:"showLegend",legendOptions:"legendOptions",legendType:"legendType",activeEntries:"activeEntries",animations:"animations"},outputs:{legendLabelClick:"legendLabelClick",legendLabelActivate:"legendLabelActivate",legendLabelDeactivate:"legendLabelDeactivate"},features:[o.Jv_([Wo]),o.OA$],ngContentSelectors:gh,decls:5,vars:8,consts:[[1,"ngx-charts-outer"],[1,"ngx-charts"],["class","chart-legend",3,"horizontal","valueRange","colors","height","width",4,"ngIf"],["class","chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate",4,"ngIf"],[1,"chart-legend",3,"horizontal","valueRange","colors","height","width"],[1,"chart-legend",3,"labelClick","labelActivate","labelDeactivate","horizontal","data","title","colors","height","width","activeEntries"]],template:function(e,n){1&e&&(o.NAR(),o.j41(0,"div",0),o.qSk(),o.j41(1,"svg",1),o.SdG(2),o.k0s(),o.DNE(3,fv,1,5,"ngx-charts-scale-legend",2)(4,_v,1,7,"ngx-charts-legend",3),o.k0s()),2&e&&(o.xc7("width",n.view[0],"px")("height",n.view[1],"px"),o.R7$(),o.BMQ("width",n.chartWidth)("height",n.view[1]),o.R7$(2),o.Y8G("ngIf",n.showLegend&&n.legendType===n.LegendType.ScaleLegend),o.R7$(),o.Y8G("ngIf",n.showLegend&&n.legendType===n.LegendType.Legend))},dependencies:[yh,Ch,b.bT],encapsulation:2,changeDetection:0}),i})(),Lb=(()=>{class i{constructor(e,n){this.element=e,this.zone=n,this.visible=new o.bkB,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const e=()=>{if(!this.element)return;const{offsetHeight:n,offsetWidth:s}=this.element.nativeElement;n&&s?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e())})}}return i.\u0275fac=function(e){return new(e||i)(o.rXU(o.aKT),o.rXU(o.SKi))},i.\u0275dir=o.FsC({type:i,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),i})();function kh(i){return"[object Date]"===toString.call(i)}let wh=(()=>{class i{constructor(e,n,s,r){this.chartElement=e,this.zone=n,this.cd=s,this.platformId=r,this.scheme="cool",this.schemeType=O.Ordinal,this.animations=!0,this.select=new o.bkB}ngOnInit(){(0,b.Vy)(this.platformId)&&(this.animations=!1)}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new Lb(this.chartElement,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this))}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy())}ngOnChanges(e){this.update()}update(){if(this.results=this.results?this.cloneData(this.results):[],this.view)this.width=this.view[0],this.height=this.view[1];else{const e=this.getContainerDims();e&&(this.width=e.width,this.height=e.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let e,n;const s=this.chartElement.nativeElement;if((0,b.UE)(this.platformId)&&null!==s.parentNode){const r=s.parentNode.getBoundingClientRect();e=r.width,n=r.height}return e&&n?{width:e,height:n}:null}formatDates(){for(let e=0;e<this.results.length;e++){const n=this.results[e];if(n.label=n.name,kh(n.label)&&(n.label=n.label.toLocaleDateString()),n.series)for(let s=0;s<n.series.length;s++){const r=n.series[s];r.label=r.name,kh(r.label)&&(r.label=r.label.toLocaleDateString())}}}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){if(!(0,b.UE)(this.platformId))return;const n=(0,Hi.R)(window,"resize").pipe((0,Ts.B)(200)).subscribe(s=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=n}cloneData(e){const n=[];for(const s of e){const r={};if(void 0!==s.name&&(r.name=s.name),void 0!==s.value&&(r.value=s.value),void 0!==s.series){r.series=[];for(const a of s.series){const l=Object.assign({},a);r.series.push(l)}}void 0!==s.extra&&(r.extra=JSON.parse(JSON.stringify(s.extra))),void 0!==s.source&&(r.source=s.source),void 0!==s.target&&(r.target=s.target),n.push(r)}return n}}return i.\u0275fac=function(e){return new(e||i)(o.rXU(o.aKT),o.rXU(o.SKi),o.rXU(o.gRc),o.rXU(o.Agw))},i.\u0275cmp=o.VBU({type:i,selectors:[["base-chart"]],inputs:{results:"results",view:"view",scheme:"scheme",schemeType:"schemeType",customColors:"customColors",animations:"animations"},outputs:{select:"select"},features:[o.OA$],decls:1,vars:0,template:function(e,n){1&e&&o.nrm(0,"div")},encapsulation:2}),i})();var ke=function(i){return i.Top="top",i.Bottom="bottom",i.Left="left",i.Right="right",i}(ke||{});let Sh=(()=>{class i{constructor(e){this.textHeight=25,this.margin=5,this.element=e.nativeElement}ngOnChanges(e){this.update()}update(){switch(this.strokeWidth="0.01",this.textAnchor="middle",this.transform="",this.orient){case ke.Top:case ke.Bottom:this.y=this.offset,this.x=this.width/2;break;case ke.Left:this.y=-(this.offset+this.textHeight+this.margin),this.x=-this.height/2,this.transform="rotate(270)";break;case ke.Right:this.y=this.offset+this.margin,this.x=-this.height/2,this.transform="rotate(270)"}}}return i.\u0275fac=function(e){return new(e||i)(o.rXU(o.aKT))},i.\u0275cmp=o.VBU({type:i,selectors:[["g","ngx-charts-axis-label",""]],inputs:{orient:"orient",label:"label",offset:"offset",width:"width",height:"height"},features:[o.OA$],attrs:xv,decls:2,vars:6,template:function(e,n){1&e&&(o.qSk(),o.j41(0,"text"),o.EFF(1),o.k0s()),2&e&&(o.BMQ("stroke-width",n.strokeWidth)("x",n.x)("y",n.y)("text-anchor",n.textAnchor)("transform",n.transform),o.R7$(),o.SpI(" ",n.label," "))},encapsulation:2,changeDetection:0}),i})();function jo(i,t=16){return"string"!=typeof i?"number"==typeof i?i+"":"":(i=i.trim()).length<=t?i:`${i.slice(0,t)}...`}function Ah(i,t){if(i.length>t){const e=[],n=Math.floor(i.length/t);for(let s=0;s<i.length;s++)s%n==0&&e.push(i[s]);i=e}return i}function Dh(i,t,e){const n=(i||"").toString();let s=[];if(/\s/.test(n))s=n.split(/\s+/).reduce((r,a)=>{const l=(r.pop()||"")+" ";return l.length+a.length>t?[...r,l.trim(),a.trim()]:[...r,l+a]},[]);else{let r=0;for(;r<n.length;)s.push(n.substring(r,r+t)),r+=t}return s.length>e&&(s=s.splice(0,e),s[s.length-1]+="..."),s}var Pt=function(i){return i.Start="start",i.Middle="middle",i.End="end",i}(Pt||{});let Mh=(()=>{class i{constructor(e){this.platformId=e,this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.rotateTicks=!0,this.wrapTicks=!1,this.dimensionsChanged=new o.bkB,this.verticalSpacing=20,this.rotateLabels=!1,this.innerTickSize=6,this.outerTickSize=6,this.tickPadding=3,this.textAnchor=Pt.Middle,this.maxTicksLength=0,this.maxAllowedLength=16,this.height=0,this.approxHeight=10,this.maxPossibleLengthForTickIfWrapped=16}get isWrapTicksSupported(){return this.wrapTicks&&this.scale.step}ngOnChanges(e){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){if(!(0,b.UE)(this.platformId))return void this.dimensionsChanged.emit({height:this.approxHeight});const e=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().height,10);e!==this.height&&(this.height=e,this.dimensionsChanged.emit({height:this.height}),setTimeout(()=>this.updateDims()))}update(){const e=this.scale;this.ticks=this.getTicks(),this.tickFormat=this.tickFormatting?this.tickFormatting:e.tickFormat?e.tickFormat.apply(e,this.tickArguments):function(s){return"Date"===s.constructor.name?s.toLocaleDateString():s.toLocaleString()};const n=this.rotateTicks?this.getRotationAngle(this.ticks):null;this.adjustedScale=this.scale.bandwidth?function(s){return this.scale(s)+.5*this.scale.bandwidth()}:this.scale,this.textTransform="",n&&0!==n?(this.textTransform=`rotate(${n})`,this.textAnchor=Pt.End,this.verticalSpacing=10):this.textAnchor=Pt.Middle,setTimeout(()=>this.updateDims())}getRotationAngle(e){let n=0;this.maxTicksLength=0;for(let u=0;u<e.length;u++){const p=this.tickFormat(e[u]).toString();let m=p.length;this.trimTicks&&(m=this.tickTrim(p).length),m>this.maxTicksLength&&(this.maxTicksLength=m)}const a=7*Math.min(this.maxTicksLength,this.maxAllowedLength);let l=a;const c=Math.floor(this.width/e.length);for(;l>c&&n>-90;)n-=30,l=Math.cos(n*(Math.PI/180))*a;let h=14;if(this.isWrapTicksSupported){const u=this.ticks.reduce((m,g)=>g.length>m.length?g:m,"");h=14*(this.tickChunks(u).length||1),this.maxPossibleLengthForTickIfWrapped=this.getMaxPossibleLengthForTick(u)}const d=0!==n?Math.max(Math.abs(Math.sin(n*Math.PI/180))*this.maxTickLength*7,10):h;return this.approxHeight=Math.min(d,200),n}getTicks(){let e;const n=this.getMaxTicks(20),s=this.getMaxTicks(100);return this.tickValues?e=this.tickValues:this.scale.ticks?e=this.scale.ticks.apply(this.scale,[s]):(e=this.scale.domain(),e=Ah(e,n)),e}getMaxTicks(e){return Math.floor(this.width/e)}tickTransform(e){return"translate("+this.adjustedScale(e)+","+this.verticalSpacing+")"}gridLineTransform(){return`translate(0,${-this.verticalSpacing-5})`}tickTrim(e){return this.trimTicks?jo(e,this.maxTickLength):e}getMaxPossibleLengthForTick(e){if(this.scale.bandwidth){const s=Math.floor(this.scale.bandwidth()/7),r=e.slice(0,s);return Math.max(r.length,this.maxTickLength)}return this.maxTickLength}tickChunks(e){if(e.toString().length>this.maxTickLength&&this.scale.bandwidth){let s=this.rotateTicks?Math.floor(this.scale.step()/14):5;if(s<=1)return[this.tickTrim(e)];let r=Math.max(this.maxPossibleLengthForTickIfWrapped,this.maxTickLength);return(0,b.UE)(this.platformId)||(r=Math.floor(Math.min(this.approxHeight/5,Math.max(this.maxPossibleLengthForTickIfWrapped,this.maxTickLength)))),s=Math.min(s,5),Dh(e,r,s<1?1:s)}return[this.tickTrim(e)]}}return i.\u0275fac=function(e){return new(e||i)(o.rXU(o.Agw))},i.\u0275cmp=o.VBU({type:i,selectors:[["g","ngx-charts-x-axis-ticks",""]],viewQuery:function(e,n){if(1&e&&o.GBs(fh,5),2&e){let s;o.mGM(s=o.lsd())&&(n.ticksElement=s.first)}},inputs:{scale:"scale",orient:"orient",tickArguments:"tickArguments",tickValues:"tickValues",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",gridLineHeight:"gridLineHeight",width:"width",rotateTicks:"rotateTicks",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[o.OA$],attrs:vv,decls:4,vars:2,consts:[["ticksel",""],["tmplMultilineTick",""],["tmplSinglelineTick",""],["class","tick",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"tick"],[4,"ngIf"],["stroke-width","0.01","font-size","12px"],[4,"ngIf","ngIfThen","ngIfElse"],["x","0",4,"ngFor","ngForOf"],["x","0"],["y2","0",1,"gridline-path","gridline-path-vertical"]],template:function(e,n){1&e&&(o.qSk(),o.j41(0,"g",null,0),o.DNE(2,Sv,2,2,"g",3),o.k0s(),o.DNE(3,Dv,2,2,"g",4)),2&e&&(o.R7$(2),o.Y8G("ngForOf",n.ticks),o.R7$(),o.Y8G("ngForOf",n.ticks))},dependencies:[b.Sq,b.bT],encapsulation:2,changeDetection:0}),i})(),Eb=(()=>{class i{constructor(){this.rotateTicks=!0,this.showGridLines=!1,this.xOrient=ke.Bottom,this.xAxisOffset=0,this.wrapTicks=!1,this.dimensionsChanged=new o.bkB,this.xAxisClassName="x axis",this.labelOffset=0,this.fill="none",this.stroke="stroke",this.tickStroke="#ccc",this.strokeWidth="none",this.padding=5,this.orientation=ke}ngOnChanges(e){this.update()}update(){this.transform=`translate(0,${this.xAxisOffset+this.padding+this.dims.height})`,typeof this.xAxisTickCount<"u"&&(this.tickArguments=[this.xAxisTickCount])}emitTicksHeight({height:e}){const n=e+25+5;n!==this.labelOffset&&(this.labelOffset=n,setTimeout(()=>{this.dimensionsChanged.emit({height:e})},0))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=o.VBU({type:i,selectors:[["g","ngx-charts-x-axis",""]],viewQuery:function(e,n){if(1&e&&o.GBs(Mh,5),2&e){let s;o.mGM(s=o.lsd())&&(n.ticksComponent=s.first)}},inputs:{xScale:"xScale",dims:"dims",trimTicks:"trimTicks",rotateTicks:"rotateTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",showLabel:"showLabel",labelText:"labelText",ticks:"ticks",xAxisTickCount:"xAxisTickCount",xOrient:"xOrient",xAxisOffset:"xAxisOffset",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[o.OA$],attrs:Mv,decls:3,vars:4,consts:[["ngx-charts-x-axis-ticks","",3,"trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-x-axis-ticks","",3,"dimensionsChanged","trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","wrapTicks"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(e,n){1&e&&(o.qSk(),o.j41(0,"g"),o.DNE(1,Lv,1,13,"g",0)(2,Ev,1,5,"g",1),o.k0s()),2&e&&(o.BMQ("class",n.xAxisClassName)("transform",n.transform),o.R7$(),o.Y8G("ngIf",n.xScale),o.R7$(),o.Y8G("ngIf",n.showLabel))},dependencies:[Mh,Sh,b.bT],encapsulation:2,changeDetection:0}),i})(),Lh=(()=>{class i{constructor(e){this.platformId=e,this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.showRefLabels=!1,this.showRefLines=!1,this.wrapTicks=!1,this.dimensionsChanged=new o.bkB,this.innerTickSize=6,this.tickPadding=3,this.verticalSpacing=20,this.textAnchor=Pt.Middle,this.width=0,this.outerTickSize=6,this.rotateLabels=!1,this.referenceLineLength=0,this.Orientation=ke}ngOnChanges(e){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){if(!(0,b.UE)(this.platformId))return this.width=this.getApproximateAxisWidth(),void this.dimensionsChanged.emit({width:this.width});const e=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().width,10);e!==this.width&&(this.width=e,this.dimensionsChanged.emit({width:e}),setTimeout(()=>this.updateDims()))}update(){const e=this.scale,n=this.orient===ke.Top||this.orient===ke.Right?-1:1;switch(this.tickSpacing=Math.max(this.innerTickSize,0)+this.tickPadding,this.ticks=this.getTicks(),this.tickFormat=this.tickFormatting?this.tickFormatting:e.tickFormat?e.tickFormat.apply(e,this.tickArguments):function(s){return"Date"===s.constructor.name?s.toLocaleDateString():s.toLocaleString()},this.adjustedScale=e.bandwidth?s=>{const r=e(s)+.5*e.bandwidth();if(this.wrapTicks&&s.toString().length>this.maxTickLength){const a=this.tickChunks(s).length;if(1===a)return r;const h=.5*e.bandwidth()-8*a*.5;return e(s)+h}return r}:e,this.showRefLines&&this.referenceLines&&this.setReferencelines(),this.orient){case ke.Top:case ke.Bottom:this.transform=function(s){return"translate("+this.adjustedScale(s)+",0)"},this.textAnchor=Pt.Middle,this.y2=this.innerTickSize*n,this.y1=this.tickSpacing*n,this.dy=n<0?"0em":".71em";break;case ke.Left:this.transform=function(s){return"translate(0,"+this.adjustedScale(s)+")"},this.textAnchor=Pt.End,this.x2=this.innerTickSize*-n,this.x1=this.tickSpacing*-n,this.dy=".32em";break;case ke.Right:this.transform=function(s){return"translate(0,"+this.adjustedScale(s)+")"},this.textAnchor=Pt.Start,this.x2=this.innerTickSize*-n,this.x1=this.tickSpacing*-n,this.dy=".32em"}setTimeout(()=>this.updateDims())}setReferencelines(){this.refMin=this.adjustedScale(Math.min.apply(null,this.referenceLines.map(e=>e.value))),this.refMax=this.adjustedScale(Math.max.apply(null,this.referenceLines.map(e=>e.value))),this.referenceLineLength=this.referenceLines.length,this.referenceAreaPath=function Fb(i,t,e,n,s,[r,a,l,c]){let h="";return h=`M${[i+s,t]}`,h+="h"+((e=0===(e=Math.floor(e))?1:e)-2*s),h+=a?`a${[s,s]} 0 0 1 ${[s,s]}`:`h${s}v${s}`,h+="v"+((n=0===(n=Math.floor(n))?1:n)-2*s),h+=c?`a${[s,s]} 0 0 1 ${[-s,s]}`:`v${s}h${-s}`,h+="h"+(2*s-e),h+=l?`a${[s,s]} 0 0 1 ${[-s,-s]}`:`h${-s}v${-s}`,h+="v"+(2*s-n),h+=r?`a${[s,s]} 0 0 1 ${[s,-s]}`:`v${-s}h${s}`,h+="z",h}(0,this.refMax,this.gridLineWidth,this.refMin-this.refMax,0,[!1,!1,!1,!1])}getTicks(){let e;const n=this.getMaxTicks(20),s=this.getMaxTicks(50);return this.tickValues?e=this.tickValues:this.scale.ticks?e=this.scale.ticks.apply(this.scale,[s]):(e=this.scale.domain(),e=Ah(e,n)),e}getMaxTicks(e){return Math.floor(this.height/e)}tickTransform(e){return`translate(${this.adjustedScale(e)},${this.verticalSpacing})`}gridLineTransform(){return"translate(5,0)"}tickTrim(e){return this.trimTicks?jo(e,this.maxTickLength):e}getApproximateAxisWidth(){return 7*Math.max(...this.ticks.map(s=>this.tickTrim(this.tickFormat(s)).length))}tickChunks(e){if(e.toString().length>this.maxTickLength&&this.scale.bandwidth){const n=this.maxTickLength,s=Math.floor(this.scale.bandwidth()/15);return s<=1?[this.tickTrim(e)]:Dh(e,n,Math.min(s,5))}return[this.tickFormat(e)]}}return i.\u0275fac=function(e){return new(e||i)(o.rXU(o.Agw))},i.\u0275cmp=o.VBU({type:i,selectors:[["g","ngx-charts-y-axis-ticks",""]],viewQuery:function(e,n){if(1&e&&o.GBs(fh,5),2&e){let s;o.mGM(s=o.lsd())&&(n.ticksElement=s.first)}},inputs:{scale:"scale",orient:"orient",tickArguments:"tickArguments",tickValues:"tickValues",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",gridLineWidth:"gridLineWidth",height:"height",referenceLines:"referenceLines",showRefLabels:"showRefLabels",showRefLines:"showRefLines",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[o.OA$],attrs:Fv,decls:6,vars:4,consts:[["ticksel",""],["tmplMultilineTick",""],["tmplSinglelineTick",""],["class","tick",4,"ngFor","ngForOf"],["class","reference-area",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"tick"],[4,"ngIf"],["stroke-width","0.01"],[4,"ngIf","ngIfThen","ngIfElse"],[4,"ngIf","ngIfElse"],["x","0",4,"ngFor","ngForOf"],["x","0"],[1,"reference-area"],["class","gridline-path gridline-path-horizontal","x1","0",4,"ngIf"],["x1","0",1,"gridline-path","gridline-path-horizontal"],["x1","0",1,"refline-path","gridline-path-horizontal"],[1,"refline-label"]],template:function(e,n){1&e&&(o.qSk(),o.j41(0,"g",null,0),o.DNE(2,zv,2,2,"g",3),o.k0s(),o.DNE(3,Hv,1,2,"path",4)(4,Yv,2,2,"g",5)(5,Uv,2,1,"g",5)),2&e&&(o.R7$(2),o.Y8G("ngForOf",n.ticks),o.R7$(),o.Y8G("ngIf",n.referenceLineLength>1&&n.refMax&&n.refMin&&n.showRefLines),o.R7$(),o.Y8G("ngForOf",n.ticks),o.R7$(),o.Y8G("ngForOf",n.referenceLines))},dependencies:[b.Sq,b.bT],encapsulation:2,changeDetection:0}),i})(),Ob=(()=>{class i{constructor(){this.showGridLines=!1,this.yOrient=ke.Left,this.yAxisOffset=0,this.wrapTicks=!1,this.dimensionsChanged=new o.bkB,this.yAxisClassName="y axis",this.labelOffset=15,this.fill="none",this.stroke="#CCC",this.tickStroke="#CCC",this.strokeWidth=1,this.padding=5}ngOnChanges(e){this.update()}update(){this.offset=-(this.yAxisOffset+this.padding),this.yOrient===ke.Right?(this.labelOffset=65,this.transform=`translate(${this.offset+this.dims.width} , 0)`):this.transform=`translate(${this.offset} , 0)`,void 0!==this.yAxisTickCount&&(this.tickArguments=[this.yAxisTickCount])}emitTicksWidth({width:e}){e!==this.labelOffset&&this.yOrient===ke.Right?(this.labelOffset=e+this.labelOffset,setTimeout(()=>{this.dimensionsChanged.emit({width:e})},0)):e!==this.labelOffset&&(this.labelOffset=e,setTimeout(()=>{this.dimensionsChanged.emit({width:e})},0))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=o.VBU({type:i,selectors:[["g","ngx-charts-y-axis",""]],viewQuery:function(e,n){if(1&e&&o.GBs(Lh,5),2&e){let s;o.mGM(s=o.lsd())&&(n.ticksComponent=s.first)}},inputs:{yScale:"yScale",dims:"dims",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",ticks:"ticks",showGridLines:"showGridLines",showLabel:"showLabel",labelText:"labelText",yAxisTickCount:"yAxisTickCount",yOrient:"yOrient",referenceLines:"referenceLines",showRefLines:"showRefLines",showRefLabels:"showRefLabels",yAxisOffset:"yAxisOffset",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[o.OA$],attrs:Qv,decls:3,vars:4,consts:[["ngx-charts-y-axis-ticks","",3,"trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-y-axis-ticks","",3,"dimensionsChanged","trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","wrapTicks"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(e,n){1&e&&(o.qSk(),o.j41(0,"g"),o.DNE(1,qv,1,15,"g",0)(2,Kv,1,5,"g",1),o.k0s()),2&e&&(o.BMQ("class",n.yAxisClassName)("transform",n.transform),o.R7$(),o.Y8G("ngIf",n.yScale),o.R7$(),o.Y8G("ngIf",n.showLabel))},dependencies:[Lh,Sh,b.bT],encapsulation:2,changeDetection:0}),i})(),Eh=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[b.MD]]}),i})();var Yn=function(i){return i.popover="popover",i.tooltip="tooltip",i}(Yn||{}),Zi=function(i){return i[i.all="all"]="all",i[i.focus="focus"]="focus",i[i.mouseover="mouseover"]="mouseover",i}(Zi||{});let Uo=(()=>{class i{constructor(e,n,s){this.tooltipService=e,this.viewContainerRef=n,this.renderer=s,this.tooltipCssClass="",this.tooltipAppendToBody=!0,this.tooltipSpacing=10,this.tooltipDisabled=!1,this.tooltipShowCaret=!0,this.tooltipPlacement=H.Top,this.tooltipAlignment=H.Center,this.tooltipType=Yn.popover,this.tooltipCloseOnClickOutside=!0,this.tooltipCloseOnMouseLeave=!0,this.tooltipHideTimeout=300,this.tooltipShowTimeout=100,this.tooltipShowEvent=Zi.all,this.tooltipImmediateExit=!1,this.show=new o.bkB,this.hide=new o.bkB}get listensForFocus(){return this.tooltipShowEvent===Zi.all||this.tooltipShowEvent===Zi.focus}get listensForHover(){return this.tooltipShowEvent===Zi.all||this.tooltipShowEvent===Zi.mouseover}ngOnDestroy(){this.hideTooltip(!0)}onFocus(){this.listensForFocus&&this.showTooltip()}onBlur(){this.listensForFocus&&this.hideTooltip(!0)}onMouseEnter(){this.listensForHover&&this.showTooltip()}onMouseLeave(e){if(this.listensForHover&&this.tooltipCloseOnMouseLeave){if(clearTimeout(this.timeout),this.component&&this.component.instance.element.nativeElement.contains(e))return;this.hideTooltip(this.tooltipImmediateExit)}}onMouseClick(){this.listensForHover&&this.hideTooltip(!0)}showTooltip(e){if(this.component||this.tooltipDisabled)return;const n=e?0:this.tooltipShowTimeout+(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?400:0);clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.tooltipService.destroyAll();const s=this.createBoundOptions();this.component=this.tooltipService.create(s),setTimeout(()=>{this.component&&this.addHideListeners(this.component.instance.element.nativeElement)},10),this.show.emit(!0)},n)}addHideListeners(e){this.mouseEnterContentEvent=this.renderer.listen(e,"mouseenter",()=>{clearTimeout(this.timeout)}),this.tooltipCloseOnMouseLeave&&(this.mouseLeaveContentEvent=this.renderer.listen(e,"mouseleave",()=>{this.hideTooltip(this.tooltipImmediateExit)})),this.tooltipCloseOnClickOutside&&(this.documentClickEvent=this.renderer.listen("window","click",n=>{e.contains(n.target)||this.hideTooltip()}))}hideTooltip(e=!1){if(!this.component)return;const n=()=>{this.mouseLeaveContentEvent&&this.mouseLeaveContentEvent(),this.mouseEnterContentEvent&&this.mouseEnterContentEvent(),this.documentClickEvent&&this.documentClickEvent(),this.hide.emit(!0),this.tooltipService.destroy(this.component),this.component=void 0};clearTimeout(this.timeout),e?n():this.timeout=setTimeout(n,this.tooltipHideTimeout)}createBoundOptions(){return{title:this.tooltipTitle,template:this.tooltipTemplate,host:this.viewContainerRef.element,placement:this.tooltipPlacement,alignment:this.tooltipAlignment,type:this.tooltipType,showCaret:this.tooltipShowCaret,cssClass:this.tooltipCssClass,spacing:this.tooltipSpacing,context:this.tooltipContext}}}return i.\u0275fac=function(e){return new(e||i)(o.rXU(Wo),o.rXU(o.c1b),o.rXU(o.sFG))},i.\u0275dir=o.FsC({type:i,selectors:[["","ngx-tooltip",""]],hostBindings:function(e,n){1&e&&o.bIt("focusin",function(){return n.onFocus()})("blur",function(){return n.onBlur()})("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(r){return n.onMouseLeave(r.target)})("click",function(){return n.onMouseClick()})},inputs:{tooltipCssClass:"tooltipCssClass",tooltipTitle:"tooltipTitle",tooltipAppendToBody:"tooltipAppendToBody",tooltipSpacing:"tooltipSpacing",tooltipDisabled:"tooltipDisabled",tooltipShowCaret:"tooltipShowCaret",tooltipPlacement:"tooltipPlacement",tooltipAlignment:"tooltipAlignment",tooltipType:"tooltipType",tooltipCloseOnClickOutside:"tooltipCloseOnClickOutside",tooltipCloseOnMouseLeave:"tooltipCloseOnMouseLeave",tooltipHideTimeout:"tooltipHideTimeout",tooltipShowTimeout:"tooltipShowTimeout",tooltipTemplate:"tooltipTemplate",tooltipShowEvent:"tooltipShowEvent",tooltipContext:"tooltipContext",tooltipImmediateExit:"tooltipImmediateExit"},outputs:{show:"show",hide:"hide"}}),i})(),Fh=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({providers:[vh,Wo],imports:[[b.MD]]}),i})();const Oh={};function Wn(){let i=("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);return i=`a${i}`,Oh[i]?Wn():(Oh[i]=!0,i)}var Bt=function(i){return i.Vertical="vertical",i.Horizontal="horizontal",i}(Bt||{});let Qo,er=(()=>{class i{constructor(){this.orientation=Bt.Vertical}ngOnChanges(e){this.x1="0%",this.x2="0%",this.y1="0%",this.y2="0%",this.orientation===Bt.Horizontal?this.x2="100%":this.orientation===Bt.Vertical&&(this.y1="100%")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=o.VBU({type:i,selectors:[["g","ngx-charts-svg-linear-gradient",""]],inputs:{orientation:"orientation",name:"name",stops:"stops"},features:[o.OA$],attrs:Jv,decls:2,vars:6,consts:[[3,"id"],[3,"stop-color","stop-opacity",4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(o.qSk(),o.j41(0,"linearGradient",0),o.DNE(1,Zv,1,5,"stop",1),o.k0s()),2&e&&(o.Y8G("id",n.name),o.BMQ("x1",n.x1)("y1",n.y1)("x2",n.x2)("y2",n.y2),o.R7$(),o.Y8G("ngForOf",n.stops))},dependencies:[b.Sq],encapsulation:2,changeDetection:0}),i})();typeof window<"u"?Qo=window:typeof global<"u"&&(Qo=global);let Je=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[b.MD,Eh,Fh],b.MD,Eh,Fh]}),i})();const Vh=[{name:"vivid",selectable:!0,group:O.Ordinal,domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:O.Ordinal,domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:O.Ordinal,domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:O.Ordinal,domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:O.Linear,domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:O.Linear,domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:O.Linear,domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:O.Ordinal,domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:O.Ordinal,domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:O.Ordinal,domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:O.Ordinal,domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:O.Ordinal,domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:O.Ordinal,domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:O.Ordinal,domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:O.Ordinal,domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class Hb{constructor(t,e,n,s){"string"==typeof t&&(t=Vh.find(r=>r.name===t)),this.colorDomain=t.domain,this.scaleType=e,this.domain=n,this.customColors=s,this.scale=this.generateColorScheme(t,e,this.domain)}generateColorScheme(t,e,n){let s;switch("string"==typeof t&&(t=Vh.find(r=>r.name===t)),e){case O.Quantile:s=mh().range(t.domain).domain(n);break;case O.Ordinal:s=Yo().range(t.domain).domain(n);break;case O.Linear:{const r=[...t.domain];1===r.length&&(r.push(r[0]),this.colorDomain=r);const a=ah(0,1,1/r.length);s=Hn().range(r).domain(a)}}return s}getColor(t){if(null==t)throw new Error("Value can not be null");if(this.scaleType===O.Linear){const e=Hn().domain(this.domain).range([0,1]);return this.scale(e(t))}{if("function"==typeof this.customColors)return this.customColors(t);const e=t.toString();let n;return this.customColors&&this.customColors.length>0&&(n=this.customColors.find(s=>s.name.toLowerCase()===e.toLowerCase())),n?n.value:this.scale(t)}}getLinearGradientStops(t,e){void 0===e&&(e=this.domain[0]);const n=Hn().domain(this.domain).range([0,1]),s=$n().domain(this.colorDomain).range([0,1]),r=this.getColor(t),a=n(e),l=this.getColor(e),c=n(t);let h=1,d=a;const u=[];for(u.push({color:l,offset:a,originalOffset:a,opacity:1});d<c&&h<this.colorDomain.length;){const p=this.colorDomain[h],m=s(p);if(m<=a)h++;else{if(m.toFixed(4)>=(c-s.bandwidth()).toFixed(4))break;u.push({color:p,offset:m,opacity:1}),d=m,h++}}if(u[u.length-1].offset<100&&u.push({color:r,offset:c,opacity:1}),c===a)u[0].offset=0,u[1].offset=100;else if(100!==u[u.length-1].offset)for(const p of u)p.offset=(p.offset-a)/(c-a)*100;return u}}let $b=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[Je]]}),i})(),Hh=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[Je]]}),i})();lv();let Yb=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[Je]]}),i})(),Wb=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[Je]]}),i})(),jb=(()=>{class i{constructor(e){this.gradient=!1,this.animations=!0,this.select=new o.bkB,this.activate=new o.bkB,this.deactivate=new o.bkB,this.barOrientation=Bt,this.element=e.nativeElement}ngOnChanges(e){this.transform=`translate(${this.x} , ${this.y})`,this.startOpacity=.3,this.gradientId="grad"+Wn().toString(),this.gradientUrl=`url(#${this.gradientId})`,this.gradientStops=this.getGradientStops(),this.animations&&this.loadAnimation()}getGradientStops(){return[{offset:0,color:this.fill,opacity:this.startOpacity},{offset:100,color:this.fill,opacity:1}]}loadAnimation(){qe(this.element).select(".cell").attr("opacity",0),this.animateToCurrentForm()}animateToCurrentForm(){qe(this.element).select(".cell").transition().duration(750).attr("opacity",1)}onClick(){this.select.emit(this.data)}onMouseEnter(){this.activate.emit(this.data)}onMouseLeave(){this.deactivate.emit(this.data)}}return i.\u0275fac=function(e){return new(e||i)(o.rXU(o.aKT))},i.\u0275cmp=o.VBU({type:i,selectors:[["g","ngx-charts-heat-map-cell",""]],hostBindings:function(e,n){1&e&&o.bIt("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()})},inputs:{fill:"fill",x:"x",y:"y",width:"width",height:"height",data:"data",gradient:"gradient",animations:"animations"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[o.OA$],attrs:eb,decls:3,vars:5,consts:[[1,"cell"],[4,"ngIf"],["rx","3",1,"cell",3,"click"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"]],template:function(e,n){1&e&&(o.qSk(),o.j41(0,"g",0),o.DNE(1,tb,2,3,"defs",1),o.j41(2,"rect",2),o.bIt("click",function(){return n.onClick()}),o.k0s()()),2&e&&(o.BMQ("transform",n.transform),o.R7$(),o.Y8G("ngIf",n.gradient),o.R7$(),o.BMQ("fill",n.gradient?n.gradientUrl:n.fill)("width",n.width)("height",n.height))},dependencies:[er,b.bT],encapsulation:2,changeDetection:0}),i})(),Ub=(()=>{class i{constructor(){this.tooltipDisabled=!1,this.animations=!0,this.select=new o.bkB,this.activate=new o.bkB,this.deactivate=new o.bkB,this.placementTypes=H,this.styleTypes=Yn}ngOnInit(){this.tooltipText||(this.tooltipText=this.getTooltipText)}ngOnChanges(e){this.update()}update(){this.cells=this.getCells()}getCells(){const e=[];return this.data.map(n=>{n.series.map(s=>{const r=s.value;s.series=n.name,e.push({row:n,cell:s,x:this.xScale(n.name),y:this.yScale(s.name),width:this.xScale.bandwidth(),height:this.yScale.bandwidth(),fill:this.colors.getColor(r),data:r,label:Js(s.name),series:n.name})})}),e}getTooltipText({label:e,data:n,series:s}){return`\n      <span class="tooltip-label">${Zs(s)} \u2022 ${Zs(e)}</span>\n      <span class="tooltip-val">${n.toLocaleString()}</span>\n    `}trackBy(e,n){return n.label}onClick(e){this.select.emit(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=o.VBU({type:i,selectors:[["g","ngx-charts-heat-map-cell-series",""]],inputs:{data:"data",colors:"colors",xScale:"xScale",yScale:"yScale",gradient:"gradient",tooltipDisabled:"tooltipDisabled",tooltipText:"tooltipText",tooltipTemplate:"tooltipTemplate",animations:"animations"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[o.OA$],attrs:ib,decls:1,vars:2,consts:[["ngx-charts-heat-map-cell","","ngx-tooltip","",3,"x","y","width","height","fill","data","gradient","animations","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","select","activate","deactivate",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-heat-map-cell","","ngx-tooltip","",3,"select","activate","deactivate","x","y","width","height","fill","data","gradient","animations","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext"]],template:function(e,n){1&e&&o.DNE(0,sb,1,18,"g",0),2&e&&o.Y8G("ngForOf",n.cells)("ngForTrackBy",n.trackBy)},dependencies:[jb,b.Sq,Uo],encapsulation:2,changeDetection:0}),i})(),Qb=(()=>{class i extends wh{constructor(){super(...arguments),this.legendTitle="Legend",this.legendPosition=bi.Right,this.innerPadding=8,this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.tooltipDisabled=!1,this.activeEntries=[],this.wrapTicks=!1,this.activate=new o.bkB,this.deactivate=new o.bkB,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.scaleType=O.Linear}update(){if(super.update(),this.formatDates(),this.xDomain=this.getXDomain(),this.yDomain=this.getYDomain(),this.valueDomain=this.getValueDomain(),this.scaleType=function zh(i,t=!0){return t&&i.every(s=>s instanceof Date)?O.Time:i.every(n=>"number"==typeof n)?O.Linear:O.Ordinal}(this.valueDomain,!1),this.dims=function zb({width:i,height:t,margins:e,showXAxis:n=!1,showYAxis:s=!1,xAxisHeight:r=0,yAxisWidth:a=0,showXLabel:l=!1,showYLabel:c=!1,showLegend:h=!1,legendType:d=O.Ordinal,legendPosition:u=bi.Right,columns:p=12}){let m=e[3],g=i,_=t-e[0]-e[2];return h&&u===bi.Right&&(p-=d===O.Ordinal?2:1),g=g*p/12,g=g-e[1]-e[3],n&&(_-=5,_-=r,l&&(_-=30)),s&&(g-=5,g-=a,m+=a,m+=10,c&&(g-=30,m+=30)),g=Math.max(0,g),_=Math.max(0,_),{width:Math.floor(g),height:Math.floor(_),xOffset:Math.floor(m)}}({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.scaleType,legendPosition:this.legendPosition}),this.scaleType===O.Linear){let e=this.min,n=this.max;this.min||(e=Math.min(0,...this.valueDomain)),this.max||(n=Math.max(...this.valueDomain)),this.valueDomain=[e,n]}this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`,this.rects=this.getRects()}getXDomain(){const e=[];for(const n of this.results)e.includes(n.name)||e.push(n.name);return e}getYDomain(){const e=[];for(const n of this.results)for(const s of n.series)e.includes(s.name)||e.push(s.name);return e}getValueDomain(){const e=[];for(const n of this.results)for(const s of n.series)e.includes(s.value)||e.push(s.value);return e}getDimension(e,n=0,s,r){return"string"==typeof e&&(e=e.replace("[","").replace("]","").replace("px","").replace("'","")).includes(",")&&(e=e.split(",")),Array.isArray(e)&&"number"==typeof n?this.getDimension(e[n],null,s,r):"string"==typeof e&&e.includes("%")?+e.replace("%","")/100:s/(r/+e+1)}getXScale(){const e=this.getDimension(this.innerPadding,0,this.xDomain.length,this.dims.width);return $n().rangeRound([0,this.dims.width]).domain(this.xDomain).paddingInner(e)}getYScale(){const e=this.getDimension(this.innerPadding,1,this.yDomain.length,this.dims.height);return $n().rangeRound([this.dims.height,0]).domain(this.yDomain).paddingInner(e)}getRects(){const e=[];return this.xDomain.map(n=>{this.yDomain.map(s=>{e.push({x:this.xScale(n),y:this.yScale(s),rx:3,width:this.xScale.bandwidth(),height:this.yScale.bandwidth(),fill:"rgba(200,200,200,0.03)"})})}),e}onClick(e){this.select.emit(e)}setColors(){this.colors=new Hb(this.scheme,this.scaleType,this.valueDomain)}getLegendOptions(){return{scaleType:this.scaleType,domain:this.valueDomain,colors:this.scaleType===O.Ordinal?this.colors:this.colors.scale,title:this.scaleType===O.Ordinal?this.legendTitle:void 0,position:this.legendPosition}}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e,n,s=!1){const r=Object.assign({},e);n&&(r.series=n.name);const a=this.results.map(l=>l.series).flat().filter(l=>s?l.label===r.name:l.name===r.name&&l.series===r.series);this.activeEntries=[...a],this.activate.emit({value:r,entries:this.activeEntries})}onDeactivate(e,n,s=!1){const r=Object.assign({},e);n&&(r.series=n.name),this.activeEntries=this.activeEntries.filter(a=>s?a.label!==r.name:!(a.name===r.name&&a.series===r.series)),this.deactivate.emit({value:r,entries:this.activeEntries})}}return i.\u0275fac=(()=>{let t;return function(n){return(t||(t=o.xGo(i)))(n||i)}})(),i.\u0275cmp=o.VBU({type:i,selectors:[["ngx-charts-heat-map"]],contentQueries:function(e,n,s){if(1&e&&o.wni(s,Sy,5),2&e){let r;o.mGM(r=o.lsd())&&(n.tooltipTemplate=r.first)}},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",gradient:"gradient",innerPadding:"innerPadding",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",tooltipDisabled:"tooltipDisabled",tooltipText:"tooltipText",min:"min",max:"max",activeEntries:"activeEntries",wrapTicks:"wrapTicks"},outputs:{activate:"activate",deactivate:"deactivate"},features:[o.Vt3],decls:6,vars:20,consts:[[3,"legendLabelClick","view","showLegend","animations","legendOptions"],[1,"heat-map","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","wrapTicks","dimensionsChanged",4,"ngIf"],[4,"ngFor","ngForOf"],["ngx-charts-heat-map-cell-series","",3,"select","activate","deactivate","xScale","yScale","colors","data","gradient","animations","tooltipDisabled","tooltipTemplate","tooltipText"],["ngx-charts-x-axis","",3,"dimensionsChanged","xScale","dims","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","wrapTicks"],["ngx-charts-y-axis","",3,"dimensionsChanged","yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","wrapTicks"]],template:function(e,n){1&e&&(o.j41(0,"ngx-charts-chart",0),o.bIt("legendLabelClick",function(r){return n.onClick(r)}),o.qSk(),o.j41(1,"g",1),o.DNE(2,rb,1,10,"g",2)(3,ob,1,9,"g",3)(4,ab,1,6,"rect",4),o.j41(5,"g",5),o.bIt("select",function(r){return n.onClick(r)})("activate",function(r){return n.onActivate(r,void 0)})("deactivate",function(r){return n.onDeactivate(r,void 0)}),o.k0s()()()),2&e&&(o.Y8G("view",o.l_i(17,Gn,n.width,n.height))("showLegend",n.legend)("animations",n.animations)("legendOptions",n.legendOptions),o.R7$(),o.BMQ("transform",n.transform),o.R7$(),o.Y8G("ngIf",n.xAxis),o.R7$(),o.Y8G("ngIf",n.yAxis),o.R7$(),o.Y8G("ngForOf",n.rects),o.R7$(),o.Y8G("xScale",n.xScale)("yScale",n.yScale)("colors",n.colors)("data",n.results)("gradient",n.gradient)("animations",n.animations)("tooltipDisabled",n.tooltipDisabled)("tooltipTemplate",n.tooltipTemplate)("tooltipText",n.tooltipText))},dependencies:[Th,Eb,Ob,Ub,b.bT,b.Sq],styles:[".ngx-charts-outer{animation:chartFadeIn linear .6s}@keyframes chartFadeIn{0%{opacity:0}20%{opacity:0}to{opacity:1}}.ngx-charts{float:left;overflow:visible}.ngx-charts .circle,.ngx-charts .cell,.ngx-charts .bar,.ngx-charts .node,.ngx-charts .link,.ngx-charts .arc{cursor:pointer}.ngx-charts .bar.active,.ngx-charts .bar:hover,.ngx-charts .cell.active,.ngx-charts .cell:hover,.ngx-charts .arc.active,.ngx-charts .arc:hover,.ngx-charts .node.active,.ngx-charts .node:hover,.ngx-charts .link.active,.ngx-charts .link:hover,.ngx-charts .card.active,.ngx-charts .card:hover{opacity:.8;transition:opacity .1s ease-in-out}.ngx-charts .bar:focus,.ngx-charts .cell:focus,.ngx-charts .arc:focus,.ngx-charts .node:focus,.ngx-charts .link:focus,.ngx-charts .card:focus{outline:none}.ngx-charts .bar.hidden,.ngx-charts .cell.hidden,.ngx-charts .arc.hidden,.ngx-charts .node.hidden,.ngx-charts .link.hidden,.ngx-charts .card.hidden{display:none}.ngx-charts g:focus{outline:none}.ngx-charts .line-series.inactive,.ngx-charts .line-series-range.inactive,.ngx-charts .polar-series-path.inactive,.ngx-charts .polar-series-area.inactive,.ngx-charts .area-series.inactive{transition:opacity .1s ease-in-out;opacity:.2}.ngx-charts .line-highlight{display:none}.ngx-charts .line-highlight.active{display:block}.ngx-charts .area{opacity:.6}.ngx-charts .circle:hover{cursor:pointer}.ngx-charts .label{font-size:12px;font-weight:400}.ngx-charts .tooltip-anchor{fill:#000}.ngx-charts .gridline-path{stroke:#ddd;stroke-width:1;fill:none}.ngx-charts .refline-path{stroke:#a8b2c7;stroke-width:1;stroke-dasharray:5;stroke-dashoffset:5}.ngx-charts .refline-label{font-size:9px}.ngx-charts .reference-area{fill-opacity:.05;fill:#000}.ngx-charts .gridline-path-dotted{stroke:#ddd;stroke-width:1;fill:none;stroke-dasharray:1,20;stroke-dashoffset:3}.ngx-charts .grid-panel rect{fill:none}.ngx-charts .grid-panel.odd rect{fill:#0000000d}\n"],encapsulation:2,changeDetection:0}),i})(),qb=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[Je]]}),i})(),$h=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[Je]]}),i})();Math;let Ko=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[Je]]}),i})(),Zb=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[Je,Ko,$h]]}),i})(),t1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[Je]]}),i})(),i1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[Je]]}),i})(),s1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[Je,Ko,Hh]]}),i})(),o1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[Je]]}),i})(),a1=(()=>{class i{constructor(){!function r1(){typeof SVGElement<"u"&&typeof SVGElement.prototype.contains>"u"&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[Je,$b,Hh,Yb,Wb,qb,o1,$h,Zb,t1,Ko,i1,s1]}),i})();var Ci=S(3902),Rt=S(8834),Qt=S(9888),I=S(7336),oe=S(1413),Ti=S(7786),jn=S(8359),en=S(7673),Gh=S(5007),Nt=S(9172),qt=S(5558),ue=S(6977),nt=S(5964),Xh=S(6697),nr=S(1986),sr=S(6600),ki=S(8203),tn=S(6914),le=S(4085),ut=S(6860);const Yh=(0,ut.CZ)();class l1{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=(0,le.a1)(-this._previousScrollPosition.left),t.style.top=(0,le.a1)(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,n=t.style,s=this._document.body.style,r=n.scrollBehavior||"",a=s.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Yh&&(n.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Yh&&(n.scrollBehavior=r,s.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class c1{constructor(t,e,n,s){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0).pipe((0,nt.p)(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Wh{enable(){}disable(){}attach(){}}function Jo(i,t){return t.some(e=>i.bottom<e.top||i.top>e.bottom||i.right<e.left||i.left>e.right)}function jh(i,t){return t.some(e=>i.top<e.top||i.bottom>e.bottom||i.left<e.left||i.right>e.right)}class h1{constructor(t,e,n,s){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=s,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:s}=this._viewportRuler.getViewportSize();Jo(e,[{width:n,height:s,bottom:s,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let d1=(()=>{class i{constructor(e,n,s,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=s,this.noop=()=>new Wh,this.close=a=>new c1(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new l1(this._viewportRuler,this._document),this.reposition=a=>new h1(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=r}static{this.\u0275fac=function(n){return new(n||i)(o.KVO(tn.R),o.KVO(tn.Xj),o.KVO(o.SKi),o.KVO(b.qQ))}}static{this.\u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();class rr{constructor(t){if(this.scrollStrategy=new Wh,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class u1{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let Uh=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}static{this.\u0275fac=function(n){return new(n||i)(o.KVO(b.qQ))}}static{this.\u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),p1=(()=>{class i extends Uh{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=s=>{const r=this._attachedOverlays;for(let a=r.length-1;a>-1;a--)if(r[a]._keydownEvents.observers.length>0){const l=r[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(s)):l.next(s);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(n){return new(n||i)(o.KVO(b.qQ),o.KVO(o.SKi,8))}}static{this.\u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),m1=(()=>{class i extends Uh{constructor(e,n,s){super(e),this._platform=n,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=(0,ut.Fb)(r)},this._clickListener=r=>{const a=(0,ut.Fb)(r),l="click"===r.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let h=c.length-1;h>-1;h--){const d=c[h];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(Qh(d.overlayElement,a)||Qh(d.overlayElement,l))break;const u=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>u.next(r)):u.next(r)}}}add(e){if(super.add(e),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(n){return new(n||i)(o.KVO(b.qQ),o.KVO(ut.OD),o.KVO(o.SKi,8))}}static{this.\u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Qh(i,t){const e=typeof ShadowRoot<"u"&&ShadowRoot;let n=t;for(;n;){if(n===i)return!0;n=e&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}let qh=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||(0,ut.v8)()){const s=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let r=0;r<s.length;r++)s[r].remove()}const n=this._document.createElement("div");n.classList.add(e),(0,ut.v8)()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}static{this.\u0275fac=function(n){return new(n||i)(o.KVO(b.qQ),o.KVO(ut.OD))}}static{this.\u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();class g1{constructor(t,e,n,s,r,a,l,c,h,d=!1,u){this._portalOutlet=t,this._host=e,this._pane=n,this._config=s,this._ngZone=r,this._keyboardDispatcher=a,this._document=l,this._location=c,this._outsideClickDispatcher=h,this._animationsDisabled=d,this._injector=u,this._backdropElement=null,this._backdropClick=new oe.B,this._attachments=new oe.B,this._detachments=new oe.B,this._locationChanges=jn.yU.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new oe.B,this._outsidePointerEvents=new oe.B,this._renders=new oe.B,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy,this._afterRenderRef=(0,o.O8t)(()=>(0,o.Tzd)(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=(0,o.mal)(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=(0,le.a1)(this._config.width),t.height=(0,le.a1)(this._config.height),t.minWidth=(0,le.a1)(this._config.minWidth),t.minHeight=(0,le.a1)(this._config.minHeight),t.maxWidth=(0,le.a1)(this._config.maxWidth),t.maxHeight=(0,le.a1)(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){const s=(0,le.FG)(e||[]).filter(r=>!!r);s.length&&(n?t.classList.add(...s):t.classList.remove(...s))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const t=this._renders.pipe((0,ue.Q)((0,Ti.h)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Kh="cdk-overlay-connected-position-bounding-box",f1=/([A-Za-z%]+)$/;class _1{get positions(){return this._preferredPositions}constructor(t,e,n,s,r){this._viewportRuler=e,this._document=n,this._platform=s,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new oe.B,this._resizeSubscription=jn.yU.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(Kh),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,s=this._containerRect,r=[];let a;for(let l of this._preferredPositions){let c=this._getOriginPoint(t,s,l),h=this._getOverlayPoint(c,e,l),d=this._getOverlayFit(h,e,n,l);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(l,c);this._canFitWithFlexibleDimensions(d,h,n)?r.push({position:l,origin:c,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(c,l)}):(!a||a.overlayFit.visibleArea<d.visibleArea)&&(a={overlayFit:d,overlayPoint:h,originPoint:c,position:l,overlayRect:e})}if(r.length){let l=null,c=-1;for(const h of r){const d=h.boundingBoxRect.width*h.boundingBoxRect.height*(h.position.weight||1);d>c&&(c=d,l=h)}return this._isPushed=!1,void this._applyPosition(l.position,l.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&wi(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Kh),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let s,r;if("center"==n.originX)s=t.left+t.width/2;else{const a=this._isRtl()?t.right:t.left,l=this._isRtl()?t.left:t.right;s="start"==n.originX?a:l}return e.left<0&&(s-=e.left),r="center"==n.originY?t.top+t.height/2:"top"==n.originY?t.top:t.bottom,e.top<0&&(r-=e.top),{x:s,y:r}}_getOverlayPoint(t,e,n){let s,r;return s="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,r="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+s,y:t.y+r}}_getOverlayFit(t,e,n,s){const r=Zh(e);let{x:a,y:l}=t,c=this._getOffset(s,"x"),h=this._getOffset(s,"y");c&&(a+=c),h&&(l+=h);let p=0-l,m=l+r.height-n.height,g=this._subtractOverflows(r.width,0-a,a+r.width-n.width),_=this._subtractOverflows(r.height,p,m),f=g*_;return{visibleArea:f,isCompletelyWithinViewport:r.width*r.height===f,fitsInViewportVertically:_===r.height,fitsInViewportHorizontally:g==r.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const s=n.bottom-e.y,r=n.right-e.x,a=Jh(this._overlayRef.getConfig().minHeight),l=Jh(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=a&&a<=s)&&(t.fitsInViewportHorizontally||null!=l&&l<=r)}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const s=Zh(e),r=this._viewportRect,a=Math.max(t.x+s.width-r.width,0),l=Math.max(t.y+s.height-r.height,0),c=Math.max(r.top-n.top-t.y,0),h=Math.max(r.left-n.left-t.x,0);let d=0,u=0;return d=s.width<=r.width?h||-a:t.x<this._viewportMargin?r.left-n.left-t.x:0,u=s.height<=r.height?c||-l:t.y<this._viewportMargin?r.top-n.top-t.y:0,this._previousPushAmount={x:d,y:u},{x:t.x+d,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){const n=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!function x1(i,t){return i===t||i.isOriginClipped===t.isOriginClipped&&i.isOriginOutsideView===t.isOriginOutsideView&&i.isOverlayClipped===t.isOverlayClipped&&i.isOverlayOutsideView===t.isOverlayOutsideView}(this._lastScrollVisibility,n)){const s=new u1(t,n);this._positionChanges.next(s)}this._lastScrollVisibility=n}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,s=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let r=0;r<e.length;r++)e[r].style.transformOrigin=`${n} ${s}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,s=this._isRtl();let r,a,l,d,u,p;if("top"===e.overlayY)a=t.y,r=n.height-a+this._viewportMargin;else if("bottom"===e.overlayY)l=n.height-t.y+2*this._viewportMargin,r=n.height-l+this._viewportMargin;else{const m=Math.min(n.bottom-t.y+n.top,t.y),g=this._lastBoundingBoxSize.height;r=2*m,a=t.y-m,r>g&&!this._isInitialRender&&!this._growAfterOpen&&(a=t.y-g/2)}if("end"===e.overlayX&&!s||"start"===e.overlayX&&s)p=n.width-t.x+2*this._viewportMargin,d=t.x-this._viewportMargin;else if("start"===e.overlayX&&!s||"end"===e.overlayX&&s)u=t.x,d=n.right-t.x;else{const m=Math.min(n.right-t.x+n.left,t.x),g=this._lastBoundingBoxSize.width;d=2*m,u=t.x-m,d>g&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-g/2)}return{top:a,left:u,bottom:l,right:p,width:d,height:r}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const r=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;s.height=(0,le.a1)(n.height),s.top=(0,le.a1)(n.top),s.bottom=(0,le.a1)(n.bottom),s.width=(0,le.a1)(n.width),s.left=(0,le.a1)(n.left),s.right=(0,le.a1)(n.right),s.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",s.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",r&&(s.maxHeight=(0,le.a1)(r)),a&&(s.maxWidth=(0,le.a1)(a))}this._lastBoundingBoxSize=n,wi(this._boundingBox.style,s)}_resetBoundingBoxStyles(){wi(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){wi(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},s=this._hasExactPosition(),r=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(s){const d=this._viewportRuler.getViewportScrollPosition();wi(n,this._getExactOverlayY(e,t,d)),wi(n,this._getExactOverlayX(e,t,d))}else n.position="static";let l="",c=this._getOffset(e,"x"),h=this._getOffset(e,"y");c&&(l+=`translateX(${c}px) `),h&&(l+=`translateY(${h}px)`),n.transform=l.trim(),a.maxHeight&&(s?n.maxHeight=(0,le.a1)(a.maxHeight):r&&(n.maxHeight="")),a.maxWidth&&(s?n.maxWidth=(0,le.a1)(a.maxWidth):r&&(n.maxWidth="")),wi(this._pane.style,n)}_getExactOverlayY(t,e,n){let s={top:"",bottom:""},r=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n)),"bottom"===t.overlayY?s.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":s.top=(0,le.a1)(r.y),s}_getExactOverlayX(t,e,n){let a,s={left:"",right:""},r=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n)),a=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===a?s.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":s.left=(0,le.a1)(r.x),s}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:jh(t,n),isOriginOutsideView:Jo(t,n),isOverlayClipped:jh(e,n),isOverlayOutsideView:Jo(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,s)=>n-Math.max(s,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&(0,le.FG)(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof o.aKT)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function wi(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function Jh(i){if("number"!=typeof i&&null!=i){const[t,e]=i.split(f1);return e&&"px"!==e?null:parseFloat(t)}return i||null}function Zh(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const ed=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}],v1=[{originX:"end",originY:"top",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom"},{originX:"start",originY:"top",overlayX:"end",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"end",overlayY:"bottom"}],td="cdk-global-overlay-wrapper";class y1{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(td),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:s,height:r,maxWidth:a,maxHeight:l}=n,c=!("100%"!==s&&"100vw"!==s||a&&"100%"!==a&&"100vw"!==a),h=!("100%"!==r&&"100vh"!==r||l&&"100%"!==l&&"100vh"!==l),d=this._xPosition,u=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let m="",g="",_="";c?_="flex-start":"center"===d?(_="center",p?g=u:m=u):p?"left"===d||"end"===d?(_="flex-end",m=u):("right"===d||"start"===d)&&(_="flex-start",g=u):"left"===d||"start"===d?(_="flex-start",m=u):("right"===d||"end"===d)&&(_="flex-end",g=u),t.position=this._cssPosition,t.marginLeft=c?"0":m,t.marginTop=h?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":g,e.justifyContent=_,e.alignItems=h?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(td),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let b1=(()=>{class i{constructor(e,n,s,r){this._viewportRuler=e,this._document=n,this._platform=s,this._overlayContainer=r}global(){return new y1}flexibleConnectedTo(e){return new _1(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(n){return new(n||i)(o.KVO(tn.Xj),o.KVO(b.qQ),o.KVO(ut.OD),o.KVO(qh))}}static{this.\u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),C1=0,Vt=(()=>{class i{constructor(e,n,s,r,a,l,c,h,d,u,p,m){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=s,this._positionBuilder=r,this._keyboardDispatcher=a,this._injector=l,this._ngZone=c,this._document=h,this._directionality=d,this._location=u,this._outsideClickDispatcher=p,this._animationsModuleType=m}create(e){const n=this._createHostElement(),s=this._createPaneElement(n),r=this._createPortalOutlet(s),a=new rr(e);return a.direction=a.direction||this._directionality.value,new g1(r,n,s,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(o.uvJ))}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id="cdk-overlay-"+C1++,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(o.o8S)),new Ue(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(n){return new(n||i)(o.KVO(d1),o.KVO(qh),o.KVO(o.OM3),o.KVO(b1),o.KVO(p1),o.KVO(o.zZn),o.KVO(o.SKi),o.KVO(b.qQ),o.KVO(ki.dS),o.KVO(b.aZ),o.KVO(m1),o.KVO(o.bc$,8))}}static{this.\u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const w1={provide:new o.nKC("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const i=(0,o.WQX)(Vt);return()=>i.scrollStrategies.reposition()}}),deps:[Vt],useFactory:function k1(i){return()=>i.scrollStrategies.reposition()}};let id=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=o.$C({type:i})}static{this.\u0275inj=o.G2t({providers:[Vt,w1],imports:[ki.jI,Cm,tn.E9,tn.E9]})}}return i})();const S1=["mat-menu-item",""],A1=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],D1=["mat-icon, [matMenuItemIcon]","*"];function M1(i,t){1&i&&(o.qSk(),o.j41(0,"svg",2),o.nrm(1,"polygon",3),o.k0s())}const L1=["*"];function E1(i,t){if(1&i){const e=o.RV6();o.j41(0,"div",0),o.bIt("keydown",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r._handleKeydown(s))})("click",function(){o.eBV(e);const s=o.XpG();return o.Njj(s.closed.emit("click"))})("@transformMenu.start",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r._onAnimationStart(s))})("@transformMenu.done",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r._onAnimationDone(s))}),o.j41(1,"div",1),o.SdG(2),o.k0s()()}if(2&i){const e=o.XpG();o.HbH(e._classList),o.Y8G("id",e.panelId)("@transformMenu",e._panelAnimationState),o.BMQ("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const Zo=new o.nKC("MAT_MENU_PANEL");let or=(()=>{class i{constructor(e,n,s,r,a){this._elementRef=e,this._document=n,this._focusMonitor=s,this._parentMenu=r,this._changeDetectorRef=a,this.role="menuitem",this.disabled=!1,this.disableRipple=!1,this._hovered=new oe.B,this._focused=new oe.B,this._highlighted=!1,this._triggersSubmenu=!1,r?.addItem?.(this)}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),n=e.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<n.length;s++)n[s].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static{this.\u0275fac=function(n){return new(n||i)(o.rXU(o.aKT),o.rXU(b.qQ),o.rXU(Qt.FN),o.rXU(Zo,8),o.rXU(o.gRc))}}static{this.\u0275cmp=o.VBU({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator"],hostVars:8,hostBindings:function(n,s){1&n&&o.bIt("click",function(a){return s._checkDisabled(a)})("mouseenter",function(){return s._handleMouseEnter()}),2&n&&(o.BMQ("role",s.role)("tabindex",s._getTabIndex())("aria-disabled",s.disabled)("disabled",s.disabled||null),o.AVh("mat-mdc-menu-item-highlighted",s._highlighted)("mat-mdc-menu-item-submenu-trigger",s._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",o.L39],disableRipple:[2,"disableRipple","disableRipple",o.L39]},exportAs:["matMenuItem"],standalone:!0,features:[o.GFd,o.aNF],attrs:S1,ngContentSelectors:D1,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(n,s){1&n&&(o.NAR(A1),o.SdG(0),o.j41(1,"span",0),o.SdG(2,1),o.k0s(),o.nrm(3,"div",1),o.DNE(4,M1,2,0,":svg:svg",2)),2&n&&(o.R7$(3),o.Y8G("matRippleDisabled",s.disableRipple||s.disabled)("matRippleTrigger",s._getHostElement()),o.R7$(),o.vxM(s._triggersSubmenu?4:-1))},dependencies:[sr.r6],encapsulation:2,changeDetection:0})}}return i})();const F1=new o.nKC("MatMenuContent"),ar={transformMenu:(0,K.hZ)("transformMenu",[(0,K.wk)("void",(0,K.iF)({opacity:0,transform:"scale(0.8)"})),(0,K.kY)("void => enter",(0,K.i0)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,K.iF)({opacity:1,transform:"scale(1)"}))),(0,K.kY)("* => void",(0,K.i0)("100ms 25ms linear",(0,K.iF)({opacity:0})))]),fadeInItems:(0,K.hZ)("fadeInItems",[(0,K.wk)("showing",(0,K.iF)({opacity:1})),(0,K.kY)("void => *",[(0,K.iF)({opacity:0}),(0,K.i0)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let O1=0;const I1=new o.nKC("mat-menu-default-options",{providedIn:"root",factory:function P1(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Un=(()=>{class i{get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}set panelClass(e){const n=this._previousPanelClass,s={...this._classList};n&&n.length&&n.split(" ").forEach(r=>{s[r]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(r=>{s[r]=!0}),this._elementRef.nativeElement.className=""),this._classList=s}get classList(){return this.panelClass}set classList(e){this.panelClass=e}constructor(e,n,s,r){this._elementRef=e,this._changeDetectorRef=r,this._elevationPrefix="mat-elevation-z",this._baseElevation=null,this._directDescendantItems=new o.rOR,this._classList={},this._panelAnimationState="void",this._animationDone=new oe.B,this.closed=new o.bkB,this.close=this.closed,this.panelId="mat-menu-panel-"+O1++,this._injector=(0,o.WQX)(o.zZn),this.overlayPanelClass=s.overlayPanelClass||"",this._xPosition=s.xPosition,this._yPosition=s.yPosition,this.backdropClass=s.backdropClass,this.overlapTrigger=s.overlapTrigger,this.hasBackdrop=s.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Qt.Bu(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,Nt.Z)(this._directDescendantItems),(0,qt.n)(e=>(0,Ti.h)(...e.map(n=>n._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const n=this._keyManager;if("enter"===this._panelAnimationState&&n.activeItem?._hasFocus()){const s=e.toArray(),r=Math.max(0,Math.min(s.length-1,n.activeItemIndex||0));s[r]&&!s[r].disabled?n.setActiveItem(r):n.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy()}_hovered(){return this._directDescendantItems.changes.pipe((0,Nt.Z)(this._directDescendantItems),(0,qt.n)(n=>(0,Ti.h)(...n.map(s=>s._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const n=e.keyCode,s=this._keyManager;switch(n){case I._f:(0,I.rp)(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case I.UQ:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case I.LE:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(n===I.i7||n===I.n6)&&s.setFocusOrigin("keyboard"),void s.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=(0,o.mal)(()=>{let n=null;if(this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!n||!n.contains(document.activeElement)){const s=this._keyManager;s.setFocusOrigin(e).setFirstItemActive(),!s.activeItem&&n&&n.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){if(null===this._baseElevation){const l=("function"==typeof getComputedStyle?getComputedStyle(this._elementRef.nativeElement):null)?.getPropertyValue("--mat-menu-base-elevation-level")||"8";this._baseElevation=parseInt(l)}const n=Math.min(this._baseElevation+e,24),s=`${this._elevationPrefix}${n}`,r=Object.keys(this._classList).find(a=>a.startsWith(this._elevationPrefix));if(!r||r===this._previousElevation){const a={...this._classList};this._previousElevation&&(a[this._previousElevation]=!1),a[s]=!0,this._previousElevation=s,this._classList=a}}setPositionClasses(e=this.xPosition,n=this.yPosition){this._classList={...this._classList,"mat-menu-before":"before"===e,"mat-menu-after":"after"===e,"mat-menu-above":"above"===n,"mat-menu-below":"below"===n},this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,Nt.Z)(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}static{this.\u0275fac=function(n){return new(n||i)(o.rXU(o.aKT),o.rXU(o.SKi),o.rXU(I1),o.rXU(o.gRc))}}static{this.\u0275cmp=o.VBU({type:i,selectors:[["mat-menu"]],contentQueries:function(n,s,r){if(1&n&&(o.wni(r,F1,5),o.wni(r,or,5),o.wni(r,or,4)),2&n){let a;o.mGM(a=o.lsd())&&(s.lazyContent=a.first),o.mGM(a=o.lsd())&&(s._allItems=a),o.mGM(a=o.lsd())&&(s.items=a)}},viewQuery:function(n,s){if(1&n&&o.GBs(o.C4Q,5),2&n){let r;o.mGM(r=o.lsd())&&(s.templateRef=r.first)}},hostVars:3,hostBindings:function(n,s){2&n&&o.BMQ("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",o.L39],hasBackdrop:[2,"hasBackdrop","hasBackdrop",e=>null==e?null:(0,o.L39)(e)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],standalone:!0,features:[o.Jv_([{provide:Zo,useExisting:i}]),o.GFd,o.aNF],ngContentSelectors:L1,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mat-mdc-elevation-specific",3,"keydown","click","id"],[1,"mat-mdc-menu-content"]],template:function(n,s){1&n&&(o.NAR(),o.DNE(0,E1,3,7,"ng-template"))},styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-app-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-app-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;border-radius:var(--mat-menu-container-shape, var(--mat-app-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-app-surface-container));will-change:transform,opacity}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.mat-mdc-menu-panel.ng-animating:has(.mat-mdc-menu-content:empty){display:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-app-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing);margin-top:var(--mat-menu-divider-top-spacing)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:var(--mat-menu-item-leading-spacing);padding-right:var(--mat-menu-item-trailing-spacing);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}[dir=rtl] .mat-mdc-menu-item{padding-right:var(--mat-menu-item-leading-spacing);padding-left:var(--mat-menu-item-trailing-spacing)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing);padding-right:var(--mat-menu-item-with-icon-trailing-spacing)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-right:var(--mat-menu-item-with-icon-leading-spacing);padding-left:var(--mat-menu-item-with-icon-trailing-spacing)}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-app-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing);height:var(--mat-menu-item-icon-size);width:var(--mat-menu-item-icon-size)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color)}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color)}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[ar.transformMenu,ar.fadeInItems]},changeDetection:0})}}return i})();const nd=new o.nKC("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{const i=(0,o.WQX)(Vt);return()=>i.scrollStrategies.reposition()}}),R1={provide:nd,deps:[Vt],useFactory:function B1(i){return()=>i.scrollStrategies.reposition()}},sd=(0,ut.BQ)({passive:!0});let N1=(()=>{class i{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(n=>{this._destroyMenu(n),("click"===n||"tab"===n)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(e,n,s,r,a,l,c,h,d){this._overlay=e,this._element=n,this._viewContainerRef=s,this._menuItemInstance=l,this._dir=c,this._focusMonitor=h,this._ngZone=d,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=jn.yU.EMPTY,this._hoverSubscription=jn.yU.EMPTY,this._menuCloseSubscription=jn.yU.EMPTY,this._changeDetectorRef=(0,o.WQX)(o.gRc),this._handleTouchStart=u=>{(0,Qt.w6)(u)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new o.bkB,this.onMenuOpen=this.menuOpened,this.menuClosed=new o.bkB,this.onMenuClose=this.menuClosed,this._scrollStrategy=r,this._parentMaterialMenu=a instanceof Un?a:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,sd)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,sd),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const n=this._createOverlay(e),s=n.getConfig(),r=s.positionStrategy;this._setPosition(e,r),s.hasBackdrop=null==e.hasBackdrop?!this.triggersSubmenu():e.hasBackdrop,n.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof Un&&(e._startAnimation(),e._directDescendantItems.changes.pipe((0,ue.Q)(e.close)).subscribe(()=>{r.withLockedPosition(!1).reapplyLastPosition(),r.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof Un?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe((0,nt.p)(s=>"void"===s.toState),(0,Xh.s)(1),(0,ue.Q)(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let n=0,s=e.parentMenu;for(;s;)n++,s=s.parentMenu;e.setElevation(n)}}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){const n=this._getOverlayConfig(e);this._subscribeToPositions(e,n.positionStrategy),this._overlayRef=this._overlay.create(n),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new rr({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,n){e.setPositionClasses&&n.positionChanges.subscribe(s=>{const r="start"===s.connectionPair.overlayX?"after":"before",a="top"===s.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(r,a)):e.setPositionClasses(r,a)})}_setPosition(e,n){let[s,r]="before"===e.xPosition?["end","start"]:["start","end"],[a,l]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[c,h]=[a,l],[d,u]=[s,r],p=0;if(this.triggersSubmenu()){if(u=s="before"===e.xPosition?"start":"end",r=d="end"===s?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const m=this._parentMaterialMenu.items.first;this._parentInnerPadding=m?m._getHostElement().offsetTop:0}p="bottom"===a?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(c="top"===a?"bottom":"top",h="top"===l?"bottom":"top");n.withPositions([{originX:s,originY:c,overlayX:d,overlayY:a,offsetY:p},{originX:r,originY:c,overlayX:u,overlayY:a,offsetY:p},{originX:s,originY:h,overlayX:d,overlayY:l,offsetY:-p},{originX:r,originY:h,overlayX:u,overlayY:l,offsetY:-p}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),n=this._overlayRef.detachments(),s=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,en.of)(),r=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,nt.p)(a=>a!==this._menuItemInstance),(0,nt.p)(()=>this._menuOpen)):(0,en.of)();return(0,Ti.h)(e,s,r,n)}_handleMousedown(e){(0,Qt._G)(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const n=e.keyCode;(n===I.Fm||n===I.t6)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(n===I.LE&&"ltr"===this.dir||n===I.UQ&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,nt.p)(e=>e===this._menuItemInstance&&!e.disabled),(0,nr.c)(0,Gh.$)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Un&&this.menu._isAnimating?this.menu._animationDone.pipe((0,Xh.s)(1),(0,nr.c)(0,Gh.$),(0,ue.Q)(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new ee(e.templateRef,this._viewContainerRef)),this._portal}static{this.\u0275fac=function(n){return new(n||i)(o.rXU(Vt),o.rXU(o.aKT),o.rXU(o.c1b),o.rXU(nd),o.rXU(Zo,8),o.rXU(or,10),o.rXU(ki.dS,8),o.rXU(Qt.FN),o.rXU(o.SKi))}}static{this.\u0275dir=o.FsC({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(n,s){1&n&&o.bIt("click",function(a){return s._handleClick(a)})("mousedown",function(a){return s._handleMousedown(a)})("keydown",function(a){return s._handleKeydown(a)}),2&n&&o.BMQ("aria-haspopup",s.menu?"menu":null)("aria-expanded",s.menuOpen)("aria-controls",s.menuOpen?s.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],standalone:!0})}}return i})(),V1=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=o.$C({type:i})}static{this.\u0275inj=o.G2t({providers:[R1],imports:[b.MD,sr.pZ,sr.yE,id,tn.Gj,sr.yE]})}}return i})();var ae=S(466),z1=S(9631),H1=S(6467),$1=S(3294),ea=S(1397),ta=S(3703),ia=S(6365);S(9974),S(4360),S(5245);var na=S(5024),rd=S(9030);S(8750);let lr=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=o.FsC({type:i,selectors:[["","cdkMenuGroup",""]],hostAttrs:["role","group",1,"cdk-menu-group"],exportAs:["cdkMenuGroup"],standalone:!0,features:[o.Jv_([{provide:na.zP,useClass:na.zP}])]})}}return i})();const cr=new o.nKC("cdk-menu");var pt=function(i){return i[i.nextItem=0]="nextItem",i[i.previousItem=1]="previousItem",i[i.currentItem=2]="currentItem",i}(pt||{});const yt=new o.nKC("cdk-menu-stack"),Q1={provide:yt,deps:[[new o.Xx1,new o.kdw,new o.y_5(yt)]],useFactory:i=>i||new hr},q1=i=>({provide:yt,deps:[[new o.Xx1,new o.kdw,new o.y_5(yt)]],useFactory:t=>t||hr.inline(i)});let K1=0,hr=(()=>{class i{constructor(){this.id=""+K1++,this._elements=[],this._close=new oe.B,this._empty=new oe.B,this._hasFocus=new oe.B,this.closed=this._close,this.hasFocus=this._hasFocus.pipe((0,Nt.Z)(!1),(0,Ts.B)(0),(0,$1.F)()),this.emptied=this._empty,this._inlineMenuOrientation=null}static inline(e){const n=new i;return n._inlineMenuOrientation=e,n}push(e){this._elements.push(e)}close(e,n){const{focusNextOnEmpty:s,focusParentTrigger:r}={...n};if(this._elements.indexOf(e)>=0){let a;do{a=this._elements.pop(),this._close.next({item:a,focusParentTrigger:r})}while(a!==e);this.isEmpty()&&this._empty.next(s)}}closeSubMenuOf(e){let n=!1;if(this._elements.indexOf(e)>=0)for(n=this.peek()!==e;this.peek()!==e;)this._close.next({item:this._elements.pop()});return n}closeAll(e){const{focusNextOnEmpty:n,focusParentTrigger:s}={...e};if(!this.isEmpty()){for(;!this.isEmpty();){const r=this._elements.pop();r&&this._close.next({item:r,focusParentTrigger:s})}this._empty.next(n)}}isEmpty(){return!this._elements.length}length(){return this._elements.length}peek(){return this._elements[this._elements.length-1]}hasInlineMenu(){return null!=this._inlineMenuOrientation}inlineMenuOrientation(){return this._inlineMenuOrientation}setHasFocus(e){this._hasFocus.next(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=o.jDH({token:i,factory:i.\u0275fac})}}return i})();const dr=new o.nKC("cdk-menu-trigger"),J1=new o.nKC("cdk-menu-scroll-strategy",{providedIn:"root",factory:()=>{const i=(0,o.WQX)(Vt);return()=>i.scrollStrategies.reposition()}});let ad=(()=>{class i{constructor(){this.injector=(0,o.WQX)(o.zZn),this.viewContainerRef=(0,o.WQX)(o.c1b),this.menuStack=(0,o.WQX)(yt),this.menuScrollStrategy=(0,o.WQX)(J1),this.opened=new o.bkB,this.closed=new o.bkB,this.overlayRef=null,this.destroyed=new oe.B,this.stopOutsideClicksListener=(0,Ti.h)(this.closed,this.destroyed)}ngOnDestroy(){this._destroyOverlay(),this.destroyed.next(),this.destroyed.complete()}isOpen(){return!!this.overlayRef?.hasAttached()}registerChildMenu(e){this.childMenu=e}getMenuContentPortal(){return this.menuTemplateRef&&(!this._menuPortal||this.menuTemplateRef!==this._menuPortal?.templateRef)&&(this._menuPortal=new ee(this.menuTemplateRef,this.viewContainerRef,this.menuData,this._getChildMenuInjector())),this._menuPortal}isElementInsideMenuStack(e){for(let n=e;n;n=n?.parentElement??null)if(n.getAttribute("data-cdk-menu-stack-id")===this.menuStack.id)return!0;return!1}_destroyOverlay(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)}_getChildMenuInjector(){return this._childMenuInjector=this._childMenuInjector||o.zZn.create({providers:[{provide:dr,useValue:this},{provide:yt,useValue:this.menuStack}],parent:this.injector}),this._childMenuInjector}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=o.FsC({type:i,hostVars:2,hostBindings:function(n,s){2&n&&o.BMQ("aria-controls",null==s.childMenu?null:s.childMenu.id)("data-cdk-menu-stack-id",s.menuStack.id)},standalone:!0})}}return i})();const ur=new o.nKC("cdk-menu-aim");function cd(i,t){if(!t.isTrusted)return!1;const e=i.nativeElement,n=t.keyCode;return"BUTTON"!==e.nodeName||e.disabled?"A"===e.nodeName&&n===I.Fm:n===I.Fm||n===I.t6}let sa=(()=>{class i extends ad{constructor(){super(),this._elementRef=(0,o.WQX)(o.aKT),this._overlay=(0,o.WQX)(Vt),this._ngZone=(0,o.WQX)(o.SKi),this._changeDetectorRef=(0,o.WQX)(o.gRc),this._inputModalityDetector=(0,o.WQX)(Qt.Uc),this._directionality=(0,o.WQX)(ki.dS,{optional:!0}),this._parentMenu=(0,o.WQX)(cr,{optional:!0}),this._menuAim=(0,o.WQX)(ur,{optional:!0}),this._setRole(),this._registerCloseHandler(),this._subscribeToMenuStackClosed(),this._subscribeToMouseEnter(),this._subscribeToMenuStackHasFocus(),this._setType()}toggle(){this.isOpen()?this.close():this.open()}open(){!this.isOpen()&&null!=this.menuTemplateRef&&(this.opened.next(),this.overlayRef=this.overlayRef||this._overlay.create(this._getOverlayConfig()),this.overlayRef.attach(this.getMenuContentPortal()),this._changeDetectorRef.markForCheck(),this._subscribeToOutsideClicks())}close(){this.isOpen()&&(this.closed.next(),this.overlayRef.detach(),this._changeDetectorRef.markForCheck()),this._closeSiblingTriggers()}getMenu(){return this.childMenu}_toggleOnKeydown(e){const n="vertical"===this._parentMenu?.orientation;switch(e.keyCode){case I.t6:case I.Fm:!(0,I.rp)(e)&&!cd(this._elementRef,e)&&(this.toggle(),this.childMenu?.focusFirstItem("keyboard"));break;case I.LE:(0,I.rp)(e)||this._parentMenu&&n&&"rtl"!==this._directionality?.value&&(e.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case I.UQ:(0,I.rp)(e)||this._parentMenu&&n&&"rtl"===this._directionality?.value&&(e.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case I.n6:case I.i7:(0,I.rp)(e)||n||(e.preventDefault(),this.open(),e.keyCode===I.n6?this.childMenu?.focusFirstItem("keyboard"):this.childMenu?.focusLastItem("keyboard"))}}_handleClick(){this.toggle(),this.childMenu?.focusFirstItem("mouse")}_setHasFocus(e){this._parentMenu||this.menuStack.setHasFocus(e)}_subscribeToMouseEnter(){this._ngZone.runOutsideAngular(()=>{(0,Hi.R)(this._elementRef.nativeElement,"mouseenter").pipe((0,nt.p)(()=>"touch"!==this._inputModalityDetector.mostRecentModality&&!this.menuStack.isEmpty()&&!this.isOpen()),(0,ue.Q)(this.destroyed)).subscribe(()=>{const e=()=>this._ngZone.run(()=>{this._closeSiblingTriggers(),this.open()});this._menuAim?this._menuAim.toggle(e):e()})})}_closeSiblingTriggers(){this._parentMenu?!this.menuStack.closeSubMenuOf(this._parentMenu)&&this.menuStack.peek()!==this._parentMenu&&this.menuStack.closeAll():this.menuStack.closeAll()}_getOverlayConfig(){return new rr({positionStrategy:this._getOverlayPositionStrategy(),scrollStrategy:this.menuScrollStrategy(),direction:this._directionality||void 0})}_getOverlayPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._elementRef).withLockedPosition().withGrowAfterOpen().withPositions(this._getOverlayPositions())}_getOverlayPositions(){return this.menuPosition??(this._parentMenu&&"horizontal"!==this._parentMenu.orientation?v1:ed)}_registerCloseHandler(){this._parentMenu||this.menuStack.closed.pipe((0,ue.Q)(this.destroyed)).subscribe(({item:e})=>{e===this.childMenu&&this.close()})}_subscribeToOutsideClicks(){this.overlayRef&&this.overlayRef.outsidePointerEvents().pipe((0,ue.Q)(this.stopOutsideClicksListener)).subscribe(e=>{const n=(0,ut.Fb)(e),s=this._elementRef.nativeElement;n!==s&&!s.contains(n)&&(this.isElementInsideMenuStack(n)?this._closeSiblingTriggers():this.menuStack.closeAll())})}_subscribeToMenuStackHasFocus(){this._parentMenu||this.menuStack.hasFocus.pipe((0,ue.Q)(this.destroyed)).subscribe(e=>{e||this.menuStack.closeAll()})}_subscribeToMenuStackClosed(){this._parentMenu||this.menuStack.closed.subscribe(({focusParentTrigger:e})=>{e&&!this.menuStack.length()&&this._elementRef.nativeElement.focus()})}_setRole(){this._parentMenu||this._elementRef.nativeElement.setAttribute("role","button")}_setType(){const e=this._elementRef.nativeElement;"BUTTON"===e.nodeName&&!e.getAttribute("type")&&e.setAttribute("type","button")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=o.FsC({type:i,selectors:[["","cdkMenuTriggerFor",""]],hostAttrs:[1,"cdk-menu-trigger"],hostVars:2,hostBindings:function(n,s){1&n&&o.bIt("focusin",function(){return s._setHasFocus(!0)})("focusout",function(){return s._setHasFocus(!1)})("keydown",function(a){return s._toggleOnKeydown(a)})("click",function(){return s._handleClick()}),2&n&&o.BMQ("aria-haspopup",s.menuTemplateRef?"menu":null)("aria-expanded",null==s.menuTemplateRef?null:s.isOpen())},inputs:{menuTemplateRef:[0,"cdkMenuTriggerFor","menuTemplateRef"],menuPosition:[0,"cdkMenuPosition","menuPosition"],menuData:[0,"cdkMenuTriggerData","menuData"]},outputs:{opened:"cdkMenuOpened",closed:"cdkMenuClosed"},exportAs:["cdkMenuTriggerFor"],standalone:!0,features:[o.Jv_([{provide:dr,useExisting:i},Q1]),o.Vt3]})}}return i})(),nn=(()=>{class i{get hasMenu(){return null!=this._menuTrigger?.menuTemplateRef}constructor(){this._dir=(0,o.WQX)(ki.dS,{optional:!0}),this._elementRef=(0,o.WQX)(o.aKT),this._ngZone=(0,o.WQX)(o.SKi),this._inputModalityDetector=(0,o.WQX)(Qt.Uc),this._menuAim=(0,o.WQX)(ur,{optional:!0}),this._menuStack=(0,o.WQX)(yt),this._parentMenu=(0,o.WQX)(cr,{optional:!0}),this._menuTrigger=(0,o.WQX)(sa,{optional:!0,self:!0}),this.disabled=!1,this.triggered=new o.bkB,this._tabindex=-1,this.closeOnSpacebarTrigger=!0,this.destroyed=new oe.B,this._setupMouseEnter(),this._setType(),this._isStandaloneItem()&&(this._tabindex=0)}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}trigger(e){const{keepOpen:n}={...e};!this.disabled&&!this.hasMenu&&(this.triggered.next(),n||this._menuStack.closeAll({focusParentTrigger:!0}))}isMenuOpen(){return!!this._menuTrigger?.isOpen()}getMenu(){return this._menuTrigger?.getMenu()}getMenuTrigger(){return this._menuTrigger}getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}_resetTabIndex(){this._isStandaloneItem()||(this._tabindex=-1)}_setTabIndex(e){this.disabled||(!e||!this._menuStack.isEmpty())&&(this._tabindex=0)}_onKeydown(e){switch(e.keyCode){case I.t6:case I.Fm:!(0,I.rp)(e)&&!cd(this._elementRef,e)&&this.trigger({keepOpen:e.keyCode===I.t6&&!this.closeOnSpacebarTrigger});break;case I.LE:(0,I.rp)(e)||this._parentMenu&&this._isParentVertical()&&("rtl"!==this._dir?.value?this._forwardArrowPressed(e):this._backArrowPressed(e));break;case I.UQ:(0,I.rp)(e)||this._parentMenu&&this._isParentVertical()&&("rtl"!==this._dir?.value?this._backArrowPressed(e):this._forwardArrowPressed(e))}}_isStandaloneItem(){return!this._parentMenu}_backArrowPressed(e){const n=this._parentMenu;(this._menuStack.hasInlineMenu()||this._menuStack.length()>1)&&(e.preventDefault(),this._menuStack.close(n,{focusNextOnEmpty:"horizontal"===this._menuStack.inlineMenuOrientation()?pt.previousItem:pt.currentItem,focusParentTrigger:!0}))}_forwardArrowPressed(e){!this.hasMenu&&"horizontal"===this._menuStack.inlineMenuOrientation()&&(e.preventDefault(),this._menuStack.closeAll({focusNextOnEmpty:pt.nextItem,focusParentTrigger:!0}))}_setupMouseEnter(){if(!this._isStandaloneItem()){const e=()=>this._ngZone.run(()=>this._menuStack.closeSubMenuOf(this._parentMenu));this._ngZone.runOutsideAngular(()=>(0,Hi.R)(this._elementRef.nativeElement,"mouseenter").pipe((0,nt.p)(()=>"touch"!==this._inputModalityDetector.mostRecentModality&&!this._menuStack.isEmpty()&&!this.hasMenu),(0,ue.Q)(this.destroyed)).subscribe(()=>{this._menuAim?this._menuAim.toggle(e):e()}))}}_isParentVertical(){return"vertical"===this._parentMenu?.orientation}_setType(){const e=this._elementRef.nativeElement;"BUTTON"===e.nodeName&&!e.getAttribute("type")&&e.setAttribute("type","button")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=o.FsC({type:i,selectors:[["","cdkMenuItem",""]],hostAttrs:["role","menuitem",1,"cdk-menu-item"],hostVars:2,hostBindings:function(n,s){1&n&&o.bIt("blur",function(){return s._resetTabIndex()})("focus",function(){return s._setTabIndex()})("click",function(){return s.trigger()})("keydown",function(a){return s._onKeydown(a)}),2&n&&(o.Mr5("tabindex",s._tabindex),o.BMQ("aria-disabled",s.disabled||null))},inputs:{disabled:[2,"cdkMenuItemDisabled","disabled",o.L39],typeaheadLabel:[0,"cdkMenuitemTypeaheadLabel","typeaheadLabel"]},outputs:{triggered:"cdkMenuItemTriggered"},exportAs:["cdkMenuItem"],standalone:!0,features:[o.GFd]})}}return i})();class oC{constructor(t){this._items=t,this.entered=this._getItemPointerEntries(),this.exited=this._getItemPointerExits(),this._destroyed=new oe.B,this.entered.subscribe(e=>this.activeElement=e),this.exited.subscribe(()=>{this.previousElement=this.activeElement,this.activeElement=void 0})}destroy(){this._destroyed.next(),this._destroyed.complete()}_getItemPointerEntries(){return(0,rd.v)(()=>this._items.changes.pipe((0,Nt.Z)(this._items),(0,ea.Z)(t=>t.map(e=>(0,Hi.R)(e._elementRef.nativeElement,"mouseenter").pipe((0,ta.u)(e),(0,ue.Q)(this._items.changes)))),(0,ia.U)()))}_getItemPointerExits(){return(0,rd.v)(()=>this._items.changes.pipe((0,Nt.Z)(this._items),(0,ea.Z)(t=>t.map(e=>(0,Hi.R)(e._elementRef.nativeElement,"mouseout").pipe((0,ta.u)(e),(0,ue.Q)(this._items.changes)))),(0,ia.U)()))}}let aC=0,hd=(()=>{class i extends lr{constructor(){super(...arguments),this.nativeElement=(0,o.WQX)(o.aKT).nativeElement,this.ngZone=(0,o.WQX)(o.SKi),this.menuStack=(0,o.WQX)(yt),this.menuAim=(0,o.WQX)(ur,{optional:!0,self:!0}),this.dir=(0,o.WQX)(ki.dS,{optional:!0}),this.id="cdk-menu-"+aC++,this.orientation="vertical",this.isInline=!1,this.destroyed=new oe.B,this._menuStackHasFocus=(0,o.vPA)(!1),this._tabIndexSignal=(0,o.EWP)(()=>{const e=this._menuStackHasFocus()?-1:0;return this.isInline?e:null})}ngAfterContentInit(){this.isInline||this.menuStack.push(this),this._setKeyManager(),this._subscribeToMenuStackHasFocus(),this._subscribeToMenuOpen(),this._subscribeToMenuStackClosed(),this._setUpPointerTracker()}ngOnDestroy(){this.keyManager?.destroy(),this.destroyed.next(),this.destroyed.complete(),this.pointerTracker?.destroy()}focusFirstItem(e="program"){this.keyManager.setFocusOrigin(e),this.keyManager.setFirstItemActive()}focusLastItem(e="program"){this.keyManager.setFocusOrigin(e),this.keyManager.setLastItemActive()}_getTabIndex(){return this._tabIndexSignal()}closeOpenMenu(e,n){const{focusParentTrigger:s}={...n},r=this.keyManager,a=this.triggerItem;e===a?.getMenuTrigger()?.getMenu()&&(a?.getMenuTrigger()?.close(),s&&(a?r.setActiveItem(a):r.setFirstItemActive()))}_setKeyManager(){this.keyManager=new Qt.Bu(this.items).withWrap().withTypeAhead().withHomeAndEnd(),"horizontal"===this.orientation?this.keyManager.withHorizontalOrientation(this.dir?.value||"ltr"):this.keyManager.withVerticalOrientation()}_subscribeToMenuOpen(){const e=(0,Ti.h)(this.items.changes,this.destroyed);this.items.changes.pipe((0,Nt.Z)(this.items),(0,ea.Z)(n=>n.filter(s=>s.hasMenu).map(s=>s.getMenuTrigger().opened.pipe((0,ta.u)(s),(0,ue.Q)(e)))),(0,ia.U)(),(0,qt.n)(n=>(this.triggerItem=n,n.getMenuTrigger().closed)),(0,ue.Q)(this.destroyed)).subscribe(()=>this.triggerItem=void 0)}_subscribeToMenuStackClosed(){this.menuStack.closed.pipe((0,ue.Q)(this.destroyed)).subscribe(({item:e,focusParentTrigger:n})=>this.closeOpenMenu(e,{focusParentTrigger:n}))}_subscribeToMenuStackHasFocus(){this.isInline&&this.menuStack.hasFocus.pipe((0,ue.Q)(this.destroyed)).subscribe(e=>{this._menuStackHasFocus.set(e)})}_setUpPointerTracker(){this.menuAim&&(this.ngZone.runOutsideAngular(()=>{this.pointerTracker=new oC(this.items)}),this.menuAim.initialize(this,this.pointerTracker))}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=o.xGo(i)))(s||i)}})()}static{this.\u0275dir=o.FsC({type:i,contentQueries:function(n,s,r){if(1&n&&o.wni(r,nn,5),2&n){let a;o.mGM(a=o.lsd())&&(s.items=a)}},hostAttrs:["role","menu"],hostVars:4,hostBindings:function(n,s){1&n&&o.bIt("focus",function(){return s.focusFirstItem()})("focusin",function(){return s.menuStack.setHasFocus(!0)})("focusout",function(){return s.menuStack.setHasFocus(!1)}),2&n&&(o.Mr5("tabindex",s._getTabIndex())("id",s.id),o.BMQ("aria-orientation",s.orientation)("data-cdk-menu-stack-id",s.menuStack.id))},inputs:{id:"id"},standalone:!0,features:[o.Vt3]})}}return i})(),dd=(()=>{class i extends hd{constructor(){super(),this._parentTrigger=(0,o.WQX)(dr,{optional:!0}),this.closed=new o.bkB,this.orientation="vertical",this.isInline=!this._parentTrigger,this.destroyed.subscribe(this.closed),this._parentTrigger?.registerChildMenu(this)}ngAfterContentInit(){super.ngAfterContentInit(),this._subscribeToMenuStackEmptied()}ngOnDestroy(){super.ngOnDestroy(),this.closed.complete()}_handleKeyEvent(e){const n=this.keyManager;switch(e.keyCode){case I.UQ:case I.LE:(0,I.rp)(e)||(e.preventDefault(),n.setFocusOrigin("keyboard"),n.onKeydown(e));break;case I._f:(0,I.rp)(e)||(e.preventDefault(),this.menuStack.close(this,{focusNextOnEmpty:pt.currentItem,focusParentTrigger:!0}));break;case I.wn:(0,I.rp)(e,"altKey","metaKey","ctrlKey")||this.menuStack.closeAll({focusParentTrigger:!0});break;default:n.onKeydown(e)}}_toggleMenuFocus(e){const n=this.keyManager;switch(e){case pt.nextItem:n.setFocusOrigin("keyboard"),n.setNextItemActive();break;case pt.previousItem:n.setFocusOrigin("keyboard"),n.setPreviousItemActive();break;case pt.currentItem:n.activeItem&&(n.setFocusOrigin("keyboard"),n.setActiveItem(n.activeItem))}}_subscribeToMenuStackEmptied(){this.menuStack.emptied.pipe((0,ue.Q)(this.destroyed)).subscribe(e=>this._toggleMenuFocus(e))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=o.FsC({type:i,selectors:[["","cdkMenu",""]],hostAttrs:["role","menu",1,"cdk-menu"],hostVars:2,hostBindings:function(n,s){1&n&&o.bIt("keydown",function(a){return s._handleKeyEvent(a)}),2&n&&o.AVh("cdk-menu-inline",s.isInline)},outputs:{closed:"closed"},exportAs:["cdkMenu"],standalone:!0,features:[o.Jv_([{provide:lr,useExisting:i},{provide:cr,useExisting:i},q1("vertical")]),o.Vt3]})}}return i})(),mC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=o.$C({type:i})}static{this.\u0275inj=o.G2t({imports:[id]})}}return i})();var zt=S(8516),P=S(9417),gC=S(4402);const ra=i=>{const t=(i=>{const t={};return Object.keys(i).forEach(e=>{i[e]&&(t[e]=i[e])}),t})(i);return Object.entries(t).map(([e,n])=>`${(i=>i.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`))(e)}:${n}`).join(";")};class oa extends Error{constructor(t){super(t),this.name=this.constructor.name}}const ud=()=>`${Date.now().toString(36)}${Math.random().toString(36).substring(2,7)}`;function Fe(i){this.content=i}Fe.prototype={constructor:Fe,find:function(i){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===i)return t;return-1},get:function(i){var t=this.find(i);return-1==t?void 0:this.content[t+1]},update:function(i,t,e){var n=e&&e!=i?this.remove(e):this,s=n.find(i),r=n.content.slice();return-1==s?r.push(e||i,t):(r[s+1]=t,e&&(r[s]=e)),new Fe(r)},remove:function(i){var t=this.find(i);if(-1==t)return this;var e=this.content.slice();return e.splice(t,2),new Fe(e)},addToStart:function(i,t){return new Fe([i,t].concat(this.remove(i).content))},addToEnd:function(i,t){var e=this.remove(i).content.slice();return e.push(i,t),new Fe(e)},addBefore:function(i,t,e){var n=this.remove(t),s=n.content.slice(),r=n.find(i);return s.splice(-1==r?s.length:r,0,t,e),new Fe(s)},forEach:function(i){for(var t=0;t<this.content.length;t+=2)i(this.content[t],this.content[t+1])},prepend:function(i){return(i=Fe.from(i)).size?new Fe(i.content.concat(this.subtract(i).content)):this},append:function(i){return(i=Fe.from(i)).size?new Fe(this.subtract(i).content.concat(i.content)):this},subtract:function(i){var t=this;i=Fe.from(i);for(var e=0;e<i.content.length;e+=2)t=t.remove(i.content[e]);return t},toObject:function(){var i={};return this.forEach(function(t,e){i[t]=e}),i},get size(){return this.content.length>>1}},Fe.from=function(i){if(i instanceof Fe)return i;var t=[];if(i)for(var e in i)t.push(e,i[e]);return new Fe(t)};const pd=Fe;function md(i,t,e){for(let n=0;;n++){if(n==i.childCount||n==t.childCount)return i.childCount==t.childCount?null:e;let s=i.child(n),r=t.child(n);if(s!=r){if(!s.sameMarkup(r))return e;if(s.isText&&s.text!=r.text){for(let a=0;s.text[a]==r.text[a];a++)e++;return e}if(s.content.size||r.content.size){let a=md(s.content,r.content,e+1);if(null!=a)return a}e+=s.nodeSize}else e+=s.nodeSize}}function gd(i,t,e,n){for(let s=i.childCount,r=t.childCount;;){if(0==s||0==r)return s==r?null:{a:e,b:n};let a=i.child(--s),l=t.child(--r),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:e,b:n};if(a.isText&&a.text!=l.text){let h=0,d=Math.min(a.text.length,l.text.length);for(;h<d&&a.text[a.text.length-h-1]==l.text[l.text.length-h-1];)h++,e--,n--;return{a:e,b:n}}if(a.content.size||l.content.size){let h=gd(a.content,l.content,e-1,n-1);if(h)return h}e-=c,n-=c}else e-=c,n-=c}}class v{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let n=0;n<t.length;n++)this.size+=t[n].nodeSize}nodesBetween(t,e,n,s=0,r){for(let a=0,l=0;l<e;a++){let c=this.content[a],h=l+c.nodeSize;if(h>t&&!1!==n(c,s+l,r||null,a)&&c.content.size){let d=l+1;c.nodesBetween(Math.max(0,t-d),Math.min(c.content.size,e-d),n,s+d)}l=h}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,n,s){let r="",a=!0;return this.nodesBetween(t,e,(l,c)=>{let h=l.isText?l.text.slice(Math.max(t,c)-c,e-c):l.isLeaf?s?"function"==typeof s?s(l):s:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&h||l.isTextblock)&&n&&(a?a=!1:r+=n),r+=h},0),r}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,n=t.firstChild,s=this.content.slice(),r=0;for(e.isText&&e.sameMarkup(n)&&(s[s.length-1]=e.withText(e.text+n.text),r=1);r<t.content.length;r++)s.push(t.content[r]);return new v(s,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let n=[],s=0;if(e>t)for(let r=0,a=0;a<e;r++){let l=this.content[r],c=a+l.nodeSize;c>t&&((a<t||c>e)&&(l=l.isText?l.cut(Math.max(0,t-a),Math.min(l.text.length,e-a)):l.cut(Math.max(0,t-a-1),Math.min(l.content.size,e-a-1))),n.push(l),s+=l.nodeSize),a=c}return new v(n,s)}cutByIndex(t,e){return t==e?v.empty:0==t&&e==this.content.length?this:new v(this.content.slice(t,e))}replaceChild(t,e){let n=this.content[t];if(n==e)return this;let s=this.content.slice(),r=this.size+e.nodeSize-n.nodeSize;return s[t]=e,new v(s,r)}addToStart(t){return new v([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new v(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,n=0;e<this.content.length;e++){let s=this.content[e];t(s,n,e),n+=s.nodeSize}}findDiffStart(t,e=0){return md(this,t,e)}findDiffEnd(t,e=this.size,n=t.size){return gd(this,t,e,n)}findIndex(t,e=-1){if(0==t)return pr(0,t);if(t==this.size)return pr(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,s=0;;n++){let a=s+this.child(n).nodeSize;if(a>=t)return a==t||e>0?pr(n+1,a):pr(n,s);s=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return v.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new v(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return v.empty;let e,n=0;for(let s=0;s<t.length;s++){let r=t[s];n+=r.nodeSize,s&&r.isText&&t[s-1].sameMarkup(r)?(e||(e=t.slice(0,s)),e[e.length-1]=r.withText(e[e.length-1].text+r.text)):e&&e.push(r)}return new v(e||t,n)}static from(t){if(!t)return v.empty;if(t instanceof v)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new v([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}v.empty=new v([],0);const aa={index:0,offset:0};function pr(i,t){return aa.index=i,aa.offset=t,aa}function mr(i,t){if(i===t)return!0;if(!i||"object"!=typeof i||!t||"object"!=typeof t)return!1;let e=Array.isArray(i);if(Array.isArray(t)!=e)return!1;if(e){if(i.length!=t.length)return!1;for(let n=0;n<i.length;n++)if(!mr(i[n],t[n]))return!1}else{for(let n in i)if(!(n in t)||!mr(i[n],t[n]))return!1;for(let n in t)if(!(n in i))return!1}return!0}let te=(()=>{class i{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,s=!1;for(let r=0;r<e.length;r++){let a=e[r];if(this.eq(a))return e;if(this.type.excludes(a.type))n||(n=e.slice(0,r));else{if(a.type.excludes(this.type))return e;!s&&a.type.rank>this.type.rank&&(n||(n=e.slice(0,r)),n.push(this),s=!0),n&&n.push(a)}}return n||(n=e.slice()),s||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&mr(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let s=e.marks[n.type];if(!s)throw new RangeError(`There is no mark type ${n.type} in this schema`);let r=s.create(n.attrs);return s.checkAttrs(r.attrs),r}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let s=0;s<e.length;s++)if(!e[s].eq(n[s]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return i.none;if(e instanceof i)return[e];let n=e.slice();return n.sort((s,r)=>s.type.rank-r.type.rank),n}}return i.none=[],i})();class gr extends Error{}class w{constructor(t,e,n){this.content=t,this.openStart=e,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let n=_d(this.content,t+this.openStart,e);return n&&new w(n,this.openStart,this.openEnd)}removeBetween(t,e){return new w(fd(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return w.empty;let n=e.openStart||0,s=e.openEnd||0;if("number"!=typeof n||"number"!=typeof s)throw new RangeError("Invalid input for Slice.fromJSON");return new w(v.fromJSON(t,e.content),n,s)}static maxOpen(t,e=!0){let n=0,s=0;for(let r=t.firstChild;r&&!r.isLeaf&&(e||!r.type.spec.isolating);r=r.firstChild)n++;for(let r=t.lastChild;r&&!r.isLeaf&&(e||!r.type.spec.isolating);r=r.lastChild)s++;return new w(t,n,s)}}function fd(i,t,e){let{index:n,offset:s}=i.findIndex(t),r=i.maybeChild(n),{index:a,offset:l}=i.findIndex(e);if(s==t||r.isText){if(l!=e&&!i.child(a).isText)throw new RangeError("Removing non-flat range");return i.cut(0,t).append(i.cut(e))}if(n!=a)throw new RangeError("Removing non-flat range");return i.replaceChild(n,r.copy(fd(r.content,t-s-1,e-s-1)))}function _d(i,t,e,n){let{index:s,offset:r}=i.findIndex(t),a=i.maybeChild(s);if(r==t||a.isText)return n&&!n.canReplace(s,s,e)?null:i.cut(0,t).append(e).append(i.cut(t));let l=_d(a.content,t-r-1,e);return l&&i.replaceChild(s,a.copy(l))}function yC(i,t,e){if(e.openStart>i.depth)throw new gr("Inserted content deeper than insertion position");if(i.depth-e.openStart!=t.depth-e.openEnd)throw new gr("Inconsistent open depths");return xd(i,t,e,0)}function xd(i,t,e,n){let s=i.index(n),r=i.node(n);if(s==t.index(n)&&n<i.depth-e.openStart){let a=xd(i,t,e,n+1);return r.copy(r.content.replaceChild(s,a))}if(e.content.size){if(e.openStart||e.openEnd||i.depth!=n||t.depth!=n){let{start:a,end:l}=function bC(i,t){let e=t.depth-i.openStart,s=t.node(e).copy(i.content);for(let r=e-1;r>=0;r--)s=t.node(r).copy(v.from(s));return{start:s.resolveNoCache(i.openStart+e),end:s.resolveNoCache(s.content.size-i.openEnd-e)}}(e,i);return Ai(r,yd(i,a,l,t,n))}{let a=i.parent,l=a.content;return Ai(a,l.cut(0,i.parentOffset).append(e.content).append(l.cut(t.parentOffset)))}}return Ai(r,fr(i,t,n))}function vd(i,t){if(!t.type.compatibleContent(i.type))throw new gr("Cannot join "+t.type.name+" onto "+i.type.name)}function la(i,t,e){let n=i.node(e);return vd(n,t.node(e)),n}function Si(i,t){let e=t.length-1;e>=0&&i.isText&&i.sameMarkup(t[e])?t[e]=i.withText(t[e].text+i.text):t.push(i)}function Qn(i,t,e,n){let s=(t||i).node(e),r=0,a=t?t.index(e):s.childCount;i&&(r=i.index(e),i.depth>e?r++:i.textOffset&&(Si(i.nodeAfter,n),r++));for(let l=r;l<a;l++)Si(s.child(l),n);t&&t.depth==e&&t.textOffset&&Si(t.nodeBefore,n)}function Ai(i,t){return i.type.checkContent(t),i.copy(t)}function yd(i,t,e,n,s){let r=i.depth>s&&la(i,t,s+1),a=n.depth>s&&la(e,n,s+1),l=[];return Qn(null,i,s,l),r&&a&&t.index(s)==e.index(s)?(vd(r,a),Si(Ai(r,yd(i,t,e,n,s+1)),l)):(r&&Si(Ai(r,fr(i,t,s+1)),l),Qn(t,e,s,l),a&&Si(Ai(a,fr(e,n,s+1)),l)),Qn(n,null,s,l),new v(l)}function fr(i,t,e){let n=[];return Qn(null,i,e,n),i.depth>e&&Si(Ai(la(i,t,e+1),fr(i,t,e+1)),n),Qn(t,null,e,n),new v(n)}w.empty=new w(v.empty,0,0);class qn{constructor(t,e,n){this.pos=t,this.path=e,this.parentOffset=n,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],s=t.child(e);return n?t.child(e).cut(n):s}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let n=this.path[3*e],s=0==e?0:this.path[3*e-1]+1;for(let r=0;r<t;r++)s+=n.child(r).nodeSize;return s}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return te.none;if(this.textOffset)return t.child(e).marks;let n=t.maybeChild(e-1),s=t.maybeChild(e);if(!n){let l=n;n=s,s=l}let r=n.marks;for(var a=0;a<r.length;a++)!1===r[a].type.spec.inclusive&&(!s||!r[a].isInSet(s.marks))&&(r=r[a--].removeFromSet(r));return r}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let n=e.marks,s=t.parent.maybeChild(t.index());for(var r=0;r<n.length;r++)!1===n[r].type.spec.inclusive&&(!s||!n[r].isInSet(s.marks))&&(n=n[r--].removeFromSet(n));return n}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new _r(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let n=[],s=0,r=e;for(let a=t;;){let{index:l,offset:c}=a.content.findIndex(r),h=r-c;if(n.push(a,l,s+c),!h||(a=a.child(l),a.isText))break;r=h-1,s+=c+1}return new qn(e,n,r)}static resolveCached(t,e){let n=bd.get(t);if(n)for(let r=0;r<n.elts.length;r++){let a=n.elts[r];if(a.pos==e)return a}else bd.set(t,n=new CC);let s=n.elts[n.i]=qn.resolve(t,e);return n.i=(n.i+1)%TC,s}}class CC{constructor(){this.elts=[],this.i=0}}const TC=12,bd=new WeakMap;class _r{constructor(t,e,n){this.$from=t,this.$to=e,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const kC=Object.create(null);class bt{constructor(t,e,n,s=te.none){this.type=t,this.attrs=e,this.marks=s,this.content=n||v.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,n,s=0){this.content.nodesBetween(t,e,n,s,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,n,s){return this.content.textBetween(t,e,n,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,n){return this.type==t&&mr(this.attrs,e||t.defaultAttrs||kC)&&te.sameSet(this.marks,n||te.none)}copy(t=null){return t==this.content?this:new bt(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new bt(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,n=!1){if(t==e)return w.empty;let s=this.resolve(t),r=this.resolve(e),a=n?0:s.sharedDepth(e),l=s.start(a),h=s.node(a).content.cut(s.pos-l,r.pos-l);return new w(h,s.depth-a,r.depth-a)}replace(t,e,n){return yC(this.resolve(t),this.resolve(e),n)}nodeAt(t){for(let e=this;;){let{index:n,offset:s}=e.content.findIndex(t);if(e=e.maybeChild(n),!e)return null;if(s==t||e.isText)return e;t-=s+1}}childAfter(t){let{index:e,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:n}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(e),index:e,offset:n};let s=this.content.child(e-1);return{node:s,index:e-1,offset:n-s.nodeSize}}resolve(t){return qn.resolveCached(this,t)}resolveNoCache(t){return qn.resolve(this,t)}rangeHasMark(t,e,n){let s=!1;return e>t&&this.nodesBetween(t,e,r=>(n.isInSet(r.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Cd(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,n=v.empty,s=0,r=n.childCount){let a=this.contentMatchAt(t).matchFragment(n,s,r),l=a&&a.matchFragment(this.content,e);if(!l||!l.validEnd)return!1;for(let c=s;c<r;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0}canReplaceWith(t,e,n,s){if(s&&!this.type.allowsMarks(s))return!1;let r=this.contentMatchAt(t).matchType(n),a=r&&r.matchFragment(this.content,e);return!!a&&a.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=te.none;for(let e=0;e<this.marks.length;e++){let n=this.marks[e];n.type.checkAttrs(n.attrs),t=n.addToSet(t)}if(!te.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(e=>e.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let n;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}let s=v.fromJSON(t,e.content),r=t.nodeType(e.type).create(e.attrs,s,n);return r.type.checkAttrs(r.attrs),r}}bt.prototype.text=void 0;class xr extends bt{constructor(t,e,n,s){if(super(t,e,null,s),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Cd(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new xr(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new xr(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function Cd(i,t){for(let e=i.length-1;e>=0;e--)t=i[e].type.name+"("+t+")";return t}class Di{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let n=new wC(t,e);if(null==n.next)return Di.empty;let s=Td(n);n.next&&n.err("Unexpected trailing text");let r=function FC(i){let t=Object.create(null);return function e(n){let s=[];n.forEach(a=>{i[a].forEach(({term:l,to:c})=>{if(!l)return;let h;for(let d=0;d<s.length;d++)s[d][0]==l&&(h=s[d][1]);Sd(i,c).forEach(d=>{h||s.push([l,h=[]]),-1==h.indexOf(d)&&h.push(d)})})});let r=t[n.join(",")]=new Di(n.indexOf(i.length-1)>-1);for(let a=0;a<s.length;a++){let l=s[a][1].sort(wd);r.next.push({type:s[a][0],next:t[l.join(",")]||e(l)})}return r}(Sd(i,0))}(function EC(i){let t=[[]];return s(function r(a,l){if("choice"==a.type)return a.exprs.reduce((c,h)=>c.concat(r(h,l)),[]);if("seq"!=a.type){if("star"==a.type){let c=e();return n(l,c),s(r(a.expr,c),c),[n(c)]}if("plus"==a.type){let c=e();return s(r(a.expr,l),c),s(r(a.expr,c),c),[n(c)]}if("opt"==a.type)return[n(l)].concat(r(a.expr,l));if("range"==a.type){let c=l;for(let h=0;h<a.min;h++){let d=e();s(r(a.expr,c),d),c=d}if(-1==a.max)s(r(a.expr,c),c);else for(let h=a.min;h<a.max;h++){let d=e();n(c,d),s(r(a.expr,c),d),c=d}return[n(c)]}if("name"==a.type)return[n(l,void 0,a.value)];throw new Error("Unknown expr type")}for(let c=0;;c++){let h=r(a.exprs[c],l);if(c==a.exprs.length-1)return h;s(h,l=e())}}(i,0),e()),t;function e(){return t.push([])-1}function n(a,l,c){let h={term:c,to:l};return t[a].push(h),h}function s(a,l){a.forEach(c=>c.to=l)}}(s));return function OC(i,t){for(let e=0,n=[i];e<n.length;e++){let s=n[e],r=!s.validEnd,a=[];for(let l=0;l<s.next.length;l++){let{type:c,next:h}=s.next[l];a.push(c.name),r&&!(c.isText||c.hasRequiredAttrs())&&(r=!1),-1==n.indexOf(h)&&n.push(h)}r&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(r,n),r}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,n=t.childCount){let s=this;for(let r=e;s&&r<n;r++)s=s.matchType(t.child(r).type);return s}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}fillBefore(t,e=!1,n=0){let s=[this];return function r(a,l){let c=a.matchFragment(t,n);if(c&&(!e||c.validEnd))return v.from(l.map(h=>h.createAndFill()));for(let h=0;h<a.next.length;h++){let{type:d,next:u}=a.next[h];if(!d.isText&&!d.hasRequiredAttrs()&&-1==s.indexOf(u)){s.push(u);let p=r(u,l.concat(d));if(p)return p}}return null}(this,[])}findWrapping(t){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let s=n.shift(),r=s.match;if(r.matchType(t)){let a=[];for(let l=s;l.type;l=l.via)a.push(l.type);return a.reverse()}for(let a=0;a<r.next.length;a++){let{type:l,next:c}=r.next[a];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in e)&&(!s.type||c.validEnd)&&(n.push({match:l.contentMatch,type:l,via:s}),e[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];return function e(n){t.push(n);for(let s=0;s<n.next.length;s++)-1==t.indexOf(n.next[s].next)&&e(n.next[s].next)}(this),t.map((n,s)=>{let r=s+(n.validEnd?"*":" ")+" ";for(let a=0;a<n.next.length;a++)r+=(a?", ":"")+n.next[a].type.name+"->"+t.indexOf(n.next[a].next);return r}).join("\n")}}Di.empty=new Di(!0);class wC{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function Td(i){let t=[];do{t.push(SC(i))}while(i.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function SC(i){let t=[];do{t.push(AC(i))}while(i.next&&")"!=i.next&&"|"!=i.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function AC(i){let t=function LC(i){if(i.eat("(")){let t=Td(i);return i.eat(")")||i.err("Missing closing paren"),t}if(!/\W/.test(i.next)){let t=function MC(i,t){let e=i.nodeTypes,n=e[t];if(n)return[n];let s=[];for(let r in e){let a=e[r];a.isInGroup(t)&&s.push(a)}return 0==s.length&&i.err("No node type or group '"+t+"' found"),s}(i,i.next).map(e=>(null==i.inline?i.inline=e.isInline:i.inline!=e.isInline&&i.err("Mixing inline and block content"),{type:"name",value:e}));return i.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}i.err("Unexpected token '"+i.next+"'")}(i);for(;;)if(i.eat("+"))t={type:"plus",expr:t};else if(i.eat("*"))t={type:"star",expr:t};else if(i.eat("?"))t={type:"opt",expr:t};else{if(!i.eat("{"))break;t=DC(i,t)}return t}function kd(i){/\D/.test(i.next)&&i.err("Expected number, got '"+i.next+"'");let t=Number(i.next);return i.pos++,t}function DC(i,t){let e=kd(i),n=e;return i.eat(",")&&(n="}"!=i.next?kd(i):-1),i.eat("}")||i.err("Unclosed braced range"),{type:"range",min:e,max:n,expr:t}}function wd(i,t){return t-i}function Sd(i,t){let e=[];return function n(s){let r=i[s];if(1==r.length&&!r[0].term)return n(r[0].to);e.push(s);for(let a=0;a<r.length;a++){let{term:l,to:c}=r[a];!l&&-1==e.indexOf(c)&&n(c)}}(t),e.sort(wd)}function Ad(i){let t=Object.create(null);for(let e in i){let n=i[e];if(!n.hasDefault)return null;t[e]=n.default}return t}function Dd(i,t){let e=Object.create(null);for(let n in i){let s=t&&t[n];if(void 0===s){let r=i[n];if(!r.hasDefault)throw new RangeError("No value supplied for attribute "+n);s=r.default}e[n]=s}return e}function Md(i,t,e,n){for(let s in t)if(!(s in i))throw new RangeError(`Unsupported attribute ${s} for ${e} of type ${s}`);for(let s in i){let r=i[s];r.validate&&r.validate(t[s])}}function Ld(i,t){let e=Object.create(null);if(t)for(let n in t)e[n]=new PC(i,n,t[n]);return e}class vr{constructor(t,e,n){this.name=t,this.schema=e,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Ld(t,n.attrs),this.defaultAttrs=Ad(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Di.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:Dd(this.attrs,t)}create(t=null,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new bt(this,this.computeAttrs(t),v.from(e),te.setFrom(n))}createChecked(t=null,e,n){return e=v.from(e),this.checkContent(e),new bt(this,this.computeAttrs(t),e,te.setFrom(n))}createAndFill(t=null,e,n){if(t=this.computeAttrs(t),(e=v.from(e)).size){let a=this.contentMatch.fillBefore(e);if(!a)return null;e=a.append(e)}let s=this.contentMatch.matchFragment(e),r=s&&s.fillBefore(v.empty,!0);return r?new bt(this,t,e.append(r),te.setFrom(n)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){Md(this.attrs,t,"node")}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:te.none:t}static compile(t,e){let n=Object.create(null);t.forEach((r,a)=>n[r]=new vr(r,e,a));let s=e.spec.topNode||"doc";if(!n[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let r in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class PC{constructor(t,e,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function IC(i,t,e){let n=e.split("|");return s=>{let r=null===s?"null":typeof s;if(n.indexOf(r)<0)throw new RangeError(`Expected value of type ${n} for attribute ${t} on type ${i}, got ${r}`)}}(t,e,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class yr{constructor(t,e,n,s){this.name=t,this.rank=e,this.schema=n,this.spec=s,this.attrs=Ld(t,s.attrs),this.excluded=null;let r=Ad(this.attrs);this.instance=r?new te(this,r):null}create(t=null){return!t&&this.instance?this.instance:new te(this,Dd(this.attrs,t))}static compile(t,e){let n=Object.create(null),s=0;return t.forEach((r,a)=>n[r]=new yr(r,s++,e,a)),n}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}checkAttrs(t){Md(this.attrs,t,"mark")}excludes(t){return this.excluded.indexOf(t)>-1}}function Ed(i,t){let e=[];for(let n=0;n<t.length;n++){let s=t[n],r=i.marks[s],a=r;if(r)e.push(r);else for(let l in i.marks){let c=i.marks[l];("_"==s||c.spec.group&&c.spec.group.split(" ").indexOf(s)>-1)&&e.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}return e}class Mi{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[];let n=this.matchedStyles=[];e.forEach(s=>{if(function RC(i){return null!=i.tag}(s))this.tags.push(s);else if(function NC(i){return null!=i.style}(s)){let r=/[^=]*/.exec(s.style)[0];n.indexOf(r)<0&&n.push(r),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let r=t.nodes[s.node];return r.contentMatch.matchType(r)})}parse(t,e={}){let n=new Pd(this,e,!1);return n.addAll(t,te.none,e.from,e.to),n.finish()}parseSlice(t,e={}){let n=new Pd(this,e,!0);return n.addAll(t,te.none,e.from,e.to),w.maxOpen(n.finish())}matchTag(t,e,n){for(let s=n?this.tags.indexOf(n)+1:0;s<this.tags.length;s++){let r=this.tags[s];if(HC(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){let a=r.getAttrs(t);if(!1===a)continue;r.attrs=a||void 0}return r}}}matchStyle(t,e,n,s){for(let r=s?this.styles.indexOf(s)+1:0;r<this.styles.length;r++){let a=this.styles[r],l=a.style;if(!(0!=l.indexOf(t)||a.context&&!n.matchesContext(a.context)||l.length>t.length&&(61!=l.charCodeAt(t.length)||l.slice(t.length+1)!=e))){if(a.getAttrs){let c=a.getAttrs(e);if(!1===c)continue;a.attrs=c||void 0}return a}}}static schemaRules(t){let e=[];function n(s){let r=null==s.priority?50:s.priority,a=0;for(;a<e.length;a++){let l=e[a];if((null==l.priority?50:l.priority)<r)break}e.splice(a,0,s)}for(let s in t.marks){let r=t.marks[s].spec.parseDOM;r&&r.forEach(a=>{n(a=Bd(a)),a.mark||a.ignore||a.clearMark||(a.mark=s)})}for(let s in t.nodes){let r=t.nodes[s].spec.parseDOM;r&&r.forEach(a=>{n(a=Bd(a)),a.node||a.ignore||a.mark||(a.node=s)})}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Mi(t,Mi.schemaRules(t)))}}const Fd={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},VC={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Od={ol:!0,ul:!0};function Id(i,t,e){return null!=t?(t?1:0)|("full"===t?2:0):i&&"pre"==i.whitespace?3:-5&e}class Tr{constructor(t,e,n,s,r,a){this.type=t,this.attrs=e,this.marks=n,this.solid=s,this.options=a,this.content=[],this.activeMarks=te.none,this.match=r||(4&a?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(v.from(t));if(!e){let s,n=this.type.contentMatch;return(s=n.findWrapping(t.type))?(this.match=n,s):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}finish(t){if(!(1&this.options)){let s,n=this.content[this.content.length-1];if(n&&n.isText&&(s=/[ \t\r\n\u000c]+$/.exec(n.text))){let r=n;n.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-s[0].length))}}let e=v.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(v.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Fd.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class Pd{constructor(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.open=0;let r,s=e.topNode,a=Id(null,e.preserveWhitespace,0)|(n?4:0);r=s?new Tr(s.type,s.attrs,te.none,!0,e.topMatch||s.type.contentMatch,a):new Tr(n?null:t.schema.topNodeType,null,te.none,!0,null,a),this.nodes=[r],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,e){3==t.nodeType?this.addTextNode(t,e):1==t.nodeType&&this.addElement(t,e)}addTextNode(t,e){let n=t.nodeValue,s=this.top;if(2&s.options||s.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(1&s.options)n=2&s.options?n.replace(/\r\n?/g,"\n"):n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let r=s.content[s.content.length-1],a=t.previousSibling;(!r||a&&"BR"==a.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),e),this.findInText(t)}else this.findInside(t)}addElement(t,e,n){let r,s=t.nodeName.toLowerCase();Od.hasOwnProperty(s)&&this.parser.normalizeLists&&function zC(i){for(let t=i.firstChild,e=null;t;t=t.nextSibling){let n=1==t.nodeType?t.nodeName.toLowerCase():null;n&&Od.hasOwnProperty(n)&&e?(e.appendChild(t),t=e):"li"==n?e=t:n&&(e=null)}}(t);let a=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(r=this.parser.matchTag(t,this,n));if(a?a.ignore:VC.hasOwnProperty(s))this.findInside(t),this.ignoreFallback(t,e);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(t=a.skip);let l,c=this.top,h=this.needsBlock;if(Fd.hasOwnProperty(s))c.content.length&&c.content[0].isInline&&this.open&&(this.open--,c=this.top),l=!0,c.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t,e);let d=a&&a.skip?e:this.readStyles(t,e);d&&this.addAll(t,d),l&&this.sync(c),this.needsBlock=h}else{let l=this.readStyles(t,e);l&&this.addElementByRule(t,a,l,!1===a.consuming?r:void 0)}}leafFallback(t,e){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"),e)}ignoreFallback(t,e){"BR"==t.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),e)}readStyles(t,e){let n=t.style;if(n&&n.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let r=this.parser.matchedStyles[s],a=n.getPropertyValue(r);if(a)for(let l;;){let c=this.parser.matchStyle(r,a,this,l);if(!c)break;if(c.ignore)return null;if(e=c.clearMark?e.filter(h=>!c.clearMark(h)):e.concat(this.parser.schema.marks[c.mark].create(c.attrs)),!1!==c.consuming)break;l=c}}return e}addElementByRule(t,e,n,s){let r,a;if(e.node)if(a=this.parser.schema.nodes[e.node],a.isLeaf)this.insertNode(a.create(e.attrs),n)||this.leafFallback(t,n);else{let c=this.enter(a,e.attrs||null,n,e.preserveWhitespace);c&&(r=!0,n=c)}else n=n.concat(this.parser.schema.marks[e.mark].create(e.attrs));let l=this.top;if(a&&a.isLeaf)this.findInside(t);else if(s)this.addElement(t,n,s);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(c=>this.insertNode(c,n));else{let c=t;"string"==typeof e.contentElement?c=t.querySelector(e.contentElement):"function"==typeof e.contentElement?c=e.contentElement(t):e.contentElement&&(c=e.contentElement),this.findAround(t,c,!0),this.addAll(c,n),this.findAround(t,c,!1)}r&&this.sync(l)&&this.open--}addAll(t,e,n,s){let r=n||0;for(let a=n?t.childNodes[n]:t.firstChild,l=null==s?null:t.childNodes[s];a!=l;a=a.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(a,e);this.findAtPoint(t,r)}findPlace(t,e){let n,s;for(let r=this.open;r>=0;r--){let a=this.nodes[r],l=a.findWrapping(t);if(l&&(!n||n.length>l.length)&&(n=l,s=a,!l.length)||a.solid)break}if(!n)return null;this.sync(s);for(let r=0;r<n.length;r++)e=this.enterInner(n[r],null,e,!1);return e}insertNode(t,e){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(e=this.enterInner(s,null,e))}let n=this.findPlace(t,e);if(n){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let r=te.none;for(let a of n.concat(t.marks))(s.type?s.type.allowsMarkType(a.type):Rd(a.type,t.type))&&(r=a.addToSet(r));return s.content.push(t.mark(r)),!0}return!1}enter(t,e,n,s){let r=this.findPlace(t.create(e),n);return r&&(r=this.enterInner(t,e,n,!0,s)),r}enterInner(t,e,n,s=!1,r){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(t);let l=Id(t,r,a.options);4&a.options&&0==a.content.length&&(l|=4);let c=te.none;return n=n.filter(h=>!(a.type?a.type.allowsMarkType(h.type):Rd(h.type,t))||(c=h.addToSet(c),!1)),this.nodes.push(new Tr(t,e,c,s,null,l)),this.open++,n}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let n=this.nodes[e].content;for(let s=n.length-1;s>=0;s--)t+=n[s].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,n){if(t!=e&&this.find)for(let s=0;s<this.find.length;s++)null==this.find[s].pos&&1==t.nodeType&&t.contains(this.find[s].node)&&e.compareDocumentPosition(this.find[s].node)&(n?2:4)&&(this.find[s].pos=this.currentPos)}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),n=this.options.context,s=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),r=(s?0:1)-(n?n.depth+1:0),a=(l,c)=>{for(;l>=0;l--){let h=e[l];if(""==h){if(l==e.length-1||0==l)continue;for(;c>=r;c--)if(a(l-1,c))return!0;return!1}{let d=c>0||0==c&&s?this.nodes[c].type:n&&c>=r?n.node(c-r).type:null;if(!d||d.name!=h&&!d.isInGroup(h))return!1;c--}}return!0};return a(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let n=this.parser.schema.nodes[e];if(n.isTextblock&&n.defaultAttrs)return n}}}function HC(i,t){return(i.matches||i.msMatchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector).call(i,t)}function Bd(i){let t={};for(let e in i)t[e]=i[e];return t}function Rd(i,t){let e=t.schema.nodes;for(let n in e){let s=e[n];if(!s.allowsMarkType(i))continue;let r=[],a=l=>{r.push(l);for(let c=0;c<l.edgeCount;c++){let{type:h,next:d}=l.edge(c);if(h==t||r.indexOf(d)<0&&a(d))return!0}};if(a(s.contentMatch))return!0}}class Li{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},n){n||(n=ca(e).createDocumentFragment());let s=n,r=[];return t.forEach(a=>{if(r.length||a.marks.length){let l=0,c=0;for(;l<r.length&&c<a.marks.length;){let h=a.marks[c];if(this.marks[h.type.name]){if(!h.eq(r[l][0])||!1===h.type.spec.spanning)break;l++,c++}else c++}for(;l<r.length;)s=r.pop()[1];for(;c<a.marks.length;){let h=a.marks[c++],d=this.serializeMark(h,a.isInline,e);d&&(r.push([h,s]),s.appendChild(d.dom),s=d.contentDOM||d.dom)}}s.appendChild(this.serializeNodeInner(a,e))}),n}serializeNodeInner(t,e){let{dom:n,contentDOM:s}=kr(ca(e),this.nodes[t.type.name](t),null,t.attrs);if(s){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,s)}return n}serializeNode(t,e={}){let n=this.serializeNodeInner(t,e);for(let s=t.marks.length-1;s>=0;s--){let r=this.serializeMark(t.marks[s],t.isInline,e);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n}serializeMark(t,e,n={}){let s=this.marks[t.type.name];return s&&kr(ca(n),s(t,e),null,t.attrs)}static renderSpec(t,e,n=null,s){return kr(t,e,n,s)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Li(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=Nd(t.nodes);return e.text||(e.text=n=>n.text),e}static marksFromSchema(t){return Nd(t.marks)}}function Nd(i){let t={};for(let e in i){let n=i[e].spec.toDOM;n&&(t[e]=n)}return t}function ca(i){return i.document||window.document}const Vd=new WeakMap;function kr(i,t,e,n){if("string"==typeof t)return{dom:i.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let r,s=t[0];if("string"!=typeof s)throw new RangeError("Invalid array passed to renderSpec");if(n&&(r=function $C(i){let t=Vd.get(i);return void 0===t&&Vd.set(i,t=function GC(i){let t=null;return function e(n){if(n&&"object"==typeof n)if(Array.isArray(n))if("string"==typeof n[0])t||(t=[]),t.push(n);else for(let s=0;s<n.length;s++)e(n[s]);else for(let s in n)e(n[s])}(i),t}(i)),t}(n))&&r.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=s.indexOf(" ");a>0&&(e=s.slice(0,a),s=s.slice(a+1));let l,c=e?i.createElementNS(e,s):i.createElement(s),h=t[1],d=1;if(h&&"object"==typeof h&&null==h.nodeType&&!Array.isArray(h)){d=2;for(let u in h)if(null!=h[u]){let p=u.indexOf(" ");p>0?c.setAttributeNS(u.slice(0,p),u.slice(p+1),h[u]):c.setAttribute(u,h[u])}}for(let u=d;u<t.length;u++){let p=t[u];if(0===p){if(u<t.length-1||u>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}{let{dom:m,contentDOM:g}=kr(i,p,e,n);if(c.appendChild(m),g){if(l)throw new RangeError("Multiple content holes");l=g}}}return{dom:c,contentDOM:l}}const Hd=Math.pow(2,16);function XC(i,t){return i+t*Hd}function $d(i){return 65535&i}class ha{constructor(t,e,n){this.pos=t,this.delInfo=e,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class Ze{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&Ze.empty)return Ze.empty}recover(t){let e=0,n=$d(t);if(!this.inverted)for(let s=0;s<n;s++)e+=this.ranges[3*s+2]-this.ranges[3*s+1];return this.ranges[3*n]+e+function YC(i){return(i-(65535&i))/Hd}(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,n){let s=0,r=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?s:0);if(c>t)break;let h=this.ranges[l+r],d=this.ranges[l+a],u=c+h;if(t<=u){let m=c+s+((h?t==c?-1:t==u?1:e:e)<0?0:d);if(n)return m;let g=t==(e<0?c:u)?null:XC(l/3,t-c),_=t==c?2:t==u?1:4;return(e<0?t!=c:t!=u)&&(_|=8),new ha(m,_,g)}s+=d-h}return n?t+s:new ha(t+s,0,null)}touches(t,e){let n=0,s=$d(e),r=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?n:0);if(c>t)break;let h=this.ranges[l+r];if(t<=c+h&&l==3*s)return!0;n+=this.ranges[l+a]-h}return!1}forEach(t){let e=this.inverted?2:1,n=this.inverted?1:2;for(let s=0,r=0;s<this.ranges.length;s+=3){let a=this.ranges[s],l=a-(this.inverted?r:0),c=a+(this.inverted?0:r),h=this.ranges[s+e],d=this.ranges[s+n];t(l,l+h,c,c+d),r+=d-h}}invert(){return new Ze(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?Ze.empty:new Ze(t<0?[0,-t,0]:[0,0,t])}}Ze.empty=new Ze([]);class rn{constructor(t=[],e,n=0,s=t.length){this.maps=t,this.mirror=e,this.from=n,this.to=s}slice(t=0,e=this.maps.length){return new rn(this.maps,this.mirror,t,e)}copy(){return new rn(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,n=this.maps.length;e<t.maps.length;e++){let s=t.getMirror(e);this.appendMap(t.maps[e],null!=s&&s<e?n+s:void 0)}}getMirror(t){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){let s=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=s&&s>e?n-s-1:void 0)}}invert(){let t=new rn;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,n){let s=0;for(let r=this.from;r<this.to;r++){let l=this.maps[r].mapResult(t,e);if(null!=l.recover){let c=this.getMirror(r);if(null!=c&&c>r&&c<this.to){r=c,t=this.maps[c].recover(l.recover);continue}}s|=l.delInfo,t=l.pos}return n?t:new ha(t,s,null)}}const da=Object.create(null);class Oe{getMap(){return Ze.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=da[e.stepType];if(!n)throw new RangeError(`No step type ${e.stepType} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in da)throw new RangeError("Duplicate use of step JSON ID "+t);return da[t]=e,e.prototype.jsonID=t,e}}class ge{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new ge(t,null)}static fail(t){return new ge(null,t)}static fromReplace(t,e,n,s){try{return ge.ok(t.replace(e,n,s))}catch(r){if(r instanceof gr)return ge.fail(r.message);throw r}}}function ua(i,t,e){let n=[];for(let s=0;s<i.childCount;s++){let r=i.child(s);r.content.size&&(r=r.copy(ua(r.content,t,r))),r.isInline&&(r=t(r,e,s)),n.push(r)}return v.fromArray(n)}class Kt extends Oe{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=t.resolve(this.from),s=n.node(n.sharedDepth(this.to)),r=new w(ua(e.content,(a,l)=>a.isAtom&&l.type.allowsMarkType(this.mark.type)?a.mark(this.mark.addToSet(a.marks)):a,s),e.openStart,e.openEnd);return ge.fromReplace(t,this.from,this.to,r)}invert(){return new Ct(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new Kt(e.pos,n.pos,this.mark)}merge(t){return t instanceof Kt&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Kt(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Kt(e.from,e.to,t.markFromJSON(e.mark))}}Oe.jsonID("addMark",Kt);class Ct extends Oe{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=new w(ua(e.content,s=>s.mark(this.mark.removeFromSet(s.marks)),t),e.openStart,e.openEnd);return ge.fromReplace(t,this.from,this.to,n)}invert(){return new Kt(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new Ct(e.pos,n.pos,this.mark)}merge(t){return t instanceof Ct&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ct(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ct(e.from,e.to,t.markFromJSON(e.mark))}}Oe.jsonID("removeMark",Ct);class Jt extends Oe{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return ge.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return ge.fromReplace(t,this.pos,this.pos+1,new w(v.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let n=this.mark.addToSet(e.marks);if(n.length==e.marks.length){for(let s=0;s<e.marks.length;s++)if(!e.marks[s].isInSet(n))return new Jt(this.pos,e.marks[s]);return new Jt(this.pos,this.mark)}}return new on(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Jt(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Jt(e.pos,t.markFromJSON(e.mark))}}Oe.jsonID("addNodeMark",Jt);class on extends Oe{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return ge.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return ge.fromReplace(t,this.pos,this.pos+1,new w(v.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new Jt(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new on(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new on(e.pos,t.markFromJSON(e.mark))}}Oe.jsonID("removeNodeMark",on);class Ie extends Oe{constructor(t,e,n,s=!1){super(),this.from=t,this.to=e,this.slice=n,this.structure=s}apply(t){return this.structure&&pa(t,this.from,this.to)?ge.fail("Structure replace would overwrite content"):ge.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Ze([this.from,this.to-this.from,this.slice.size])}invert(t){return new Ie(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deletedAcross&&n.deletedAcross?null:new Ie(e.pos,Math.max(e.pos,n.pos),this.slice)}merge(t){if(!(t instanceof Ie)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?w.empty:new w(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Ie(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?w.empty:new w(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Ie(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ie(e.from,e.to,w.fromJSON(t,e.slice),!!e.structure)}}Oe.jsonID("replace",Ie);class we extends Oe{constructor(t,e,n,s,r,a,l=!1){super(),this.from=t,this.to=e,this.gapFrom=n,this.gapTo=s,this.slice=r,this.insert=a,this.structure=l}apply(t){if(this.structure&&(pa(t,this.from,this.gapFrom)||pa(t,this.gapTo,this.to)))return ge.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return ge.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,e.content);return n?ge.fromReplace(t,this.from,this.to,n):ge.fail("Content does not fit in gap")}getMap(){return new Ze([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new we(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),s=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),r=this.to==this.gapTo?n.pos:t.map(this.gapTo,1);return e.deletedAcross&&n.deletedAcross||s<e.pos||r>n.pos?null:new we(e.pos,n.pos,s,r,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new we(e.from,e.to,e.gapFrom,e.gapTo,w.fromJSON(t,e.slice),e.insert,!!e.structure)}}function pa(i,t,e){let n=i.resolve(t),s=e-t,r=n.depth;for(;s>0&&r>0&&n.indexAfter(r)==n.node(r).childCount;)r--,s--;if(s>0){let a=n.node(r).maybeChild(n.indexAfter(r));for(;s>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,s--}}return!1}function ma(i,t,e,n=e.contentMatch,s=!0){let r=i.doc.nodeAt(t),a=[],l=t+1;for(let c=0;c<r.childCount;c++){let h=r.child(c),d=l+h.nodeSize,u=n.matchType(h.type);if(u){n=u;for(let p=0;p<h.marks.length;p++)e.allowsMarkType(h.marks[p].type)||i.step(new Ct(l,d,h.marks[p]));if(s&&h.isText&&"pre"!=e.whitespace){let p,g,m=/\r?\n|\r/g;for(;p=m.exec(h.text);)g||(g=new w(v.from(e.schema.text(" ",e.allowedMarks(h.marks))),0,0)),a.push(new Ie(l+p.index,l+p.index+p[0].length,g))}}else a.push(new Ie(l,d,w.empty));l=d}if(!n.validEnd){let c=n.fillBefore(v.empty,!0);i.replace(l,l,new w(c,0,0))}for(let c=a.length-1;c>=0;c--)i.step(a[c])}function UC(i,t,e){return(0==t||i.canReplace(t,i.childCount))&&(e==i.childCount||i.canReplace(0,e))}function Jn(i){let e=i.parent.content.cutByIndex(i.startIndex,i.endIndex);for(let n=i.depth;;--n){let s=i.$from.node(n),r=i.$from.index(n),a=i.$to.indexAfter(n);if(n<i.depth&&s.canReplace(r,a,e))return n;if(0==n||s.type.spec.isolating||!UC(s,r,a))break}return null}function ga(i,t,e=null,n=i){let s=function qC(i,t){let{parent:e,startIndex:n,endIndex:s}=i,r=e.contentMatchAt(n).findWrapping(t);return r&&e.canReplaceWith(n,s,r.length?r[0]:t)?r:null}(i,t),r=s&&function KC(i,t){let{parent:e,startIndex:n,endIndex:s}=i,r=e.child(n),a=t.contentMatch.findWrapping(r.type);if(!a)return null;let c=(a.length?a[a.length-1]:t).contentMatch;for(let h=n;c&&h<s;h++)c=c.matchType(e.child(h).type);return c&&c.validEnd?a:null}(n,t);return r?s.map(Wd).concat({type:t,attrs:e}).concat(r.map(Wd)):null}function Wd(i){return{type:i,attrs:null}}function jd(i,t,e,n){t.forEach((s,r)=>{if(s.isText){let a,l=/\r?\n|\r/g;for(;a=l.exec(s.text);){let c=i.mapping.slice(n).map(e+1+r+a.index);i.replaceWith(c,c+1,t.type.schema.linebreakReplacement.create())}}})}function Ud(i,t,e,n){t.forEach((s,r)=>{if(s.type==s.type.schema.linebreakReplacement){let a=i.mapping.slice(n).map(e+1+r);i.replaceWith(a,a+1,t.type.schema.text("\n"))}})}function an(i,t,e=1,n){let s=i.resolve(t),r=s.depth-e,a=n&&n[n.length-1]||s.parent;if(r<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!a.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let h=s.depth-1,d=e-2;h>r;h--,d--){let u=s.node(h),p=s.index(h);if(u.type.spec.isolating)return!1;let m=u.content.cutByIndex(p,u.childCount),g=n&&n[d+1];g&&(m=m.replaceChild(0,g.type.create(g.attrs)));let _=n&&n[d]||u;if(!u.canReplace(p+1,u.childCount)||!_.type.validContent(m))return!1}let l=s.indexAfter(r),c=n&&n[0];return s.node(r).canReplaceWith(l,l,c?c.type:s.node(r+1).type)}function Sr(i,t){let e=i.resolve(t),n=e.index();return function Qd(i,t){return!(!i||!t||i.isLeaf||!function nT(i,t){t.content.size||i.type.compatibleContent(t.type);let e=i.contentMatchAt(i.childCount),{linebreakReplacement:n}=i.type.schema;for(let s=0;s<t.childCount;s++){let r=t.child(s);if(e=e.matchType(r.type==n?i.type.schema.nodes.text:r.type),!e||!i.type.allowsMarks(r.marks))return!1}return e.validEnd}(i,t))}(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(n,n+1)}function fa(i,t,e=t,n=w.empty){if(t==e&&!n.size)return null;let s=i.resolve(t),r=i.resolve(e);return qd(s,r,n)?new Ie(t,e,n):new aT(s,r,n).fit()}function qd(i,t,e){return!e.openStart&&!e.openEnd&&i.start()==t.start()&&i.parent.canReplace(i.index(),t.index(),e.content)}Oe.jsonID("replaceAround",we);class aT{constructor(t,e,n){this.$from=t,this.$to=e,this.unplaced=n,this.frontier=[],this.placed=v.empty;for(let s=0;s<=t.depth;s++){let r=t.node(s);this.frontier.push({type:r.type,match:r.contentMatchAt(t.indexAfter(s))})}for(let s=t.depth;s>0;s--)this.placed=v.from(t.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,n=this.$from,s=this.close(t<0?this.$to:n.doc.resolve(t));if(!s)return null;let r=this.placed,a=n.depth,l=s.depth;for(;a&&l&&1==r.childCount;)r=r.firstChild.content,a--,l--;let c=new w(r,a,l);return t>-1?new we(n.pos,t,this.$to.pos,this.$to.end(),c,e):c.size||n.pos!=this.$to.pos?new Ie(n.pos,s.pos,c):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,n=0,s=this.unplaced.openEnd;n<t;n++){let r=e.firstChild;if(e.childCount>1&&(s=0),r.type.spec.isolating&&s<=n){t=n;break}e=r.content}for(let e=1;e<=2;e++)for(let n=1==e?t:this.unplaced.openStart;n>=0;n--){let s,r=null;n?(r=_a(this.unplaced.content,n-1).firstChild,s=r.content):s=this.unplaced.content;let a=s.firstChild;for(let l=this.depth;l>=0;l--){let d,{type:c,match:h}=this.frontier[l],u=null;if(1==e&&(a?h.matchType(a.type)||(u=h.fillBefore(v.from(a),!1)):r&&c.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:l,parent:r,inject:u};if(2==e&&a&&(d=h.findWrapping(a.type)))return{sliceDepth:n,frontierDepth:l,parent:r,wrap:d};if(r&&h.matchType(r.type))break}}}openMore(){let{content:t,openStart:e,openEnd:n}=this.unplaced,s=_a(t,e);return!(!s.childCount||s.firstChild.isLeaf||(this.unplaced=new w(t,e+1,Math.max(n,s.size+e>=t.size-n?e+1:0)),0))}dropNode(){let{content:t,openStart:e,openEnd:n}=this.unplaced,s=_a(t,e);if(s.childCount<=1&&e>0){let r=t.size-e<=e+s.size;this.unplaced=new w(Zn(t,e-1,1),e-1,r?e-1:n)}else this.unplaced=new w(Zn(t,e,1),e,n)}placeNodes({sliceDepth:t,frontierDepth:e,parent:n,inject:s,wrap:r}){for(;this.depth>e;)this.closeFrontierNode();if(r)for(let _=0;_<r.length;_++)this.openFrontierNode(r[_]);let a=this.unplaced,l=n?n.content:a.content,c=a.openStart-t,h=0,d=[],{match:u,type:p}=this.frontier[e];if(s){for(let _=0;_<s.childCount;_++)d.push(s.child(_));u=u.matchFragment(s)}let m=l.size+t-(a.content.size-a.openEnd);for(;h<l.childCount;){let _=l.child(h),f=u.matchType(_.type);if(!f)break;h++,(h>1||0==c||_.content.size)&&(u=f,d.push(Kd(_.mark(p.allowedMarks(_.marks)),1==h?c:0,h==l.childCount?m:-1)))}let g=h==l.childCount;g||(m=-1),this.placed=es(this.placed,e,v.from(d)),this.frontier[e].match=u,g&&m<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let _=0,f=l;_<m;_++){let x=f.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),f=x.content}this.unplaced=g?0==t?w.empty:new w(Zn(a.content,t-1,1),t-1,m<0?a.openEnd:t-1):new w(Zn(a.content,t,h),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!xa(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,s=this.$to.after(n);for(;n>1&&s==this.$to.end(--n);)++s;return s}findCloseLevel(t){e:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:n,type:s}=this.frontier[e],r=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),a=xa(t,e,s,n,r);if(a){for(let l=e-1;l>=0;l--){let{match:c,type:h}=this.frontier[l],d=xa(t,l,h,c,!0);if(!d||d.childCount)continue e}return{depth:e,fit:a,move:r?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=es(this.placed,e.depth,e.fit)),t=e.move;for(let n=e.depth+1;n<=t.depth;n++){let s=t.node(n),r=s.type.contentMatch.fillBefore(s.content,!0,t.index(n));this.openFrontierNode(s.type,s.attrs,r)}return t}openFrontierNode(t,e=null,n){let s=this.frontier[this.depth];s.match=s.match.matchType(t),this.placed=es(this.placed,this.depth,v.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(v.empty,!0);e.childCount&&(this.placed=es(this.placed,this.frontier.length,e))}}function Zn(i,t,e){return 0==t?i.cutByIndex(e,i.childCount):i.replaceChild(0,i.firstChild.copy(Zn(i.firstChild.content,t-1,e)))}function es(i,t,e){return 0==t?i.append(e):i.replaceChild(i.childCount-1,i.lastChild.copy(es(i.lastChild.content,t-1,e)))}function _a(i,t){for(let e=0;e<t;e++)i=i.firstChild.content;return i}function Kd(i,t,e){if(t<=0)return i;let n=i.content;return t>1&&(n=n.replaceChild(0,Kd(n.firstChild,t-1,1==n.childCount?e-1:0))),t>0&&(n=i.type.contentMatch.fillBefore(n).append(n),e<=0&&(n=n.append(i.type.contentMatch.matchFragment(n).fillBefore(v.empty,!0)))),i.copy(n)}function xa(i,t,e,n,s){let r=i.node(t),a=s?i.indexAfter(t):i.index(t);if(a==r.childCount&&!e.compatibleContent(r.type))return null;let l=n.fillBefore(r.content,!0,a);return l&&!function lT(i,t,e){for(let n=e;n<t.childCount;n++)if(!i.allowsMarks(t.child(n).marks))return!0;return!1}(e,r.content,a)?l:null}function cT(i){return i.spec.defining||i.spec.definingForContent}function Jd(i,t,e,n,s){if(t<e){let r=i.firstChild;i=i.replaceChild(0,r.copy(Jd(r.content,t+1,e,n,r)))}if(t>n){let r=s.contentMatchAt(0),a=r.fillBefore(i).append(i);i=a.append(r.matchFragment(a).fillBefore(v.empty,!0))}return i}function Zd(i,t){let e=[];for(let s=Math.min(i.depth,t.depth);s>=0;s--){let r=i.start(s);if(r<i.pos-(i.depth-s)||t.end(s)>t.pos+(t.depth-s)||i.node(s).type.spec.isolating||t.node(s).type.spec.isolating)break;(r==t.start(s)||s==i.depth&&s==t.depth&&i.parent.inlineContent&&t.parent.inlineContent&&s&&t.start(s-1)==r-1)&&e.push(s)}return e}class ln extends Oe{constructor(t,e,n){super(),this.pos=t,this.attr=e,this.value=n}apply(t){let e=t.nodeAt(this.pos);if(!e)return ge.fail("No node at attribute step's position");let n=Object.create(null);for(let r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;let s=e.type.create(n,null,e.marks);return ge.fromReplace(t,this.pos,this.pos+1,new w(v.from(s),0,e.isLeaf?0:1))}getMap(){return Ze.empty}invert(t){return new ln(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new ln(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new ln(e.pos,e.attr,e.value)}}Oe.jsonID("attr",ln);class ts extends Oe{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let s in t.attrs)e[s]=t.attrs[s];e[this.attr]=this.value;let n=t.type.create(e,t.content,t.marks);return ge.ok(n)}getMap(){return Ze.empty}invert(t){return new ts(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if("string"!=typeof e.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ts(e.attr,e.value)}}Oe.jsonID("docAttr",ts);let cn=class extends Error{};cn=function i(t){let e=Error.call(this,t);return e.__proto__=i.prototype,e},(cn.prototype=Object.create(Error.prototype)).constructor=cn,cn.prototype.name="TransformError";class pT{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new rn}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new cn(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,n=w.empty){let s=fa(this.doc,t,e,n);return s&&this.step(s),this}replaceWith(t,e,n){return this.replace(t,e,new w(v.from(n),0,0))}delete(t,e){return this.replace(t,e,w.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,n){return function hT(i,t,e,n){if(!n.size)return i.deleteRange(t,e);let s=i.doc.resolve(t),r=i.doc.resolve(e);if(qd(s,r,n))return i.step(new Ie(t,e,n));let a=Zd(s,i.doc.resolve(e));0==a[a.length-1]&&a.pop();let l=-(s.depth+1);a.unshift(l);for(let p=s.depth,m=s.pos-1;p>0;p--,m--){let g=s.node(p).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;a.indexOf(p)>-1?l=p:s.before(p)==m&&a.splice(1,0,-p)}let c=a.indexOf(l),h=[],d=n.openStart;for(let p=n.content,m=0;;m++){let g=p.firstChild;if(h.push(g),m==n.openStart)break;p=g.content}for(let p=d-1;p>=0;p--){let m=h[p],g=cT(m.type);if(g&&!m.sameMarkup(s.node(Math.abs(l)-1)))d=p;else if(g||!m.type.isTextblock)break}for(let p=n.openStart;p>=0;p--){let m=(p+d+1)%(n.openStart+1),g=h[m];if(g)for(let _=0;_<a.length;_++){let f=a[(_+c)%a.length],x=!0;f<0&&(x=!1,f=-f);let T=s.node(f-1),C=s.index(f-1);if(T.canReplaceWith(C,C,g.type,g.marks))return i.replace(s.before(f),x?r.after(f):e,new w(Jd(n.content,0,n.openStart,m),m,n.openEnd))}}let u=i.steps.length;for(let p=a.length-1;p>=0&&(i.replace(t,e,n),!(i.steps.length>u));p--){let m=a[p];m<0||(t=s.before(m),e=r.after(m))}}(this,t,e,n),this}replaceRangeWith(t,e,n){return function dT(i,t,e,n){if(!n.isInline&&t==e&&i.doc.resolve(t).parent.content.size){let s=function rT(i,t,e){let n=i.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),e))return t;if(0==n.parentOffset)for(let s=n.depth-1;s>=0;s--){let r=n.index(s);if(n.node(s).canReplaceWith(r,r,e))return n.before(s+1);if(r>0)return null}if(n.parentOffset==n.parent.content.size)for(let s=n.depth-1;s>=0;s--){let r=n.indexAfter(s);if(n.node(s).canReplaceWith(r,r,e))return n.after(s+1);if(r<n.node(s).childCount)return null}return null}(i.doc,t,n.type);null!=s&&(t=e=s)}i.replaceRange(t,e,new w(v.from(n),0,0))}(this,t,e,n),this}deleteRange(t,e){return function uT(i,t,e){let n=i.doc.resolve(t),s=i.doc.resolve(e),r=Zd(n,s);for(let a=0;a<r.length;a++){let l=r[a],c=a==r.length-1;if(c&&0==l||n.node(l).type.contentMatch.validEnd)return i.delete(n.start(l),s.end(l));if(l>0&&(c||n.node(l-1).canReplace(n.index(l-1),s.indexAfter(l-1))))return i.delete(n.before(l),s.after(l))}for(let a=1;a<=n.depth&&a<=s.depth;a++)if(t-n.start(a)==n.depth-a&&e>n.end(a)&&s.end(a)-e!=s.depth-a&&n.start(a-1)==s.start(a-1)&&n.node(a-1).canReplace(n.index(a-1),s.index(a-1)))return i.delete(n.before(a),e);i.delete(t,e)}(this,t,e),this}lift(t,e){return function QC(i,t,e){let{$from:n,$to:s,depth:r}=t,a=n.before(r+1),l=s.after(r+1),c=a,h=l,d=v.empty,u=0;for(let g=r,_=!1;g>e;g--)_||n.index(g)>0?(_=!0,d=v.from(n.node(g).copy(d)),u++):c--;let p=v.empty,m=0;for(let g=r,_=!1;g>e;g--)_||s.after(g+1)<s.end(g)?(_=!0,p=v.from(s.node(g).copy(p)),m++):h++;i.step(new we(c,h,a,l,new w(d.append(p),u,m),d.size-u,!0))}(this,t,e),this}join(t,e=1){return function sT(i,t,e){let n=null,{linebreakReplacement:s}=i.doc.type.schema,r=i.doc.resolve(t-e),a=r.node().type;if(s&&a.inlineContent){let d="pre"==a.whitespace,u=!!a.contentMatch.matchType(s);d&&!u?n=!1:!d&&u&&(n=!0)}let l=i.steps.length;if(!1===n){let d=i.doc.resolve(t+e);Ud(i,d.node(),d.before(),l)}a.inlineContent&&ma(i,t+e-1,a,r.node().contentMatchAt(r.index()),null==n);let c=i.mapping.slice(l),h=c.map(t-e);if(i.step(new Ie(h,c.map(t+e,-1),w.empty,!0)),!0===n){let d=i.doc.resolve(h);jd(i,d.node(),d.before(),i.steps.length)}}(this,t,e),this}wrap(t,e){return function JC(i,t,e){let n=v.empty;for(let a=e.length-1;a>=0;a--){if(n.size){let l=e[a].type.contentMatch.matchFragment(n);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=v.from(e[a].type.create(e[a].attrs,n))}let s=t.start,r=t.end;i.step(new we(s,r,s,r,new w(n,0,0),e.length,!0))}(this,t,e),this}setBlockType(t,e=t,n,s=null){return function ZC(i,t,e,n,s){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let r=i.steps.length;i.doc.nodesBetween(t,e,(a,l)=>{let c="function"==typeof s?s(a):s;if(a.isTextblock&&!a.hasMarkup(n,c)&&function eT(i,t,e){let n=i.resolve(t),s=n.index();return n.parent.canReplaceWith(s,s+1,e)}(i.doc,i.mapping.slice(r).map(l),n)){let h=null;if(n.schema.linebreakReplacement){let m="pre"==n.whitespace,g=!!n.contentMatch.matchType(n.schema.linebreakReplacement);m&&!g?h=!1:!m&&g&&(h=!0)}!1===h&&Ud(i,a,l,r),ma(i,i.mapping.slice(r).map(l,1),n,void 0,null===h);let d=i.mapping.slice(r),u=d.map(l,1),p=d.map(l+a.nodeSize,1);return i.step(new we(u,p,u+1,p-1,new w(v.from(n.create(c,null,a.marks)),0,0),1,!0)),!0===h&&jd(i,a,l,r),!1}})}(this,t,e,n,s),this}setNodeMarkup(t,e,n=null,s){return function tT(i,t,e,n,s){let r=i.doc.nodeAt(t);if(!r)throw new RangeError("No node at given position");e||(e=r.type);let a=e.create(n,null,s||r.marks);if(r.isLeaf)return i.replaceWith(t,t+r.nodeSize,a);if(!e.validContent(r.content))throw new RangeError("Invalid content for node type "+e.name);i.step(new we(t,t+r.nodeSize,t+1,t+r.nodeSize-1,new w(v.from(a),0,0),1,!0))}(this,t,e,n,s),this}setNodeAttribute(t,e,n){return this.step(new ln(t,e,n)),this}setDocAttribute(t,e){return this.step(new ts(t,e)),this}addNodeMark(t,e){return this.step(new Jt(t,e)),this}removeNodeMark(t,e){if(!(e instanceof te)){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(!(e=e.isInSet(n.marks)))return this}return this.step(new on(t,e)),this}split(t,e=1,n){return function iT(i,t,e=1,n){let s=i.doc.resolve(t),r=v.empty,a=v.empty;for(let l=s.depth,c=s.depth-e,h=e-1;l>c;l--,h--){r=v.from(s.node(l).copy(r));let d=n&&n[h];a=v.from(d?d.type.create(d.attrs,a):s.node(l).copy(a))}i.step(new Ie(t,t,new w(r.append(a),e,e),!0))}(this,t,e,n),this}addMark(t,e,n){return function WC(i,t,e,n){let a,l,s=[],r=[];i.doc.nodesBetween(t,e,(c,h,d)=>{if(!c.isInline)return;let u=c.marks;if(!n.isInSet(u)&&d.type.allowsMarkType(n.type)){let p=Math.max(h,t),m=Math.min(h+c.nodeSize,e),g=n.addToSet(u);for(let _=0;_<u.length;_++)u[_].isInSet(g)||(a&&a.to==p&&a.mark.eq(u[_])?a.to=m:s.push(a=new Ct(p,m,u[_])));l&&l.to==p?l.to=m:r.push(l=new Kt(p,m,n))}}),s.forEach(c=>i.step(c)),r.forEach(c=>i.step(c))}(this,t,e,n),this}removeMark(t,e,n){return function jC(i,t,e,n){let s=[],r=0;i.doc.nodesBetween(t,e,(a,l)=>{if(!a.isInline)return;r++;let c=null;if(n instanceof yr){let d,h=a.marks;for(;d=n.isInSet(h);)(c||(c=[])).push(d),h=d.removeFromSet(h)}else n?n.isInSet(a.marks)&&(c=[n]):c=a.marks;if(c&&c.length){let h=Math.min(l+a.nodeSize,e);for(let d=0;d<c.length;d++){let p,u=c[d];for(let m=0;m<s.length;m++){let g=s[m];g.step==r-1&&u.eq(s[m].style)&&(p=g)}p?(p.to=h,p.step=r):s.push({style:u,from:Math.max(l,t),to:h,step:r})}}}),s.forEach(a=>i.step(new Ct(a.from,a.to,a.style)))}(this,t,e,n),this}clearIncompatible(t,e,n){return ma(this,t,e,n),this}}const va=Object.create(null);class Y{constructor(t,e,n){this.$anchor=t,this.$head=e,this.ranges=n||[new ya(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=w.empty){let n=e.content.lastChild,s=null;for(let l=0;l<e.openEnd;l++)s=n,n=n.lastChild;let r=t.steps.length,a=this.ranges;for(let l=0;l<a.length;l++){let{$from:c,$to:h}=a[l],d=t.mapping.slice(r);t.replaceRange(d.map(c.pos),d.map(h.pos),l?w.empty:e),0==l&&iu(t,r,(n?n.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(t,e){let n=t.steps.length,s=this.ranges;for(let r=0;r<s.length;r++){let{$from:a,$to:l}=s[r],c=t.mapping.slice(n),h=c.map(a.pos),d=c.map(l.pos);r?t.deleteRange(h,d):(t.replaceRangeWith(h,d,e),iu(t,n,e.isInline?-1:1))}}static findFrom(t,e,n=!1){let s=t.parent.inlineContent?new q(t):hn(t.node(0),t.parent,t.pos,t.index(),e,n);if(s)return s;for(let r=t.depth-1;r>=0;r--){let a=e<0?hn(t.node(0),t.node(r),t.before(r+1),t.index(r),e,n):hn(t.node(0),t.node(r),t.after(r+1),t.index(r)+1,e,n);if(a)return a}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new et(t.node(0))}static atStart(t){return hn(t,t,0,0,1)||new et(t)}static atEnd(t){return hn(t,t,t.content.size,t.childCount,-1)||new et(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=va[e.type];if(!n)throw new RangeError(`No selection type ${e.type} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in va)throw new RangeError("Duplicate use of selection JSON ID "+t);return va[t]=e,e.prototype.jsonID=t,e}getBookmark(){return q.between(this.$anchor,this.$head).getBookmark()}}Y.prototype.visible=!0;class ya{constructor(t,e){this.$from=t,this.$to=e}}let eu=!1;function tu(i){!eu&&!i.parent.inlineContent&&(eu=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+i.parent.type.name+")"))}class q extends Y{constructor(t,e=t){tu(t),tu(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let n=t.resolve(e.map(this.head));if(!n.parent.inlineContent)return Y.near(n);let s=t.resolve(e.map(this.anchor));return new q(s.parent.inlineContent?s:n,n)}replace(t,e=w.empty){if(super.replace(t,e),e==w.empty){let n=this.$from.marksAcross(this.$to);n&&t.ensureMarks(n)}}eq(t){return t instanceof q&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Ar(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new q(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){let s=t.resolve(e);return new this(s,n==e?s:t.resolve(n))}static between(t,e,n){let s=t.pos-e.pos;if((!n||s)&&(n=s>=0?1:-1),!e.parent.inlineContent){let r=Y.findFrom(e,n,!0)||Y.findFrom(e,-n,!0);if(!r)return Y.near(e,n);e=r.$head}return t.parent.inlineContent||(0==s||(t=(Y.findFrom(t,-n,!0)||Y.findFrom(t,n,!0)).$anchor).pos<e.pos!=s<0)&&(t=e),new q(t,e)}}Y.jsonID("text",q);class Ar{constructor(t,e){this.anchor=t,this.head=e}map(t){return new Ar(t.map(this.anchor),t.map(this.head))}resolve(t){return q.between(t.resolve(this.anchor),t.resolve(this.head))}}class R extends Y{constructor(t){let e=t.nodeAfter,n=t.node(0).resolve(t.pos+e.nodeSize);super(t,n),this.node=e}map(t,e){let{deleted:n,pos:s}=e.mapResult(this.anchor),r=t.resolve(s);return n?Y.near(r):new R(r)}content(){return new w(v.from(this.node),0,0)}eq(t){return t instanceof R&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ba(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new R(t.resolve(e.anchor))}static create(t,e){return new R(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}R.prototype.visible=!1,Y.jsonID("node",R);class ba{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:n}=t.mapResult(this.anchor);return e?new Ar(n,n):new ba(n)}resolve(t){let e=t.resolve(this.anchor),n=e.nodeAfter;return n&&R.isSelectable(n)?new R(e):Y.near(e)}}class et extends Y{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=w.empty){if(e==w.empty){t.delete(0,t.doc.content.size);let n=Y.atStart(t.doc);n.eq(t.selection)||t.setSelection(n)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new et(t)}map(t){return new et(t)}eq(t){return t instanceof et}getBookmark(){return mT}}Y.jsonID("all",et);const mT={map(){return this},resolve:i=>new et(i)};function hn(i,t,e,n,s,r=!1){if(t.inlineContent)return q.create(i,e);for(let a=n-(s>0?0:1);s>0?a<t.childCount:a>=0;a+=s){let l=t.child(a);if(l.isAtom){if(!r&&R.isSelectable(l))return R.create(i,e-(s<0?l.nodeSize:0))}else{let c=hn(i,l,e+s,s<0?l.childCount:0,s,r);if(c)return c}e+=l.nodeSize*s}return null}function iu(i,t,e){let n=i.steps.length-1;if(n<t)return;let a,s=i.steps[n];(s instanceof Ie||s instanceof we)&&(i.mapping.maps[n].forEach((l,c,h,d)=>{null==a&&(a=d)}),i.setSelection(Y.near(i.doc.resolve(a),e)))}class gT extends pT{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=2,this}ensureMarks(t){return te.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(t,e){super.addStep(t,e),this.updated=-3&this.updated,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let n=this.selection;return e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||te.none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,n){let s=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(s.text(t),!0):this.deleteSelection();{if(null==n&&(n=e),n=n??e,!t)return this.deleteRange(e,n);let r=this.storedMarks;if(!r){let a=this.doc.resolve(e);r=n==e?a.marks():a.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,s.text(t,r)),this.selection.empty||this.setSelection(Y.near(this.selection.$to)),this}}setMeta(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}getMeta(t){return this.meta["string"==typeof t?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function ru(i,t){return t&&i?i.bind(t):i}class is{constructor(t,e,n){this.name=t,this.init=ru(e.init,n),this.apply=ru(e.apply,n)}}const fT=[new is("doc",{init:i=>i.doc||i.schema.topNodeType.createAndFill(),apply:i=>i.doc}),new is("selection",{init:(i,t)=>i.selection||Y.atStart(t.doc),apply:i=>i.selection}),new is("storedMarks",{init:i=>i.storedMarks||null,apply:(i,t,e,n)=>n.selection.$cursor?i.storedMarks:null}),new is("scrollToSelection",{init:()=>0,apply:(i,t)=>i.scrolledIntoView?t+1:t})];class Ca{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=fT.slice(),e&&e.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new is(n.key,n.spec.state,n))})}}class dn{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=e){let s=this.config.plugins[n];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],n=this.applyInner(t),s=null;for(;;){let r=!1;for(let a=0;a<this.config.plugins.length;a++){let l=this.config.plugins[a];if(l.spec.appendTransaction){let c=s?s[a].n:0,h=s?s[a].state:this,d=c<e.length&&l.spec.appendTransaction.call(l,c?e.slice(c):e,h,n);if(d&&n.filterTransaction(d,a)){if(d.setMeta("appendedTransaction",t),!s){s=[];for(let u=0;u<this.config.plugins.length;u++)s.push(u<a?{state:n,n:e.length}:{state:this,n:0})}e.push(d),n=n.applyInner(d),r=!0}s&&(s[a]={state:n,n:e.length})}}if(!r)return{state:n,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new dn(this.config),n=this.config.fields;for(let s=0;s<n.length;s++){let r=n[s];e[r.name]=r.apply(t,this[r.name],this,e)}return e}get tr(){return new gT(this)}static create(t){let e=new Ca(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new dn(e);for(let s=0;s<e.fields.length;s++)n[e.fields[s].name]=e.fields[s].init(t,n);return n}reconfigure(t){let e=new Ca(this.schema,t.plugins),n=e.fields,s=new dn(e);for(let r=0;r<n.length;r++){let a=n[r].name;s[a]=this.hasOwnProperty(a)?this[a]:n[r].init(t,s)}return s}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(n=>n.toJSON())),t&&"object"==typeof t)for(let n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=t[n],r=s.spec.state;r&&r.toJSON&&(e[n]=r.toJSON.call(s,this[s.key]))}return e}static fromJSON(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let s=new Ca(t.schema,t.plugins),r=new dn(s);return s.fields.forEach(a=>{if("doc"==a.name)r.doc=bt.fromJSON(t.schema,e.doc);else if("selection"==a.name)r.selection=Y.fromJSON(r.doc,e.selection);else if("storedMarks"==a.name)e.storedMarks&&(r.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let l in n){let c=n[l],h=c.spec.state;if(c.key==a.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(e,l))return void(r[a.name]=h.fromJSON.call(c,t,e[l],r))}r[a.name]=a.init(t,r)}}),r}}function ou(i,t,e){for(let n in i){let s=i[n];s instanceof Function?s=s.bind(t):"handleDOMEvents"==n&&(s=ou(s,t,{})),e[n]=s}return e}class Tt{constructor(t){this.spec=t,this.props={},t.props&&ou(t.props,this,this.props),this.key=t.key?t.key.key:au("plugin")}getState(t){return t[this.key]}}const Ta=Object.create(null);function au(i){return i in Ta?i+"$"+ ++Ta[i]:(Ta[i]=0,i+"$")}class Ht{constructor(t="key"){this.key=au(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Se=function(i){for(var t=0;;t++)if(!(i=i.previousSibling))return t},ns=function(i){let t=i.assignedSlot||i.parentNode;return t&&11==t.nodeType?t.host:t};let ka=null;const $t=function(i,t,e){let n=ka||(ka=document.createRange());return n.setEnd(i,e??i.nodeValue.length),n.setStart(i,t||0),n},Ei=function(i,t,e,n){return e&&(lu(i,t,e,n,-1)||lu(i,t,e,n,1))},xT=/^(img|br|input|textarea|hr)$/i;function lu(i,t,e,n,s){for(;;){if(i==e&&t==n)return!0;if(t==(s<0?0:st(i))){let r=i.parentNode;if(!r||1!=r.nodeType||ss(i)||xT.test(i.nodeName)||"false"==i.contentEditable)return!1;t=Se(i)+(s<0?0:1),i=r}else{if(1!=i.nodeType)return!1;if("false"==(i=i.childNodes[t+(s<0?-1:0)]).contentEditable)return!1;t=s<0?st(i):0}}}function st(i){return 3==i.nodeType?i.nodeValue.length:i.childNodes.length}function ss(i){let t;for(let e=i;e&&!(t=e.pmViewDesc);e=e.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==i||t.contentDOM==i)}const Mr=function(i){return i.focusNode&&Ei(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)};function Fi(i,t){let e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=i,e.key=e.code=t,e}const kt=typeof navigator<"u"?navigator:null,cu=typeof document<"u"?document:null,Zt=kt&&kt.userAgent||"",wa=/Edge\/(\d+)/.exec(Zt),hu=/MSIE \d/.exec(Zt),Sa=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Zt),We=!!(hu||Sa||wa),ei=hu?document.documentMode:Sa?+Sa[1]:wa?+wa[1]:0,mt=!We&&/gecko\/(\d+)/i.test(Zt);mt&&/Firefox\/(\d+)/.exec(Zt);const Aa=!We&&/Chrome\/(\d+)/.exec(Zt),Pe=!!Aa,du=Aa?+Aa[1]:0,Ve=!We&&!!kt&&/Apple Computer/.test(kt.vendor),un=Ve&&(/Mobile\/\w+/.test(Zt)||!!kt&&kt.maxTouchPoints>2),rt=un||!!kt&&/Mac/.test(kt.platform),kT=!!kt&&/Win/.test(kt.platform),gt=/Android \d/.test(Zt),rs=!!cu&&"webkitFontSmoothing"in cu.documentElement.style,wT=rs?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ST(i){let t=i.defaultView&&i.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:i.documentElement.clientWidth,top:0,bottom:i.documentElement.clientHeight}}function Gt(i,t){return"number"==typeof i?i:i[t]}function AT(i){let t=i.getBoundingClientRect();return{left:t.left,right:t.left+i.clientWidth*(t.width/i.offsetWidth||1),top:t.top,bottom:t.top+i.clientHeight*(t.height/i.offsetHeight||1)}}function uu(i,t,e){let n=i.someProp("scrollThreshold")||0,s=i.someProp("scrollMargin")||5,r=i.dom.ownerDocument;for(let a=e||i.dom;a;a=ns(a)){if(1!=a.nodeType)continue;let l=a,c=l==r.body,h=c?ST(r):AT(l),d=0,u=0;if(t.top<h.top+Gt(n,"top")?u=-(h.top-t.top+Gt(s,"top")):t.bottom>h.bottom-Gt(n,"bottom")&&(u=t.bottom-t.top>h.bottom-h.top?t.top+Gt(s,"top")-h.top:t.bottom-h.bottom+Gt(s,"bottom")),t.left<h.left+Gt(n,"left")?d=-(h.left-t.left+Gt(s,"left")):t.right>h.right-Gt(n,"right")&&(d=t.right-h.right+Gt(s,"right")),d||u)if(c)r.defaultView.scrollBy(d,u);else{let p=l.scrollLeft,m=l.scrollTop;u&&(l.scrollTop+=u),d&&(l.scrollLeft+=d);let g=l.scrollLeft-p,_=l.scrollTop-m;t={left:t.left-g,top:t.top-_,right:t.right-g,bottom:t.bottom-_}}if(c||/^(fixed|sticky)$/.test(getComputedStyle(a).position))break}}function pu(i){let t=[],e=i.ownerDocument;for(let n=i;n&&(t.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),i!=e);n=ns(n));return t}function mu(i,t){for(let e=0;e<i.length;e++){let{dom:n,top:s,left:r}=i[e];n.scrollTop!=s+t&&(n.scrollTop=s+t),n.scrollLeft!=r&&(n.scrollLeft=r)}}let pn=null;function gu(i,t){let e,s,c,h,n=2e8,r=0,a=t.top,l=t.top;for(let d=i.firstChild,u=0;d;d=d.nextSibling,u++){let p;if(1==d.nodeType)p=d.getClientRects();else{if(3!=d.nodeType)continue;p=$t(d).getClientRects()}for(let m=0;m<p.length;m++){let g=p[m];if(g.top<=a&&g.bottom>=l){a=Math.max(g.bottom,a),l=Math.min(g.top,l);let _=g.left>t.left?g.left-t.left:g.right<t.left?t.left-g.right:0;if(_<n){e=d,n=_,s=_&&3==e.nodeType?{left:g.right<t.left?g.right:g.left,top:t.top}:t,1==d.nodeType&&_&&(r=u+(t.left>=(g.left+g.right)/2?1:0));continue}}else g.top>t.top&&!c&&g.left<=t.left&&g.right>=t.left&&(c=d,h={left:Math.max(g.left,Math.min(g.right,t.left)),top:g.top});!e&&(t.left>=g.right&&t.top>=g.top||t.left>=g.left&&t.top>=g.bottom)&&(r=u+1)}}return!e&&c&&(e=c,s=h,n=0),e&&3==e.nodeType?function ET(i,t){let e=i.nodeValue.length,n=document.createRange();for(let s=0;s<e;s++){n.setEnd(i,s+1),n.setStart(i,s);let r=ti(n,1);if(r.top!=r.bottom&&Da(t,r))return{node:i,offset:s+(t.left>=(r.left+r.right)/2?1:0)}}return{node:i,offset:0}}(e,s):!e||n&&1==e.nodeType?{node:i,offset:r}:gu(e,s)}function Da(i,t){return i.left>=t.left-1&&i.left<=t.right+1&&i.top>=t.top-1&&i.top<=t.bottom+1}function fu(i,t,e){let n=i.childNodes.length;if(n&&e.top<e.bottom)for(let s=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-e.top)/(e.bottom-e.top))-2)),r=s;;){let a=i.childNodes[r];if(1==a.nodeType){let l=a.getClientRects();for(let c=0;c<l.length;c++){let h=l[c];if(Da(t,h))return fu(a,t,h)}}if((r=(r+1)%n)==s)break}return i}function PT(i,t){let n,e=i.dom.ownerDocument,s=0,r=function TT(i,t,e){if(i.caretPositionFromPoint)try{let n=i.caretPositionFromPoint(t,e);if(n)return{node:n.offsetNode,offset:Math.min(st(n.offsetNode),n.offset)}}catch{}if(i.caretRangeFromPoint){let n=i.caretRangeFromPoint(t,e);if(n)return{node:n.startContainer,offset:Math.min(st(n.startContainer),n.startOffset)}}}(e,t.left,t.top);r&&({node:n,offset:s}=r);let l,a=(i.root.elementFromPoint?i.root:e).elementFromPoint(t.left,t.top);if(!a||!i.dom.contains(1!=a.nodeType?a.parentNode:a)){let h=i.dom.getBoundingClientRect();if(!Da(t,h)||(a=fu(i.dom,t,h),!a))return null}if(Ve)for(let h=a;n&&h;h=ns(h))h.draggable&&(n=void 0);if(a=function FT(i,t){let e=i.parentNode;return e&&/^li$/i.test(e.nodeName)&&t.left<i.getBoundingClientRect().left?e:i}(a,t),n){if(mt&&1==n.nodeType&&(s=Math.min(s,n.childNodes.length),s<n.childNodes.length)){let u,d=n.childNodes[s];"IMG"==d.nodeName&&(u=d.getBoundingClientRect()).right<=t.left&&u.bottom>t.top&&s++}let h;rs&&s&&1==n.nodeType&&1==(h=n.childNodes[s-1]).nodeType&&"false"==h.contentEditable&&h.getBoundingClientRect().top>=t.top&&s--,n==i.dom&&s==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?l=i.state.doc.content.size:(0==s||1!=n.nodeType||"BR"!=n.childNodes[s-1].nodeName)&&(l=function IT(i,t,e,n){let s=-1;for(let r=t,a=!1;r!=i.dom;){let l=i.docView.nearestDesc(r,!0);if(!l)return null;if(1==l.dom.nodeType&&(l.node.isBlock&&l.parent||!l.contentDOM)){let c=l.dom.getBoundingClientRect();if(l.node.isBlock&&l.parent&&(!a&&c.left>n.left||c.top>n.top?s=l.posBefore:(!a&&c.right<n.left||c.bottom<n.top)&&(s=l.posAfter),a=!0),!l.contentDOM&&s<0&&!l.node.isText)return(l.node.isBlock?n.top<(c.top+c.bottom)/2:n.left<(c.left+c.right)/2)?l.posBefore:l.posAfter}r=l.dom.parentNode}return s>-1?s:i.docView.posFromDOM(t,e,-1)}(i,n,s,t))}null==l&&(l=function OT(i,t,e){let{node:n,offset:s}=gu(t,e),r=-1;if(1==n.nodeType&&!n.firstChild){let a=n.getBoundingClientRect();r=a.left!=a.right&&e.left>(a.left+a.right)/2?1:-1}return i.docView.posFromDOM(n,s,r)}(i,a,t));let c=i.docView.nearestDesc(a,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function _u(i){return i.top<i.bottom||i.left<i.right}function ti(i,t){let e=i.getClientRects();if(e.length){let n=e[t<0?0:e.length-1];if(_u(n))return n}return Array.prototype.find.call(e,_u)||i.getBoundingClientRect()}const BT=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function xu(i,t,e){let{node:n,offset:s,atom:r}=i.docView.domFromPos(t,e<0?-1:1),a=rs||mt;if(3==n.nodeType){if(!a||!BT.test(n.nodeValue)&&(e<0?s:s!=n.nodeValue.length)){let c=s,h=s,d=e<0?1:-1;return e<0&&!s?(h++,d=-1):e>=0&&s==n.nodeValue.length?(c--,d=1):e<0?c--:h++,as(ti($t(n,c,h),d),d<0)}{let c=ti($t(n,s,s),e);if(mt&&s&&/\s/.test(n.nodeValue[s-1])&&s<n.nodeValue.length){let h=ti($t(n,s-1,s-1),-1);if(h.top==c.top){let d=ti($t(n,s,s+1),-1);if(d.top!=c.top)return as(d,d.left<h.left)}}return c}}if(!i.state.doc.resolve(t-(r||0)).parent.inlineContent){if(null==r&&s&&(e<0||s==st(n))){let c=n.childNodes[s-1];if(1==c.nodeType)return Ma(c.getBoundingClientRect(),!1)}if(null==r&&s<st(n)){let c=n.childNodes[s];if(1==c.nodeType)return Ma(c.getBoundingClientRect(),!0)}return Ma(n.getBoundingClientRect(),e>=0)}if(null==r&&s&&(e<0||s==st(n))){let c=n.childNodes[s-1],h=3==c.nodeType?$t(c,st(c)-(a?0:1)):1!=c.nodeType||"BR"==c.nodeName&&c.nextSibling?null:c;if(h)return as(ti(h,1),!1)}if(null==r&&s<st(n)){let c=n.childNodes[s];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let h=c?3==c.nodeType?$t(c,0,a?0:1):1==c.nodeType?c:null:null;if(h)return as(ti(h,-1),!0)}return as(ti(3==n.nodeType?$t(n):n,-e),e>=0)}function as(i,t){if(0==i.width)return i;let e=t?i.left:i.right;return{top:i.top,bottom:i.bottom,left:e,right:e}}function Ma(i,t){if(0==i.height)return i;let e=t?i.top:i.bottom;return{top:e,bottom:e,left:i.left,right:i.right}}function vu(i,t,e){let n=i.state,s=i.root.activeElement;n!=t&&i.updateState(t),s!=i.dom&&i.focus();try{return e()}finally{n!=t&&i.updateState(n),s!=i.dom&&s&&s.focus()}}const NT=/[\u0590-\u08ac]/;let yu=null,bu=null,Cu=!1;class ls{constructor(t,e,n,s){this.parent=t,this.children=e,this.dom=n,this.contentDOM=s,this.dirty=0,n.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,n){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,n=this.posAtStart;;e++){let s=this.children[e];if(s==t)return n;n+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){let r,a;if(t==this.contentDOM)r=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.previousSibling}for(;r&&(!(a=r.pmViewDesc)||a.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(a)+a.size:this.posAtStart}{let r,a;if(t==this.contentDOM)r=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.nextSibling}for(;r&&(!(a=r.pmViewDesc)||a.parent!=this);)r=r.nextSibling;return r?this.posBeforeChild(a):this.posAtEnd}}let s;if(t==this.dom&&this.contentDOM)s=e>Se(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(let r=t;;r=r.parentNode){if(r==this.dom){s=!1;break}if(r.previousSibling)break}if(null==s&&e==t.childNodes.length)for(let r=t;;r=r.parentNode){if(r==this.dom){s=!0;break}if(r.nextSibling)break}}return s??n>0?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let n=!0,s=t;s;s=s.parentNode){let a,r=this.getDesc(s);if(r&&(!e||r.node)){if(!n||!(a=r.nodeDOM)||(1==a.nodeType?a.contains(1==t.nodeType?t:t.parentNode):a==t))return r;n=!1}}}getDesc(t){let e=t.pmViewDesc;for(let n=e;n;n=n.parent)if(n==this)return e}posFromDOM(t,e,n){for(let s=t;s;s=s.parentNode){let r=this.getDesc(s);if(r)return r.localPosFromDOM(t,e,n)}return-1}descAt(t){for(let e=0,n=0;e<this.children.length;e++){let s=this.children[e],r=n+s.size;if(n==t&&r!=n){for(;!s.border&&s.children.length;)s=s.children[0];return s}if(t<r)return s.descAt(t-n-s.border);n=r}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let n=0,s=0;for(let r=0;n<this.children.length;n++){let a=this.children[n],l=r+a.size;if(l>t||a instanceof Su){s=t-r;break}r=l}if(s)return this.children[n].domFromPos(s-this.children[n].border,e);for(let r;n&&!(r=this.children[n-1]).size&&r instanceof ku&&r.side>=0;n--);if(e<=0){let r,a=!0;for(;r=n?this.children[n-1]:null,r&&r.dom.parentNode!=this.contentDOM;n--,a=!1);return r&&e&&a&&!r.border&&!r.domAtom?r.domFromPos(r.size,e):{node:this.contentDOM,offset:r?Se(r.dom)+1:0}}{let r,a=!0;for(;r=n<this.children.length?this.children[n]:null,r&&r.dom.parentNode!=this.contentDOM;n++,a=!1);return r&&a&&!r.border&&!r.domAtom?r.domFromPos(0,e):{node:this.contentDOM,offset:r?Se(r.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,n=0){if(0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,r=-1;for(let a=n,l=0;;l++){let c=this.children[l],h=a+c.size;if(-1==s&&t<=h){let d=a+c.border;if(t>=d&&e<=h-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(t,e,d);t=a;for(let u=l;u>0;u--){let p=this.children[u-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){s=Se(p.dom)+1;break}t-=p.size}-1==s&&(s=0)}if(s>-1&&(h>e||l==this.children.length-1)){e=h;for(let d=l+1;d<this.children.length;d++){let u=this.children[d];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){r=Se(u.dom);break}e+=u.size}-1==r&&(r=this.contentDOM.childNodes.length);break}a=h}return{node:this.contentDOM,from:t,to:e,fromOffset:s,toOffset:r}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:n}=this.domFromPos(t,0);if(1!=e.nodeType||n==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[n]}setSelection(t,e,n,s=!1){let r=Math.min(t,e),a=Math.max(t,e);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],_=m+g.size;if(r>m&&a<_)return g.setSelection(t-m-g.border,e-m-g.border,n,s);m=_}let l=this.domFromPos(t,t?-1:1),c=e==t?l:this.domFromPos(e,e?-1:1),h=n.getSelection(),d=!1;if((mt||Ve)&&t==e){let{node:p,offset:m}=l;if(3==p.nodeType){if(d=!(!m||"\n"!=p.nodeValue[m-1]),d&&m==p.nodeValue.length)for(let _,g=p;g;g=g.parentNode){if(_=g.nextSibling){"BR"==_.nodeName&&(l=c={node:_.parentNode,offset:Se(_)+1});break}let f=g.pmViewDesc;if(f&&f.node&&f.node.isBlock)break}}else{let g=p.childNodes[m-1];d=g&&("BR"==g.nodeName||"false"==g.contentEditable)}}if(mt&&h.focusNode&&h.focusNode!=c.node&&1==h.focusNode.nodeType){let p=h.focusNode.childNodes[h.focusOffset];p&&"false"==p.contentEditable&&(s=!0)}if(!(s||d&&Ve)&&Ei(l.node,l.offset,h.anchorNode,h.anchorOffset)&&Ei(c.node,c.offset,h.focusNode,h.focusOffset))return;let u=!1;if((h.extend||t==e)&&!d){h.collapse(l.node,l.offset);try{t!=e&&h.extend(c.node,c.offset),u=!0}catch{}}if(!u){if(t>e){let m=l;l=c,c=m}let p=document.createRange();p.setEnd(c.node,c.offset),p.setStart(l.node,l.offset),h.removeAllRanges(),h.addRange(p)}}ignoreMutation(t){return!this.contentDOM&&"selection"!=t.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let n=0,s=0;s<this.children.length;s++){let r=this.children[s],a=n+r.size;if(n==a?t<=a&&e>=n:t<a&&e>n){let l=n+r.border,c=a-r.border;if(t>=l&&e<=c)return this.dirty=t==n||e==a?2:1,void(t!=l||e!=c||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(t-l,e-l):r.dirty=3);r.dirty=r.dom!=r.contentDOM||r.dom.parentNode!=this.contentDOM||r.children.length?3:2}n=a}this.dirty=2}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let n=1==t?2:1;e.dirty<n&&(e.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(t){return!1}}class ku extends ls{constructor(t,e,n,s){let r,a=e.type.toDOM;if("function"==typeof a&&(a=a(n,()=>r?r.parent?r.parent.posBeforeChild(r):void 0:s)),!e.type.spec.raw){if(1!=a.nodeType){let l=document.createElement("span");l.appendChild(a),a=l}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(t,[],a,null),this.widget=e,this.widget=e,r=this}matchesWidget(t){return 0==this.dirty&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return!!e&&e(t)}ignoreMutation(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class HT extends ls{constructor(t,e,n,s){super(t,[],e,null),this.textDOM=n,this.text=s}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}class Ii extends ls{constructor(t,e,n,s,r){super(t,[],n,s),this.mark=e,this.spec=r}static create(t,e,n,s){let r=s.nodeViews[e.type.name],a=r&&r(e,s,n);return(!a||!a.dom)&&(a=Li.renderSpec(document,e.type.spec.toDOM(e,n),null,e.attrs)),new Ii(t,e,a.dom,a.contentDOM||a.dom,a)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return 3!=this.dirty&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),0!=this.dirty){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=0}}slice(t,e,n){let s=Ii.create(this.parent,this.mark,!0,n),r=this.children,a=this.size;e<a&&(r=Ea(r,e,a,n)),t>0&&(r=Ea(r,0,t,n));for(let l=0;l<r.length;l++)r[l].parent=s;return s.children=r,s}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ii extends ls{constructor(t,e,n,s,r,a,l,c,h){super(t,[],r,a),this.node=e,this.outerDeco=n,this.innerDeco=s,this.nodeDOM=l}static create(t,e,n,s,r,a){let c,l=r.nodeViews[e.type.name],h=l&&l(e,r,()=>c?c.parent?c.parent.posBeforeChild(c):void 0:a,n,s),d=h&&h.dom,u=h&&h.contentDOM;if(e.isText)if(d){if(3!=d.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else d=document.createTextNode(e.text);else d||({dom:d,contentDOM:u}=Li.renderSpec(document,e.type.spec.toDOM(e),null,e.attrs));!u&&!e.isText&&"BR"!=d.nodeName&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),e.type.spec.draggable&&(d.draggable=!0));let p=d;return d=Mu(d,n,e),h?c=new $T(t,e,n,s,d,u||null,p,h,r,a+1):e.isText?new Lr(t,e,n,s,d,p,r):new ii(t,e,n,s,d,u||null,p,r,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let e=this.children.length-1;e>=0;e--){let n=this.children[e];if(this.dom.contains(n.dom.parentNode)){t.contentElement=n.dom.parentNode;break}}t.contentElement||(t.getContent=()=>v.empty)}else t.contentElement=this.contentDOM;else t.getContent=()=>this.node.content;return t}matchesNode(t,e,n){return 0==this.dirty&&t.eq(this.node)&&Er(e,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let n=this.node.inlineContent,s=e,r=t.composing?this.localCompositionInfo(t,e):null,a=r&&r.pos>-1?r:null,l=r&&r.pos<0,c=new XT(this,a&&a.node,t);(function jT(i,t,e,n){let s=t.locals(i),r=0;if(0==s.length){for(let h=0;h<i.childCount;h++){let d=i.child(h);n(d,s,t.forChild(r,d),h),r+=d.nodeSize}return}let a=0,l=[],c=null;for(let h=0;;){let d,u,p,m;for(;a<s.length&&s[a].to==r;){let f=s[a++];f.widget&&(d?(u||(u=[d])).push(f):d=f)}if(d)if(u){u.sort(WT);for(let f=0;f<u.length;f++)e(u[f],h,!!c)}else e(d,h,!!c);if(c)m=-1,p=c,c=null;else{if(!(h<i.childCount))break;m=h,p=i.child(h++)}for(let f=0;f<l.length;f++)l[f].to<=r&&l.splice(f--,1);for(;a<s.length&&s[a].from<=r&&s[a].to>r;)l.push(s[a++]);let g=r+p.nodeSize;if(p.isText){let f=g;a<s.length&&s[a].from<f&&(f=s[a].from);for(let x=0;x<l.length;x++)l[x].to<f&&(f=l[x].to);f<g&&(c=p.cut(f-r),p=p.cut(0,f-r),g=f,m=-1)}else for(;a<s.length&&s[a].to<g;)a++;n(p,p.isInline&&!p.isLeaf?l.filter(f=>!f.inline):l.slice(),t.forChild(r,p),m),r=g}})(this.node,this.innerDeco,(h,d,u)=>{h.spec.marks?c.syncToMarks(h.spec.marks,n,t):h.type.side>=0&&!u&&c.syncToMarks(d==this.node.childCount?te.none:this.node.child(d).marks,n,t),c.placeWidget(h,t,s)},(h,d,u,p)=>{let m;c.syncToMarks(h.marks,n,t),c.findNodeMatch(h,d,u,p)||l&&t.state.selection.from>s&&t.state.selection.to<s+h.nodeSize&&(m=c.findIndexWithChild(r.node))>-1&&c.updateNodeAt(h,d,u,m,t)||c.updateNextNode(h,d,u,t,p,s)||c.addNode(h,d,u,t,s),s+=h.nodeSize}),c.syncToMarks([],n,t),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||2==this.dirty)&&(a&&this.protectLocalComposition(t,a),Au(this.contentDOM,this.children,t),un&&function UT(i){if("UL"==i.nodeName||"OL"==i.nodeName){let t=i.style.cssText;i.style.cssText=t+"; list-style: square !important",window.getComputedStyle(i),i.style.cssText=t}}(this.dom))}localCompositionInfo(t,e){let{from:n,to:s}=t.state.selection;if(!(t.state.selection instanceof q)||n<e||s>e+this.node.content.size)return null;let r=t.input.compositionNode;if(!r||!this.dom.contains(r.parentNode))return null;if(this.node.inlineContent){let a=r.nodeValue,l=function QT(i,t,e,n){for(let s=0,r=0;s<i.childCount&&r<=n;){let a=i.child(s++),l=r;if(r+=a.nodeSize,!a.isText)continue;let c=a.text;for(;s<i.childCount;){let h=i.child(s++);if(r+=h.nodeSize,!h.isText)break;c+=h.text}if(r>=e){if(r>=n&&c.slice(n-t.length-l,n-l)==t)return n-t.length;let h=l<n?c.lastIndexOf(t,n-l-1):-1;if(h>=0&&h+t.length+l>=e)return l+h;if(e==n&&c.length>=n+t.length-l&&c.slice(n-l,n-l+t.length)==t)return n}}return-1}(this.node.content,a,n-e,s-e);return l<0?null:{node:r,pos:l,text:a}}return{node:r,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:n,text:s}){if(this.getDesc(e))return;let r=e;for(;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=void 0)}let a=new HT(this,r,e,s);t.input.compositionNodes.push(a),this.children=Ea(this.children,n,n+s.length,t,a)}update(t,e,n,s){return!(3==this.dirty||!t.sameMarkup(this.node)||(this.updateInner(t,e,n,s),0))}updateInner(t,e,n,s){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=0}updateOuterDeco(t){if(Er(t,this.outerDeco))return;let e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Du(this.dom,this.nodeDOM,La(this.outerDeco,this.node,e),La(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function wu(i,t,e,n,s){Mu(n,t,i);let r=new ii(void 0,i,t,e,n,n,n,s,0);return r.contentDOM&&r.updateChildren(s,0),r}class Lr extends ii{constructor(t,e,n,s,r,a,l){super(t,e,n,s,r,null,a,l,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,e,n,s){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node)||(this.updateOuterDeco(e),(0!=this.dirty||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=t,this.dirty=0,0))}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,n){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,n)}ignoreMutation(t){return"characterData"!=t.type&&"selection"!=t.type}slice(t,e,n){let s=this.node.cut(t,e),r=document.createTextNode(s.text);return new Lr(this.parent,s,this.outerDeco,this.innerDeco,r,r,n)}markDirty(t,e){super.markDirty(t,e),this.dom!=this.nodeDOM&&(0==t||e==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}isText(t){return this.node.text==t}}class Su extends ls{parseRule(){return{ignore:!0}}matchesHack(t){return 0==this.dirty&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class $T extends ii{constructor(t,e,n,s,r,a,l,c,h,d){super(t,e,n,s,r,a,l,h,d),this.spec=c}update(t,e,n,s){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let r=this.spec.update(t,e,n);return r&&this.updateInner(t,e,n,s),r}return!(!this.contentDOM&&!t.isLeaf)&&super.update(t,e,n,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,n,s){this.spec.setSelection?this.spec.setSelection(t,e,n):super.setSelection(t,e,n,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function Au(i,t,e){let n=i.firstChild,s=!1;for(let r=0;r<t.length;r++){let a=t[r],l=a.dom;if(l.parentNode==i){for(;l!=n;)n=Lu(n),s=!0;n=n.nextSibling}else s=!0,i.insertBefore(l,n);if(a instanceof Ii){let c=n?n.previousSibling:i.lastChild;Au(a.contentDOM,a.children,e),n=c?c.nextSibling:i.firstChild}}for(;n;)n=Lu(n),s=!0;s&&e.trackWrites==i&&(e.trackWrites=null)}const cs=function(i){i&&(this.nodeName=i)};cs.prototype=Object.create(null);const Pi=[new cs];function La(i,t,e){if(0==i.length)return Pi;let n=e?Pi[0]:new cs,s=[n];for(let r=0;r<i.length;r++){let a=i[r].type.attrs;if(a){a.nodeName&&s.push(n=new cs(a.nodeName));for(let l in a){let c=a[l];null!=c&&(e&&1==s.length&&s.push(n=new cs(t.isInline?"span":"div")),"class"==l?n.class=(n.class?n.class+" ":"")+c:"style"==l?n.style=(n.style?n.style+";":"")+c:"nodeName"!=l&&(n[l]=c))}}}return s}function Du(i,t,e,n){if(e==Pi&&n==Pi)return t;let s=t;for(let r=0;r<n.length;r++){let a=n[r],l=e[r];if(r){let c;l&&l.nodeName==a.nodeName&&s!=i&&(c=s.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(s),l=Pi[0]),s=c}GT(s,l||Pi[0],a)}return s}function GT(i,t,e){for(let n in t)"class"!=n&&"style"!=n&&"nodeName"!=n&&!(n in e)&&i.removeAttribute(n);for(let n in e)"class"!=n&&"style"!=n&&"nodeName"!=n&&e[n]!=t[n]&&i.setAttribute(n,e[n]);if(t.class!=e.class){let n=t.class?t.class.split(" ").filter(Boolean):[],s=e.class?e.class.split(" ").filter(Boolean):[];for(let r=0;r<n.length;r++)-1==s.indexOf(n[r])&&i.classList.remove(n[r]);for(let r=0;r<s.length;r++)-1==n.indexOf(s[r])&&i.classList.add(s[r]);0==i.classList.length&&i.removeAttribute("class")}if(t.style!=e.style){if(t.style){let s,n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;s=n.exec(t.style);)i.style.removeProperty(s[1])}e.style&&(i.style.cssText+=e.style)}}function Mu(i,t,e){return Du(i,i,Pi,La(t,e,1!=i.nodeType))}function Er(i,t){if(i.length!=t.length)return!1;for(let e=0;e<i.length;e++)if(!i[e].type.eq(t[e].type))return!1;return!0}function Lu(i){let t=i.nextSibling;return i.parentNode.removeChild(i),t}class XT{constructor(t,e,n){this.lock=e,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=function YT(i,t){let e=t,n=e.children.length,s=i.childCount,r=new Map,a=[];e:for(;s>0;){let l;for(;;)if(n){let h=e.children[n-1];if(!(h instanceof Ii)){l=h,n--;break}e=h,n=h.children.length}else{if(e==t)break e;n=e.parent.children.indexOf(e),e=e.parent}let c=l.node;if(c){if(c!=i.child(s-1))break;--s,r.set(l,s),a.push(l)}}return{index:s,matched:r,matches:a.reverse()}}(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,n){let s=0,r=this.stack.length>>1,a=Math.min(r,t.length);for(;s<a&&(s==r-1?this.top:this.stack[s+1<<1]).matchesMark(t[s])&&!1!==t[s].type.spec.spanning;)s++;for(;s<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<t.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let h=this.top.children[c];if(h.matchesMark(t[r])&&!this.isLocked(h.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=Ii.create(this.top,t[r],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,r++}}findNodeMatch(t,e,n,s){let a,r=-1;if(s>=this.preMatch.index&&(a=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&a.matchesNode(t,e,n))r=this.top.children.indexOf(a,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let h=this.top.children[l];if(h.matchesNode(t,e,n)&&!this.preMatch.matched.has(h)){r=l;break}}return!(r<0||(this.destroyBetween(this.index,r),this.index++,0))}updateNodeAt(t,e,n,s,r){let a=this.top.children[s];return 3==a.dirty&&a.dom==a.contentDOM&&(a.dirty=2),!!a.update(t,e,n,r)&&(this.destroyBetween(this.index,s),this.index++,!0)}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let n=t.pmViewDesc;if(n)for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==n)return s;return-1}t=e}}updateNextNode(t,e,n,s,r,a){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof ii){let h=this.preMatch.matched.get(c);if(null!=h&&h!=r)return!1;let u,d=c.dom,p=this.isLocked(d)&&!(t.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==t.text&&3!=c.dirty&&Er(e,c.outerDeco));if(!p&&c.update(t,e,n,s))return this.destroyBetween(this.index,l),c.dom!=d&&(this.changed=!0),this.index++,!0;if(!p&&(u=this.recreateWrapper(c,t,e,n,s,a)))return this.destroyBetween(this.index,l),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=2,u.updateChildren(s,a+1),u.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,e,n,s,r,a){if(t.dirty||e.isAtom||!t.children.length||!t.node.content.eq(e.content)||!Er(n,t.outerDeco)||!s.eq(t.innerDeco))return null;let l=ii.create(this.top,e,n,s,r,a);if(l.contentDOM){l.children=t.children,t.children=[];for(let c of l.children)c.parent=l}return t.destroy(),l}addNode(t,e,n,s,r){let a=ii.create(this.top,t,e,n,s,r);a.contentDOM&&a.updateChildren(s,r+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(t,e,n){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(!s||!s.matchesWidget(t)||t!=s.widget&&s.widget.type.toDOM.parentNode){let r=new ku(this.top,t,e,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;for(;t instanceof Ii;)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof Lr)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Ve||Pe)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let n=document.createElement(t);"IMG"==t&&(n.className="ProseMirror-separator",n.alt=""),"BR"==t&&(n.className="ProseMirror-trailingBreak");let s=new Su(this.top,[],n,null);e!=this.top?e.children.push(s):e.children.splice(this.index++,0,s),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||1==t.nodeType&&t.contains(this.lock.parentNode))}}function WT(i,t){return i.type.side-t.type.side}function Ea(i,t,e,n,s){let r=[];for(let a=0,l=0;a<i.length;a++){let c=i[a],h=l,d=l+=c.size;h>=e||d<=t?r.push(c):(h<t&&r.push(c.slice(0,t-h,n)),s&&(r.push(s),s=void 0),d>e&&r.push(c.slice(e-h,c.size,n)))}return r}function Fa(i,t=null){let e=i.domSelectionRange(),n=i.state.doc;if(!e.focusNode)return null;let s=i.docView.nearestDesc(e.focusNode),r=s&&0==s.size,a=i.docView.posFromDOM(e.focusNode,e.focusOffset,1);if(a<0)return null;let c,h,l=n.resolve(a);if(Mr(e)){for(c=a;s&&!s.node;)s=s.parent;let u=s.node;if(s&&u.isAtom&&R.isSelectable(u)&&s.parent&&(!u.isInline||!function bT(i,t,e){for(let n=0==t,s=t==st(i);n||s;){if(i==e)return!0;let r=Se(i);if(!(i=i.parentNode))return!1;n=n&&0==r,s=s&&r==st(i)}}(e.focusNode,e.focusOffset,s.dom))){let p=s.posBefore;h=new R(a==p?l:n.resolve(p))}}else{if(e instanceof i.dom.ownerDocument.defaultView.Selection&&e.rangeCount>1){let u=a,p=a;for(let m=0;m<e.rangeCount;m++){let g=e.getRangeAt(m);u=Math.min(u,i.docView.posFromDOM(g.startContainer,g.startOffset,1)),p=Math.max(p,i.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(u<0)return null;[c,a]=p==i.state.selection.anchor?[p,u]:[u,p],l=n.resolve(a)}else c=i.docView.posFromDOM(e.anchorNode,e.anchorOffset,1);if(c<0)return null}let d=n.resolve(c);return h||(h=Ia(i,d,l,"pointer"==t||i.state.selection.head<l.pos&&!r?1:-1)),h}function Eu(i){return i.editable?i.hasFocus():Nu(i)&&document.activeElement&&document.activeElement.contains(i.dom)}function Xt(i,t=!1){let e=i.state.selection;if(Pu(i,e),Eu(i)){if(!t&&i.input.mouseDown&&i.input.mouseDown.allowDefault&&Pe){let n=i.domSelectionRange(),s=i.domObserver.currentSelection;if(n.anchorNode&&s.anchorNode&&Ei(n.anchorNode,n.anchorOffset,s.anchorNode,s.anchorOffset))return i.input.mouseDown.delayedSelectionSync=!0,void i.domObserver.setCurSelection()}if(i.domObserver.disconnectSelection(),i.cursorWrapper)!function KT(i){let t=i.domSelection(),e=document.createRange();if(!t)return;let n=i.cursorWrapper.dom,s="IMG"==n.nodeName;s?e.setStart(n.parentNode,Se(n)+1):e.setStart(n,0),e.collapse(!0),t.removeAllRanges(),t.addRange(e),!s&&!i.state.selection.visible&&We&&ei<=11&&(n.disabled=!0,n.disabled=!1)}(i);else{let r,a,{anchor:n,head:s}=e;Fu&&!(e instanceof q)&&(e.$from.parent.inlineContent||(r=Ou(i,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(a=Ou(i,e.to))),i.docView.setSelection(n,s,i.root,t),Fu&&(r&&Iu(r),a&&Iu(a)),e.visible?i.dom.classList.remove("ProseMirror-hideselection"):(i.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function qT(i){let t=i.dom.ownerDocument;t.removeEventListener("selectionchange",i.input.hideSelectionGuard);let e=i.domSelectionRange(),n=e.anchorNode,s=e.anchorOffset;t.addEventListener("selectionchange",i.input.hideSelectionGuard=()=>{(e.anchorNode!=n||e.anchorOffset!=s)&&(t.removeEventListener("selectionchange",i.input.hideSelectionGuard),setTimeout(()=>{(!Eu(i)||i.state.selection.visible)&&i.dom.classList.remove("ProseMirror-hideselection")},20))})}(i))}i.domObserver.setCurSelection(),i.domObserver.connectSelection()}}const Fu=Ve||Pe&&du<63;function Ou(i,t){let{node:e,offset:n}=i.docView.domFromPos(t,0),s=n<e.childNodes.length?e.childNodes[n]:null,r=n?e.childNodes[n-1]:null;if(Ve&&s&&"false"==s.contentEditable)return Oa(s);if(!(s&&"false"!=s.contentEditable||r&&"false"!=r.contentEditable)){if(s)return Oa(s);if(r)return Oa(r)}}function Oa(i){return i.contentEditable="true",Ve&&i.draggable&&(i.draggable=!1,i.wasDraggable=!0),i}function Iu(i){i.contentEditable="false",i.wasDraggable&&(i.draggable=!0,i.wasDraggable=null)}function Pu(i,t){if(t instanceof R){let e=i.docView.descAt(t.from);e!=i.lastSelectedViewDesc&&(Bu(i),e&&e.selectNode(),i.lastSelectedViewDesc=e)}else Bu(i)}function Bu(i){i.lastSelectedViewDesc&&(i.lastSelectedViewDesc.parent&&i.lastSelectedViewDesc.deselectNode(),i.lastSelectedViewDesc=void 0)}function Ia(i,t,e,n){return i.someProp("createSelectionBetween",s=>s(i,t,e))||q.between(t,e,n)}function Ru(i){return!(i.editable&&!i.hasFocus())&&Nu(i)}function Nu(i){let t=i.domSelectionRange();if(!t.anchorNode)return!1;try{return i.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(i.editable||i.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function Pa(i,t){let{$anchor:e,$head:n}=i.selection,s=t>0?e.max(n):e.min(n),r=s.parent.inlineContent?s.depth?i.doc.resolve(t>0?s.after():s.before()):null:s;return r&&Y.findFrom(r,t)}function ni(i,t){return i.dispatch(i.state.tr.setSelection(t).scrollIntoView()),!0}function Vu(i,t,e){let n=i.state.selection;if(!(n instanceof q)){if(n instanceof R&&n.node.isInline)return ni(i,new q(t>0?n.$to:n.$from));{let s=Pa(i.state,t);return!!s&&ni(i,s)}}if(e.indexOf("s")>-1){let{$head:s}=n,r=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!r||r.isText||!r.isLeaf)return!1;let a=i.state.doc.resolve(s.pos+r.nodeSize*(t<0?-1:1));return ni(i,new q(n.$anchor,a))}if(!n.empty)return!1;if(i.endOfTextblock(t>0?"forward":"backward")){let s=Pa(i.state,t);return!!(s&&s instanceof R)&&ni(i,s)}if(!(rt&&e.indexOf("m")>-1)){let a,s=n.$head,r=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!r||r.isText)return!1;let l=t<0?s.pos-r.nodeSize:s.pos;return!!(r.isAtom||(a=i.docView.descAt(l))&&!a.contentDOM)&&(R.isSelectable(r)?ni(i,new R(t<0?i.state.doc.resolve(s.pos-r.nodeSize):s)):!!rs&&ni(i,new q(i.state.doc.resolve(t<0?l:l+r.nodeSize))))}}function Fr(i){return 3==i.nodeType?i.nodeValue.length:i.childNodes.length}function hs(i,t){let e=i.pmViewDesc;return e&&0==e.size&&(t<0||i.nextSibling||"BR"!=i.nodeName)}function mn(i,t){return t<0?function ZT(i){let t=i.domSelectionRange(),e=t.focusNode,n=t.focusOffset;if(!e)return;let s,r,a=!1;for(mt&&1==e.nodeType&&n<Fr(e)&&hs(e.childNodes[n],-1)&&(a=!0);;)if(n>0){if(1!=e.nodeType)break;{let l=e.childNodes[n-1];if(hs(l,-1))s=e,r=--n;else{if(3!=l.nodeType)break;e=l,n=e.nodeValue.length}}}else{if(zu(e))break;{let l=e.previousSibling;for(;l&&hs(l,-1);)s=e.parentNode,r=Se(l),l=l.previousSibling;if(l)e=l,n=Fr(e);else{if(e=e.parentNode,e==i.dom)break;n=0}}}a?Ba(i,e,n):s&&Ba(i,s,r)}(i):function ek(i){let t=i.domSelectionRange(),e=t.focusNode,n=t.focusOffset;if(!e)return;let r,a,s=Fr(e);for(;;)if(n<s){if(1!=e.nodeType)break;if(!hs(e.childNodes[n],1))break;r=e,a=++n}else{if(zu(e))break;{let l=e.nextSibling;for(;l&&hs(l,1);)r=l.parentNode,a=Se(l)+1,l=l.nextSibling;if(l)e=l,n=0,s=Fr(e);else{if(e=e.parentNode,e==i.dom)break;n=s=0}}}r&&Ba(i,r,a)}(i)}function zu(i){let t=i.pmViewDesc;return t&&t.node&&t.node.isBlock}function Ba(i,t,e){if(3!=t.nodeType){let r,a;(a=function tk(i,t){for(;i&&t==i.childNodes.length&&!ss(i);)t=Se(i)+1,i=i.parentNode;for(;i&&t<i.childNodes.length;){let e=i.childNodes[t];if(3==e.nodeType)return e;if(1==e.nodeType&&"false"==e.contentEditable)break;i=e,t=0}}(t,e))?(t=a,e=0):(r=function ik(i,t){for(;i&&!t&&!ss(i);)t=Se(i),i=i.parentNode;for(;i&&t;){let e=i.childNodes[t-1];if(3==e.nodeType)return e;if(1==e.nodeType&&"false"==e.contentEditable)break;t=(i=e).childNodes.length}}(t,e))&&(t=r,e=r.nodeValue.length)}let n=i.domSelection();if(!n)return;if(Mr(n)){let r=document.createRange();r.setEnd(t,e),r.setStart(t,e),n.removeAllRanges(),n.addRange(r)}else n.extend&&n.extend(t,e);i.domObserver.setCurSelection();let{state:s}=i;setTimeout(()=>{i.state==s&&Xt(i)},50)}function Hu(i,t){let e=i.state.doc.resolve(t);if(!Pe&&!kT&&e.parent.inlineContent){let s=i.coordsAtPos(t);if(t>e.start()){let r=i.coordsAtPos(t-1),a=(r.top+r.bottom)/2;if(a>s.top&&a<s.bottom&&Math.abs(r.left-s.left)>1)return r.left<s.left?"ltr":"rtl"}if(t<e.end()){let r=i.coordsAtPos(t+1),a=(r.top+r.bottom)/2;if(a>s.top&&a<s.bottom&&Math.abs(r.left-s.left)>1)return r.left>s.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(i.dom).direction?"rtl":"ltr"}function $u(i,t,e){let n=i.state.selection;if(n instanceof q&&!n.empty||e.indexOf("s")>-1||rt&&e.indexOf("m")>-1)return!1;let{$from:s,$to:r}=n;if(!s.parent.inlineContent||i.endOfTextblock(t<0?"up":"down")){let a=Pa(i.state,t);if(a&&a instanceof R)return ni(i,a)}if(!s.parent.inlineContent){let a=t<0?s:r,l=n instanceof et?Y.near(a,t):Y.findFrom(a,t);return!!l&&ni(i,l)}return!1}function Gu(i,t){if(!(i.state.selection instanceof q))return!0;let{$head:e,$anchor:n,empty:s}=i.state.selection;if(!e.sameParent(n))return!0;if(!s)return!1;if(i.endOfTextblock(t>0?"forward":"backward"))return!0;let r=!e.textOffset&&(t<0?e.nodeBefore:e.nodeAfter);if(r&&!r.isText){let a=i.state.tr;return t<0?a.delete(e.pos-r.nodeSize,e.pos):a.delete(e.pos,e.pos+r.nodeSize),i.dispatch(a),!0}return!1}function Xu(i,t,e){i.domObserver.stop(),t.contentEditable=e,i.domObserver.start()}function Yu(i,t){i.someProp("transformCopied",m=>{t=m(t,i)});let e=[],{content:n,openStart:s,openEnd:r}=t;for(;s>1&&r>1&&1==n.childCount&&1==n.firstChild.childCount;){s--,r--;let m=n.firstChild;e.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),n=m.content}let a=i.someProp("clipboardSerializer")||Li.fromSchema(i.state.schema),l=Zu(),c=l.createElement("div");c.appendChild(a.serializeFragment(n,{document:l}));let d,h=c.firstChild,u=0;for(;h&&1==h.nodeType&&(d=Ku[h.nodeName.toLowerCase()]);){for(let m=d.length-1;m>=0;m--){let g=l.createElement(d[m]);for(;c.firstChild;)g.appendChild(c.firstChild);c.appendChild(g),u++}h=c.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${s} ${r}${u?` -${u}`:""} ${JSON.stringify(e)}`),{dom:c,text:i.someProp("clipboardTextSerializer",m=>m(t,i))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function Wu(i,t,e,n,s){let a,l,r=s.parent.type.spec.code;if(!e&&!t)return null;let c=t&&(n||r||!e);if(c){if(i.someProp("transformPastedText",p=>{t=p(t,r||n,i)}),r)return t?new w(v.from(i.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):w.empty;let u=i.someProp("clipboardTextParser",p=>p(t,s,n,i));if(u)l=u;else{let p=s.marks(),{schema:m}=i.state,g=Li.fromSchema(m);a=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(_=>{let f=a.appendChild(document.createElement("p"));_&&f.appendChild(g.serializeNode(m.text(_,p)))})}}else i.someProp("transformPastedHTML",u=>{e=u(e,i)}),a=function ck(i){let t=/^(\s*<meta [^>]*>)*/.exec(i);t&&(i=i.slice(t[0].length));let s,e=Zu().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(i);if((s=n&&Ku[n[1].toLowerCase()])&&(i=s.map(r=>"<"+r+">").join("")+i+s.map(r=>"</"+r+">").reverse().join("")),e.innerHTML=function lk(i){let t=window.trustedTypes;return t?(Na||(Na=t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),Na.createHTML(i)):i}(i),s)for(let r=0;r<s.length;r++)e=e.querySelector(s[r])||e;return e}(e),rs&&function hk(i){let t=i.querySelectorAll(Pe?"span:not([class]):not([style])":"span.Apple-converted-space");for(let e=0;e<t.length;e++){let n=t[e];1==n.childNodes.length&&"\xa0"==n.textContent&&n.parentNode&&n.parentNode.replaceChild(i.ownerDocument.createTextNode(" "),n)}}(a);let h=a&&a.querySelector("[data-pm-slice]"),d=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0;u--){let p=a.firstChild;for(;p&&1!=p.nodeType;)p=p.nextSibling;if(!p)break;a=p}if(l||(l=(i.someProp("clipboardParser")||i.someProp("domParser")||Mi.fromSchema(i.state.schema)).parseSlice(a,{preserveWhitespace:!(!c&&!d),context:s,ruleFromNode:p=>"BR"!=p.nodeName||p.nextSibling||!p.parentNode||ok.test(p.parentNode.nodeName)?null:{ignore:!0}})),d)l=function dk(i,t){if(!i.size)return i;let n,e=i.content.firstChild.type.schema;try{n=JSON.parse(t)}catch{return i}let{content:s,openStart:r,openEnd:a}=i;for(let l=n.length-2;l>=0;l-=2){let c=e.nodes[n[l]];if(!c||c.hasRequiredAttrs())break;s=v.from(c.create(n[l+1],s)),r++,a++}return new w(s,r,a)}(qu(l,+d[1],+d[2]),d[4]);else if(l=w.maxOpen(function ak(i,t){if(i.childCount<2)return i;for(let e=t.depth;e>=0;e--){let r,s=t.node(e).contentMatchAt(t.index(e)),a=[];if(i.forEach(l=>{if(!a)return;let h,c=s.findWrapping(l.type);if(!c)return a=null;if(h=a.length&&r.length&&Uu(c,r,l,a[a.length-1],0))a[a.length-1]=h;else{a.length&&(a[a.length-1]=Qu(a[a.length-1],r.length));let d=ju(l,c);a.push(d),s=s.matchType(d.type),r=c}}),a)return v.from(a)}return i}(l.content,s),!0),l.openStart||l.openEnd){let u=0,p=0;for(let m=l.content.firstChild;u<l.openStart&&!m.type.spec.isolating;u++,m=m.firstChild);for(let m=l.content.lastChild;p<l.openEnd&&!m.type.spec.isolating;p++,m=m.lastChild);l=qu(l,u,p)}return i.someProp("transformPasted",u=>{l=u(l,i)}),l}const ok=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function ju(i,t,e=0){for(let n=t.length-1;n>=e;n--)i=t[n].create(null,v.from(i));return i}function Uu(i,t,e,n,s){if(s<i.length&&s<t.length&&i[s]==t[s]){let r=Uu(i,t,e,n.lastChild,s+1);if(r)return n.copy(n.content.replaceChild(n.childCount-1,r));if(n.contentMatchAt(n.childCount).matchType(s==i.length-1?e.type:i[s+1]))return n.copy(n.content.append(v.from(ju(e,i,s+1))))}}function Qu(i,t){if(0==t)return i;let e=i.content.replaceChild(i.childCount-1,Qu(i.lastChild,t-1)),n=i.contentMatchAt(i.childCount).fillBefore(v.empty,!0);return i.copy(e.append(n))}function Ra(i,t,e,n,s,r){let a=t<0?i.firstChild:i.lastChild,l=a.content;return i.childCount>1&&(r=0),s<n-1&&(l=Ra(l,t,e,n,s+1,r)),s>=e&&(l=t<0?a.contentMatchAt(0).fillBefore(l,r<=s).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(v.empty,!0))),i.replaceChild(t<0?0:i.childCount-1,a.copy(l))}function qu(i,t,e){return t<i.openStart&&(i=new w(Ra(i.content,-1,t,i.openStart,0,i.openEnd),t,i.openEnd)),e<i.openEnd&&(i=new w(Ra(i.content,1,e,i.openEnd,0,0),i.openStart,e)),i}const Ku={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ju=null;function Zu(){return Ju||(Ju=document.implementation.createHTMLDocument("title"))}let Na=null;const ze={},He={},uk={touchstart:!0,touchmove:!0};class pk{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function si(i,t){i.input.lastSelectionOrigin=t,i.input.lastSelectionTime=Date.now()}function Va(i){i.someProp("handleDOMEvents",t=>{for(let e in t)i.input.eventHandlers[e]||i.dom.addEventListener(e,i.input.eventHandlers[e]=n=>za(i,n))})}function za(i,t){return i.someProp("handleDOMEvents",e=>{let n=e[t.type];return!!n&&(n(i,t)||t.defaultPrevented)})}function fk(i,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target;e!=i.dom;e=e.parentNode)if(!e||11==e.nodeType||e.pmViewDesc&&e.pmViewDesc.stopEvent(t))return!1;return!0}function Or(i){return{left:i.clientX,top:i.clientY}}function Ha(i,t,e,n,s){if(-1==n)return!1;let r=i.state.doc.resolve(n);for(let a=r.depth+1;a>0;a--)if(i.someProp(t,l=>a>r.depth?l(i,e,r.nodeAfter,r.before(a),s,!0):l(i,e,r.node(a),r.before(a),s,!1)))return!0;return!1}function gn(i,t,e){if(i.focused||i.focus(),i.state.selection.eq(t))return;let n=i.state.tr.setSelection(t);"pointer"==e&&n.setMeta("pointer",!0),i.dispatch(n)}function Ck(i,t,e,n){return Ha(i,"handleDoubleClickOn",t,e,n)||i.someProp("handleDoubleClick",s=>s(i,t,n))}function Tk(i,t,e,n){return Ha(i,"handleTripleClickOn",t,e,n)||i.someProp("handleTripleClick",s=>s(i,t,n))||function kk(i,t,e){if(0!=e.button)return!1;let n=i.state.doc;if(-1==t)return!!n.inlineContent&&(gn(i,q.create(n,0,n.content.size),"pointer"),!0);let s=n.resolve(t);for(let r=s.depth+1;r>0;r--){let a=r>s.depth?s.nodeAfter:s.node(r),l=s.before(r);if(a.inlineContent)gn(i,q.create(n,l+1,l+1+a.content.size),"pointer");else{if(!R.isSelectable(a))continue;gn(i,R.create(n,l),"pointer")}return!0}}(i,e,n)}function $a(i){return Ir(i)}He.keydown=(i,t)=>{let e=t;if(i.input.shiftKey=16==e.keyCode||e.shiftKey,!tp(i,e)&&(i.input.lastKeyCode=e.keyCode,i.input.lastKeyCodeTime=Date.now(),!gt||!Pe||13!=e.keyCode))if(229!=e.keyCode&&i.domObserver.forceFlush(),!un||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)i.someProp("handleKeyDown",n=>n(i,e))||function rk(i,t){let e=t.keyCode,n=function sk(i){let t="";return i.ctrlKey&&(t+="c"),i.metaKey&&(t+="m"),i.altKey&&(t+="a"),i.shiftKey&&(t+="s"),t}(t);if(8==e||rt&&72==e&&"c"==n)return Gu(i,-1)||mn(i,-1);if(46==e&&!t.shiftKey||rt&&68==e&&"c"==n)return Gu(i,1)||mn(i,1);if(13==e||27==e)return!0;if(37==e||rt&&66==e&&"c"==n){let s=37==e?"ltr"==Hu(i,i.state.selection.from)?-1:1:-1;return Vu(i,s,n)||mn(i,s)}if(39==e||rt&&70==e&&"c"==n){let s=39==e?"ltr"==Hu(i,i.state.selection.from)?1:-1:1;return Vu(i,s,n)||mn(i,s)}return 38==e||rt&&80==e&&"c"==n?$u(i,-1,n)||mn(i,-1):40==e||rt&&78==e&&"c"==n?function nk(i){if(!Ve||i.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:e}=i.domSelectionRange();if(t&&1==t.nodeType&&0==e&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;Xu(i,n,"true"),setTimeout(()=>Xu(i,n,"false"),20)}return!1}(i)||$u(i,1,n)||mn(i,1):n==(rt?"m":"c")&&(66==e||73==e||89==e||90==e)}(i,e)?e.preventDefault():si(i,"key");else{let n=Date.now();i.input.lastIOSEnter=n,i.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{i.input.lastIOSEnter==n&&(i.someProp("handleKeyDown",s=>s(i,Fi(13,"Enter"))),i.input.lastIOSEnter=0)},200)}},He.keyup=(i,t)=>{16==t.keyCode&&(i.input.shiftKey=!1)},He.keypress=(i,t)=>{let e=t;if(tp(i,e)||!e.charCode||e.ctrlKey&&!e.altKey||rt&&e.metaKey)return;if(i.someProp("handleKeyPress",s=>s(i,e)))return void e.preventDefault();let n=i.state.selection;if(!(n instanceof q&&n.$from.sameParent(n.$to))){let s=String.fromCharCode(e.charCode);!/[\r\n]/.test(s)&&!i.someProp("handleTextInput",r=>r(i,n.$from.pos,n.$to.pos,s))&&i.dispatch(i.state.tr.insertText(s).scrollIntoView()),e.preventDefault()}};const ep=rt?"metaKey":"ctrlKey";ze.mousedown=(i,t)=>{let e=t;i.input.shiftKey=e.shiftKey;let n=$a(i),s=Date.now(),r="singleClick";s-i.input.lastClick.time<500&&function xk(i,t){let e=t.x-i.clientX,n=t.y-i.clientY;return e*e+n*n<100}(e,i.input.lastClick)&&!e[ep]&&("singleClick"==i.input.lastClick.type?r="doubleClick":"doubleClick"==i.input.lastClick.type&&(r="tripleClick")),i.input.lastClick={time:s,x:e.clientX,y:e.clientY,type:r};let a=i.posAtCoords(Or(e));a&&("singleClick"==r?(i.input.mouseDown&&i.input.mouseDown.done(),i.input.mouseDown=new wk(i,a,e,!!n)):("doubleClick"==r?Ck:Tk)(i,a.pos,a.inside,e)?e.preventDefault():si(i,"pointer"))};class wk{constructor(t,e,n,s){let r,a;if(this.view=t,this.pos=e,this.event=n,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[ep],this.allowDefault=n.shiftKey,e.inside>-1)r=t.state.doc.nodeAt(e.inside),a=e.inside;else{let d=t.state.doc.resolve(e.pos);r=d.parent,a=d.depth?d.before():0}const l=s?null:n.target,c=l?t.docView.nearestDesc(l,!0):null;this.target=c&&1==c.dom.nodeType?c.dom:null;let{selection:h}=t.state;(0==n.button&&r.type.spec.draggable&&!1!==r.type.spec.selectable||h instanceof R&&h.from<=a&&h.to>a)&&(this.mightDrag={node:r,pos:a,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!mt||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),si(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Xt(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Or(t))),this.updateAllowDefault(t),this.allowDefault||!e?si(this.view,"pointer"):function bk(i,t,e,n,s){return Ha(i,"handleClickOn",t,e,n)||i.someProp("handleClick",r=>r(i,t,n))||(s?function yk(i,t){if(-1==t)return!1;let n,s,e=i.state.selection;e instanceof R&&(n=e.node);let r=i.state.doc.resolve(t);for(let a=r.depth+1;a>0;a--){let l=a>r.depth?r.nodeAfter:r.node(a);if(R.isSelectable(l)){s=n&&e.$from.depth>0&&a>=e.$from.depth&&r.before(e.$from.depth+1)==e.$from.pos?r.before(e.$from.depth):r.before(a);break}}return null!=s&&(gn(i,R.create(i.state.doc,s),"pointer"),!0)}(i,e):function vk(i,t){if(-1==t)return!1;let e=i.state.doc.resolve(t),n=e.nodeAfter;return!!(n&&n.isAtom&&R.isSelectable(n))&&(gn(i,new R(e),"pointer"),!0)}(i,e))}(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||Ve&&this.mightDrag&&!this.mightDrag.node.isAtom||Pe&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(gn(this.view,Y.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):si(this.view,"pointer")}move(t){this.updateAllowDefault(t),si(this.view,"pointer"),0==t.buttons&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}function tp(i,t){return!!i.composing||!!(Ve&&Math.abs(t.timeStamp-i.input.compositionEndedAt)<500)&&(i.input.compositionEndedAt=-2e8,!0)}ze.touchstart=i=>{i.input.lastTouch=Date.now(),$a(i),si(i,"pointer")},ze.touchmove=i=>{i.input.lastTouch=Date.now(),si(i,"pointer")},ze.contextmenu=i=>$a(i);const Sk=gt?5e3:-1;function ip(i,t){clearTimeout(i.input.composingTimeout),t>-1&&(i.input.composingTimeout=setTimeout(()=>Ir(i),t))}function np(i){for(i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=function Dk(){let i=document.createEvent("Event");return i.initEvent("event",!0,!0),i.timeStamp}());i.input.compositionNodes.length>0;)i.input.compositionNodes.pop().markParentsDirty()}function Ir(i,t=!1){if(!(gt&&i.domObserver.flushingSoon>=0)){if(i.domObserver.forceFlush(),np(i),t||i.docView&&i.docView.dirty){let e=Fa(i);return e&&!e.eq(i.state.selection)?i.dispatch(i.state.tr.setSelection(e)):!i.markCursor&&!t||i.state.selection.empty?i.updateState(i.state):i.dispatch(i.state.tr.deleteSelection()),!0}return!1}}He.compositionstart=He.compositionupdate=i=>{if(!i.composing){i.domObserver.flush();let{state:t}=i,e=t.selection.$to;if(t.selection instanceof q&&(t.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(n=>!1===n.type.spec.inclusive)))i.markCursor=i.state.storedMarks||e.marks(),Ir(i,!0),i.markCursor=null;else if(Ir(i,!t.selection.empty),mt&&t.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length){let n=i.domSelectionRange();for(let s=n.focusNode,r=n.focusOffset;s&&1==s.nodeType&&0!=r;){let a=r<0?s.lastChild:s.childNodes[r-1];if(!a)break;if(3==a.nodeType){let l=i.domSelection();l&&l.collapse(a,a.nodeValue.length);break}s=a,r=-1}}i.input.composing=!0}ip(i,Sk)},He.compositionend=(i,t)=>{i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=t.timeStamp,i.input.compositionPendingChanges=i.domObserver.pendingRecords().length?i.input.compositionID:0,i.input.compositionNode=null,i.input.compositionPendingChanges&&Promise.resolve().then(()=>i.domObserver.flush()),i.input.compositionID++,ip(i,20))};const ds=We&&ei<15||un&&wT<604;function us(i,t,e,n,s){let r=Wu(i,t,e,n,i.state.selection.$from);if(i.someProp("handlePaste",c=>c(i,s,r||w.empty)))return!0;if(!r)return!1;let a=function Lk(i){return 0==i.openStart&&0==i.openEnd&&1==i.content.childCount?i.content.firstChild:null}(r),l=a?i.state.tr.replaceSelectionWith(a,n):i.state.tr.replaceSelection(r);return i.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function sp(i){let t=i.getData("text/plain")||i.getData("Text");if(t)return t;let e=i.getData("text/uri-list");return e?e.replace(/\r?\n/g," "):""}ze.copy=He.cut=(i,t)=>{let e=t,n=i.state.selection,s="cut"==e.type;if(n.empty)return;let r=ds?null:e.clipboardData,a=n.content(),{dom:l,text:c}=Yu(i,a);r?(e.preventDefault(),r.clearData(),r.setData("text/html",l.innerHTML),r.setData("text/plain",c)):function Mk(i,t){if(!i.dom.parentNode)return;let e=i.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(t),e.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),s=document.createRange();s.selectNodeContents(t),i.dom.blur(),n.removeAllRanges(),n.addRange(s),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),i.focus()},50)}(i,l),s&&i.dispatch(i.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},He.paste=(i,t)=>{let e=t;if(i.composing&&!gt)return;let n=ds?null:e.clipboardData,s=i.input.shiftKey&&45!=i.input.lastKeyCode;n&&us(i,sp(n),n.getData("text/html"),s,e)?e.preventDefault():function Ek(i,t){if(!i.dom.parentNode)return;let e=i.input.shiftKey||i.state.selection.$from.parent.type.spec.code,n=i.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let s=i.input.shiftKey&&45!=i.input.lastKeyCode;setTimeout(()=>{i.focus(),n.parentNode&&n.parentNode.removeChild(n),e?us(i,n.value,null,s,t):us(i,n.textContent,n.innerHTML,s,t)},50)}(i,e)};class rp{constructor(t,e,n){this.slice=t,this.move=e,this.node=n}}const op=rt?"altKey":"ctrlKey";ze.dragstart=(i,t)=>{let e=t,n=i.input.mouseDown;if(n&&n.done(),!e.dataTransfer)return;let a,s=i.state.selection,r=s.empty?null:i.posAtCoords(Or(e));if(!(r&&r.pos>=s.from&&r.pos<=(s instanceof R?s.to-1:s.to)))if(n&&n.mightDrag)a=R.create(i.state.doc,n.mightDrag.pos);else if(e.target&&1==e.target.nodeType){let u=i.docView.nearestDesc(e.target,!0);u&&u.node.type.spec.draggable&&u!=i.docView&&(a=R.create(i.state.doc,u.posBefore))}let l=(a||i.state.selection).content(),{dom:c,text:h,slice:d}=Yu(i,l);(!e.dataTransfer.files.length||!Pe||du>120)&&e.dataTransfer.clearData(),e.dataTransfer.setData(ds?"Text":"text/html",c.innerHTML),e.dataTransfer.effectAllowed="copyMove",ds||e.dataTransfer.setData("text/plain",h),i.dragging=new rp(d,!e[op],a)},ze.dragend=i=>{let t=i.dragging;window.setTimeout(()=>{i.dragging==t&&(i.dragging=null)},50)},He.dragover=He.dragenter=(i,t)=>t.preventDefault(),He.drop=(i,t)=>{let e=t,n=i.dragging;if(i.dragging=null,!e.dataTransfer)return;let s=i.posAtCoords(Or(e));if(!s)return;let r=i.state.doc.resolve(s.pos),a=n&&n.slice;a?i.someProp("transformPasted",g=>{a=g(a,i)}):a=Wu(i,sp(e.dataTransfer),ds?null:e.dataTransfer.getData("text/html"),!1,r);let l=!(!n||e[op]);if(i.someProp("handleDrop",g=>g(i,e,a||w.empty,l)))return void e.preventDefault();if(!a)return;e.preventDefault();let c=a?function oT(i,t,e){let n=i.resolve(t);if(!e.content.size)return t;let s=e.content;for(let r=0;r<e.openStart;r++)s=s.firstChild.content;for(let r=1;r<=(0==e.openStart&&e.size?2:1);r++)for(let a=n.depth;a>=0;a--){let l=a==n.depth?0:n.pos<=(n.start(a+1)+n.end(a+1))/2?-1:1,c=n.index(a)+(l>0?1:0),h=n.node(a),d=!1;if(1==r)d=h.canReplace(c,c,s);else{let u=h.contentMatchAt(c).findWrapping(s.firstChild.type);d=u&&h.canReplaceWith(c,c,u[0])}if(d)return 0==l?n.pos:l<0?n.before(a+1):n.after(a+1)}return null}(i.state.doc,r.pos,a):r.pos;null==c&&(c=r.pos);let h=i.state.tr;if(l){let{node:g}=n;g?g.replace(h):h.deleteSelection()}let d=h.mapping.map(c),u=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,p=h.doc;if(u?h.replaceRangeWith(d,d,a.content.firstChild):h.replaceRange(d,d,a),h.doc.eq(p))return;let m=h.doc.resolve(d);if(u&&R.isSelectable(a.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(a.content.firstChild))h.setSelection(new R(m));else{let g=h.mapping.map(c);h.mapping.maps[h.mapping.maps.length-1].forEach((_,f,x,T)=>g=T),h.setSelection(Ia(i,m,h.doc.resolve(g)))}i.focus(),i.dispatch(h.setMeta("uiEvent","drop"))},ze.focus=i=>{i.input.lastFocus=Date.now(),i.focused||(i.domObserver.stop(),i.dom.classList.add("ProseMirror-focused"),i.domObserver.start(),i.focused=!0,setTimeout(()=>{i.docView&&i.hasFocus()&&!i.domObserver.currentSelection.eq(i.domSelectionRange())&&Xt(i)},20))},ze.blur=(i,t)=>{let e=t;i.focused&&(i.domObserver.stop(),i.dom.classList.remove("ProseMirror-focused"),i.domObserver.start(),e.relatedTarget&&i.dom.contains(e.relatedTarget)&&i.domObserver.currentSelection.clear(),i.focused=!1)},ze.beforeinput=(i,t)=>{if(Pe&&gt&&"deleteContentBackward"==t.inputType){i.domObserver.flushSoon();let{domChangeCount:n}=i.input;setTimeout(()=>{if(i.input.domChangeCount!=n||(i.dom.blur(),i.focus(),i.someProp("handleKeyDown",r=>r(i,Fi(8,"Backspace")))))return;let{$cursor:s}=i.state.selection;s&&s.pos>0&&i.dispatch(i.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let i in He)ze[i]=He[i];function ps(i,t){if(i==t)return!0;for(let e in i)if(i[e]!==t[e])return!1;for(let e in t)if(!(e in i))return!1;return!0}class Pr{constructor(t,e){this.toDOM=t,this.spec=e||Bi,this.side=this.spec.side||0}map(t,e,n,s){let{pos:r,deleted:a}=t.mapResult(e.from+s,this.side<0?-1:1);return a?null:new at(r-n,r-n,this)}valid(){return!0}eq(t){return this==t||t instanceof Pr&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&ps(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class ri{constructor(t,e){this.attrs=t,this.spec=e||Bi}map(t,e,n,s){let r=t.map(e.from+s,this.spec.inclusiveStart?-1:1)-n,a=t.map(e.to+s,this.spec.inclusiveEnd?1:-1)-n;return r>=a?null:new at(r,a,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof ri&&ps(this.attrs,t.attrs)&&ps(this.spec,t.spec)}static is(t){return t.type instanceof ri}destroy(){}}class Ga{constructor(t,e){this.attrs=t,this.spec=e||Bi}map(t,e,n,s){let r=t.mapResult(e.from+s,1);if(r.deleted)return null;let a=t.mapResult(e.to+s,-1);return a.deleted||a.pos<=r.pos?null:new at(r.pos-n,a.pos-n,this)}valid(t,e){let r,{index:n,offset:s}=t.content.findIndex(e.from);return s==e.from&&!(r=t.child(n)).isText&&s+r.nodeSize==e.to}eq(t){return this==t||t instanceof Ga&&ps(this.attrs,t.attrs)&&ps(this.spec,t.spec)}destroy(){}}class at{constructor(t,e,n){this.from=t,this.to=e,this.type=n}copy(t,e){return new at(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,n){return this.type.map(t,this,e,n)}static widget(t,e,n){return new at(t,t,new Pr(e,n))}static inline(t,e,n,s){return new at(t,e,new ri(n,s))}static node(t,e,n,s){return new at(t,e,new Ga(n,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof ri}get widget(){return this.type instanceof Pr}}const fn=[],Bi={};class fe{constructor(t,e){this.local=t.length?t:fn,this.children=e.length?e:fn}static create(t,e){return e.length?Br(e,t,0,Bi):Be}find(t,e,n){let s=[];return this.findInner(t??0,e??1e9,s,0,n),s}findInner(t,e,n,s,r){for(let a=0;a<this.local.length;a++){let l=this.local[a];l.from<=e&&l.to>=t&&(!r||r(l.spec))&&n.push(l.copy(l.from+s,l.to+s))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){let l=this.children[a]+1;this.children[a+2].findInner(t-l,e-l,n,s+l,r)}}map(t,e,n){return this==Be||0==t.maps.length?this:this.mapInner(t,e,0,0,n||Bi)}mapInner(t,e,n,s,r){let a;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(t,n,s);c&&c.type.valid(e,c)?(a||(a=[])).push(c):r.onRemove&&r.onRemove(this.local[l].spec)}return this.children.length?function Fk(i,t,e,n,s,r,a){let l=i.slice();for(let h=0,d=r;h<e.maps.length;h++){let u=0;e.maps[h].forEach((p,m,g,_)=>{let f=_-g-(m-p);for(let x=0;x<l.length;x+=3){let T=l[x+1];if(T<0||p>T+d-u)continue;let C=l[x]+d-u;m>=C?l[x+1]=p<=C?-2:-1:p>=d&&f&&(l[x]+=f,l[x+1]+=f)}u+=f}),d=e.maps[h].map(d,-1)}let c=!1;for(let h=0;h<l.length;h+=3)if(l[h+1]<0){if(-2==l[h+1]){c=!0,l[h+1]=-1;continue}let d=e.map(i[h]+r),u=d-s;if(u<0||u>=n.content.size){c=!0;continue}let m=e.map(i[h+1]+r,-1)-s,{index:g,offset:_}=n.content.findIndex(u),f=n.maybeChild(g);if(f&&_==u&&_+f.nodeSize==m){let x=l[h+2].mapInner(e,f,d+1,i[h]+r+1,a);x!=Be?(l[h]=u,l[h+1]=m,l[h+2]=x):(l[h+1]=-2,c=!0)}else c=!0}if(c){let h=function Ok(i,t,e,n,s,r,a){function l(c,h){for(let d=0;d<c.local.length;d++){let u=c.local[d].map(n,s,h);u?e.push(u):a.onRemove&&a.onRemove(c.local[d].spec)}for(let d=0;d<c.children.length;d+=3)l(c.children[d+2],c.children[d]+h+1)}for(let c=0;c<i.length;c+=3)-1==i[c+1]&&l(i[c+2],t[c]+r+1);return e}(l,i,t,e,s,r,a),d=Br(h,n,0,a);t=d.local;for(let u=0;u<l.length;u+=3)l[u+1]<0&&(l.splice(u,3),u-=3);for(let u=0,p=0;u<d.children.length;u+=3){let m=d.children[u];for(;p<l.length&&l[p]<m;)p+=3;l.splice(p,0,d.children[u],d.children[u+1],d.children[u+2])}}return new fe(t.sort(Ri),l)}(this.children,a||[],t,e,n,s,r):a?new fe(a.sort(Ri),fn):Be}add(t,e){return e.length?this==Be?fe.create(t,e):this.addInner(t,e,0):this}addInner(t,e,n){let s,r=0;t.forEach((l,c)=>{let d,h=c+n;if(d=lp(e,l,h)){for(s||(s=this.children.slice());r<s.length&&s[r]<c;)r+=3;s[r]==c?s[r+2]=s[r+2].addInner(l,d,h+1):s.splice(r,0,c,c+l.nodeSize,Br(d,l,h+1,Bi)),r+=3}});let a=ap(r?cp(e):e,-n);for(let l=0;l<a.length;l++)a[l].type.valid(t,a[l])||a.splice(l--,1);return new fe(a.length?this.local.concat(a).sort(Ri):this.local,s||this.children)}remove(t){return 0==t.length||this==Be?this:this.removeInner(t,0)}removeInner(t,e){let n=this.children,s=this.local;for(let r=0;r<n.length;r+=3){let a,l=n[r]+e,c=n[r+1]+e;for(let u,d=0;d<t.length;d++)(u=t[d])&&u.from>l&&u.to<c&&(t[d]=null,(a||(a=[])).push(u));if(!a)continue;n==this.children&&(n=this.children.slice());let h=n[r+2].removeInner(a,l+1);h!=Be?n[r+2]=h:(n.splice(r,3),r-=3)}if(s.length)for(let a,r=0;r<t.length;r++)if(a=t[r])for(let l=0;l<s.length;l++)s[l].eq(a,e)&&(s==this.local&&(s=this.local.slice()),s.splice(l--,1));return n==this.children&&s==this.local?this:s.length||n.length?new fe(s,n):Be}forChild(t,e){if(this==Be)return this;if(e.isLeaf)return fe.empty;let n,s;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=t){this.children[l]==t&&(n=this.children[l+2]);break}let r=t+1,a=r+e.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<a&&c.to>r&&c.type instanceof ri){let h=Math.max(r,c.from)-r,d=Math.min(a,c.to)-r;h<d&&(s||(s=[])).push(c.copy(h,d))}}if(s){let l=new fe(s.sort(Ri),fn);return n?new oi([l,n]):l}return n||Be}eq(t){if(this==t)return!0;if(!(t instanceof fe)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return Xa(this.localsInner(t))}localsInner(t){if(this==Be)return fn;if(t.inlineContent||!this.local.some(ri.is))return this.local;let e=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof ri||e.push(this.local[n]);return e}forEachSet(t){t(this)}}fe.empty=new fe([],[]),fe.removeOverlap=Xa;const Be=fe.empty;class oi{constructor(t){this.members=t}map(t,e){const n=this.members.map(s=>s.map(t,e,Bi));return oi.from(n)}forChild(t,e){if(e.isLeaf)return fe.empty;let n=[];for(let s=0;s<this.members.length;s++){let r=this.members[s].forChild(t,e);r!=Be&&(r instanceof oi?n=n.concat(r.members):n.push(r))}return oi.from(n)}eq(t){if(!(t instanceof oi)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,n=!0;for(let s=0;s<this.members.length;s++){let r=this.members[s].localsInner(t);if(r.length)if(e){n&&(e=e.slice(),n=!1);for(let a=0;a<r.length;a++)e.push(r[a])}else e=r}return e?Xa(n?e:e.sort(Ri)):fn}static from(t){switch(t.length){case 0:return Be;case 1:return t[0];default:return new oi(t.every(e=>e instanceof fe)?t:t.reduce((e,n)=>e.concat(n instanceof fe?n:n.members),[]))}}forEachSet(t){for(let e=0;e<this.members.length;e++)this.members[e].forEachSet(t)}}function ap(i,t){if(!t||!i.length)return i;let e=[];for(let n=0;n<i.length;n++){let s=i[n];e.push(new at(s.from+t,s.to+t,s.type))}return e}function lp(i,t,e){if(t.isLeaf)return null;let n=e+t.nodeSize,s=null;for(let a,r=0;r<i.length;r++)(a=i[r])&&a.from>e&&a.to<n&&((s||(s=[])).push(a),i[r]=null);return s}function cp(i){let t=[];for(let e=0;e<i.length;e++)null!=i[e]&&t.push(i[e]);return t}function Br(i,t,e,n){let s=[],r=!1;t.forEach((l,c)=>{let h=lp(i,l,c+e);if(h){r=!0;let d=Br(h,l,e+c+1,n);d!=Be&&s.push(c,c+l.nodeSize,d)}});let a=ap(r?cp(i):i,-e).sort(Ri);for(let l=0;l<a.length;l++)a[l].type.valid(t,a[l])||(n.onRemove&&n.onRemove(a[l].spec),a.splice(l--,1));return a.length||s.length?new fe(a,s):Be}function Ri(i,t){return i.from-t.from||i.to-t.to}function Xa(i){let t=i;for(let e=0;e<t.length-1;e++){let n=t[e];if(n.from!=n.to)for(let s=e+1;s<t.length;s++){let r=t[s];if(r.from!=n.from){r.from<n.to&&(t==i&&(t=i.slice()),t[e]=n.copy(n.from,r.from),hp(t,s,n.copy(r.from,n.to)));break}r.to!=n.to&&(t==i&&(t=i.slice()),t[s]=r.copy(r.from,n.to),hp(t,s+1,r.copy(n.to,r.to)))}}return t}function hp(i,t,e){for(;t<i.length&&Ri(e,i[t])>0;)t++;i.splice(t,0,e)}function Ya(i){let t=[];return i.someProp("decorations",e=>{let n=e(i.state);n&&n!=Be&&t.push(n)}),i.cursorWrapper&&t.push(fe.create(i.state.doc,[i.cursorWrapper.deco])),oi.from(t)}const Ik={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Pk=We&&ei<=11;class Bk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Rk{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Bk,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let s=0;s<n.length;s++)this.queue.push(n[s]);We&&ei<=11&&n.some(s=>"childList"==s.type&&s.removedNodes.length||"characterData"==s.type&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),Pk&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Ik)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ru(this.view)){if(this.suppressingSelectionUpdates)return Xt(this.view);if(We&&ei<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&Ei(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n,e=new Set;for(let r=t.focusNode;r;r=ns(r))e.add(r);for(let r=t.anchorNode;r;r=ns(r))if(e.has(r)){n=r;break}let s=n&&this.view.docView.nearestDesc(n);return s&&s.ignoreMutation({type:"selection",target:3==n.nodeType?n.parentNode:n})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.pendingRecords();e.length&&(this.queue=[]);let n=t.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Ru(t)&&!this.ignoreSelectionChange(n),r=-1,a=-1,l=!1,c=[];if(t.editable)for(let d=0;d<e.length;d++){let u=this.registerMutation(e[d],c);u&&(r=r<0?u.from:Math.min(u.from,r),a=a<0?u.to:Math.max(u.to,a),u.typeOver&&(l=!0))}if(mt&&c.length){let d=c.filter(u=>"BR"==u.nodeName);if(2==d.length){let[u,p]=d;u.parentNode&&u.parentNode.parentNode==p.parentNode?p.remove():u.remove()}else{let{focusNode:u}=this.currentSelection;for(let p of d){let m=p.parentNode;m&&"LI"==m.nodeName&&(!u||zk(t,u)!=m)&&p.remove()}}}let h=null;r<0&&s&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Mr(n)&&(h=Fa(t))&&h.eq(Y.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Xt(t),this.currentSelection.set(n),t.scrollToSelection()):(r>-1||s)&&(r>-1&&(t.docView.markDirty(r,a),function Nk(i){if(!dp.has(i)&&(dp.set(i,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(i.dom).whiteSpace))){if(i.requiresGeckoHackNode=mt,up)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),up=!0}}(t)),this.handleDOMChange(r,a,l,c),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||Xt(t),this.currentSelection.set(n))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style"))||!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(let d=0;d<t.addedNodes.length;d++){let u=t.addedNodes[d];e.push(u),3==u.nodeType&&(this.lastChangedTextNode=u)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};let s=t.previousSibling,r=t.nextSibling;if(We&&ei<=11&&t.addedNodes.length)for(let d=0;d<t.addedNodes.length;d++){let{previousSibling:u,nextSibling:p}=t.addedNodes[d];(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(s=u),(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(r=p)}let a=s&&s.parentNode==t.target?Se(s)+1:0,l=n.localPosFromDOM(t.target,a,-1),c=r&&r.parentNode==t.target?Se(r):t.target.childNodes.length;return{from:l,to:n.localPosFromDOM(t.target,c,1)}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=t.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let dp=new WeakMap,up=!1;function pp(i,t){let e=t.startContainer,n=t.startOffset,s=t.endContainer,r=t.endOffset,a=i.domAtPos(i.state.selection.anchor);return Ei(a.node,a.offset,s,r)&&([e,n,s,r]=[s,r,e,n]),{anchorNode:e,anchorOffset:n,focusNode:s,focusOffset:r}}function zk(i,t){for(let e=t.parentNode;e&&e!=i.dom;e=e.parentNode){let n=i.docView.nearestDesc(e,!0);if(n&&n.node.isBlock)return e}return null}function $k(i){let t=i.pmViewDesc;if(t)return t.parseRule();if("BR"==i.nodeName&&i.parentNode){if(Ve&&/^(ul|ol)$/i.test(i.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(i.parentNode.lastChild==i||Ve&&/^(tr|table)$/i.test(i.parentNode.nodeName))return{ignore:!0}}else if("IMG"==i.nodeName&&i.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Gk=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function mp(i,t,e){return Math.max(e.anchor,e.head)>t.content.size?null:Ia(i,t.resolve(e.anchor),t.resolve(e.head))}function Wa(i,t,e){let n=i.depth,s=t?i.end():i.pos;for(;n>0&&(t||i.indexAfter(n)==i.node(n).childCount);)n--,s++,t=!1;if(e){let r=i.node(n).maybeChild(i.indexAfter(n));for(;r&&!r.isLeaf;)r=r.firstChild,s++}return s}function gp(i){if(2!=i.length)return!1;let t=i.charCodeAt(0),e=i.charCodeAt(1);return t>=56320&&t<=57343&&e>=55296&&e<=56319}class Uk{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new pk,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(yp),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=xp(this),_p(this),this.nodeViews=vp(this),this.docView=wu(this.state.doc,fp(this),Ya(this),this.dom,this),this.domObserver=new Rk(this,(n,s,r,a)=>function Xk(i,t,e,n,s){let r=i.input.compositionPendingChanges||(i.composing?i.input.compositionID:0);if(i.input.compositionPendingChanges=0,t<0){let N=i.input.lastSelectionTime>Date.now()-50?i.input.lastSelectionOrigin:null,X=Fa(i,N);if(X&&!i.state.selection.eq(X)){if(Pe&&gt&&13===i.input.lastKeyCode&&Date.now()-100<i.input.lastKeyCodeTime&&i.someProp("handleKeyDown",_e=>_e(i,Fi(13,"Enter"))))return;let L=i.state.tr.setSelection(X);"pointer"==N?L.setMeta("pointer",!0):"key"==N&&L.scrollIntoView(),r&&L.setMeta("composition",r),i.dispatch(L)}return}let a=i.state.doc.resolve(t),l=a.sharedDepth(e);t=a.before(l+1),e=i.state.doc.resolve(e).after(l+1);let p,m,c=i.state.selection,h=function Hk(i,t,e){let h,{node:n,fromOffset:s,toOffset:r,from:a,to:l}=i.docView.parseRange(t,e),c=i.domSelectionRange(),d=c.anchorNode;if(d&&i.dom.contains(1==d.nodeType?d:d.parentNode)&&(h=[{node:d,offset:c.anchorOffset}],Mr(c)||h.push({node:c.focusNode,offset:c.focusOffset})),Pe&&8===i.input.lastKeyCode)for(let f=r;f>s;f--){let x=n.childNodes[f-1],T=x.pmViewDesc;if("BR"==x.nodeName&&!T){r=f;break}if(!T||T.size)break}let u=i.state.doc,p=i.someProp("domParser")||Mi.fromSchema(i.state.schema),m=u.resolve(a),g=null,_=p.parse(n,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:s,to:r,preserveWhitespace:"pre"!=m.parent.type.whitespace||"full",findPositions:h,ruleFromNode:$k,context:m});if(h&&null!=h[0].pos){let f=h[0].pos,x=h[1]&&h[1].pos;null==x&&(x=f),g={anchor:f+a,head:x+a}}return{doc:_,sel:g,from:a,to:l}}(i,t,e),d=i.state.doc,u=d.slice(h.from,h.to);8===i.input.lastKeyCode&&Date.now()-100<i.input.lastKeyCodeTime?(p=i.state.selection.to,m="end"):(p=i.state.selection.from,m="start"),i.input.lastKeyCode=null;let g=function jk(i,t,e,n,s){let r=i.findDiffStart(t,e);if(null==r)return null;let{a,b:l}=i.findDiffEnd(t,e+i.size,e+t.size);if("end"==s&&(n-=a+Math.max(0,r-Math.min(a,l))-r),a<r&&i.size<t.size){let c=n<=r&&n>=a?r-n:0;r-=c,r&&r<t.size&&gp(t.textBetween(r-1,r+1))&&(r+=c?1:-1),l=r+(l-a),a=r}else if(l<r){let c=n<=r&&n>=l?r-n:0;r-=c,r&&r<i.size&&gp(i.textBetween(r-1,r+1))&&(r+=c?1:-1),a=r+(a-l),l=r}return{start:r,endA:a,endB:l}}(u.content,h.doc.content,h.from,p,m);if(g&&i.input.domChangeCount++,(un&&i.input.lastIOSEnter>Date.now()-225||gt)&&s.some(N=>1==N.nodeType&&!Gk.test(N.nodeName))&&(!g||g.endA>=g.endB)&&i.someProp("handleKeyDown",N=>N(i,Fi(13,"Enter"))))return void(i.input.lastIOSEnter=0);if(!g){if(!(n&&c instanceof q&&!c.empty&&c.$head.sameParent(c.$anchor))||i.composing||h.sel&&h.sel.anchor!=h.sel.head){if(h.sel){let N=mp(i,i.state.doc,h.sel);if(N&&!N.eq(i.state.selection)){let X=i.state.tr.setSelection(N);r&&X.setMeta("composition",r),i.dispatch(X)}}return}g={start:c.from,endA:c.to,endB:c.to}}i.state.selection.from<i.state.selection.to&&g.start==g.endB&&i.state.selection instanceof q&&(g.start>i.state.selection.from&&g.start<=i.state.selection.from+2&&i.state.selection.from>=h.from?g.start=i.state.selection.from:g.endA<i.state.selection.to&&g.endA>=i.state.selection.to-2&&i.state.selection.to<=h.to&&(g.endB+=i.state.selection.to-g.endA,g.endA=i.state.selection.to)),We&&ei<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>h.from&&" \xa0"==h.doc.textBetween(g.start-h.from-1,g.start-h.from+1)&&(g.start--,g.endA--,g.endB--);let C,_=h.doc.resolveNoCache(g.start-h.from),f=h.doc.resolveNoCache(g.endB-h.from),x=d.resolve(g.start),T=_.sameParent(f)&&_.parent.inlineContent&&x.end()>=g.endA;if((un&&i.input.lastIOSEnter>Date.now()-225&&(!T||s.some(N=>"DIV"==N.nodeName||"P"==N.nodeName))||!T&&_.pos<h.doc.content.size&&!_.sameParent(f)&&(C=Y.findFrom(h.doc.resolve(_.pos+1),1,!0))&&C.head==f.pos)&&i.someProp("handleKeyDown",N=>N(i,Fi(13,"Enter"))))return void(i.input.lastIOSEnter=0);if(i.state.selection.anchor>g.start&&function Wk(i,t,e,n,s){if(e-t<=s.pos-n.pos||Wa(n,!0,!1)<s.pos)return!1;let r=i.resolve(t);if(!n.parent.isTextblock){let l=r.nodeAfter;return null!=l&&e==t+l.nodeSize}if(r.parentOffset<r.parent.content.size||!r.parent.isTextblock)return!1;let a=i.resolve(Wa(r,!0,!0));return!(!a.parent.isTextblock||a.pos>e||Wa(a,!0,!1)<e)&&n.parent.content.cut(n.parentOffset).eq(a.parent.content)}(d,g.start,g.endA,_,f)&&i.someProp("handleKeyDown",N=>N(i,Fi(8,"Backspace"))))return void(gt&&Pe&&i.domObserver.suppressSelectionUpdates());Pe&&gt&&g.endB==g.start&&(i.input.lastAndroidDelete=Date.now()),gt&&!T&&_.start()!=f.start()&&0==f.parentOffset&&_.depth==f.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==g.endA&&(g.endB-=2,f=h.doc.resolveNoCache(g.endB-h.from),setTimeout(()=>{i.someProp("handleKeyDown",function(N){return N(i,Fi(13,"Enter"))})},20));let k,Q,j,M=g.start,E=g.endA;if(T)if(_.pos==f.pos)We&&ei<=11&&0==_.parentOffset&&(i.domObserver.suppressSelectionUpdates(),setTimeout(()=>Xt(i),20)),k=i.state.tr.delete(M,E),Q=d.resolve(g.start).marksAcross(d.resolve(g.endA));else if(g.endA==g.endB&&(j=function Yk(i,t){let a,l,c,e=i.firstChild.marks,n=t.firstChild.marks,s=e,r=n;for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);for(let d=0;d<e.length;d++)r=e[d].removeFromSet(r);if(1==s.length&&0==r.length)l=s[0],a="add",c=d=>d.mark(l.addToSet(d.marks));else{if(0!=s.length||1!=r.length)return null;l=r[0],a="remove",c=d=>d.mark(l.removeFromSet(d.marks))}let h=[];for(let d=0;d<t.childCount;d++)h.push(c(t.child(d)));if(v.from(h).eq(i))return{mark:l,type:a}}(_.parent.content.cut(_.parentOffset,f.parentOffset),x.parent.content.cut(x.parentOffset,g.endA-x.start()))))k=i.state.tr,"add"==j.type?k.addMark(M,E,j.mark):k.removeMark(M,E,j.mark);else if(_.parent.child(_.index()).isText&&_.index()==f.index()-(f.textOffset?0:1)){let N=_.parent.textBetween(_.parentOffset,f.parentOffset);if(i.someProp("handleTextInput",X=>X(i,M,E,N)))return;k=i.state.tr.insertText(N,M,E)}if(k||(k=i.state.tr.replace(M,E,h.doc.slice(g.start-h.from,g.endB-h.from))),h.sel){let N=mp(i,k.doc,h.sel);N&&!(Pe&&gt&&i.composing&&N.empty&&(g.start!=g.endB||i.input.lastAndroidDelete<Date.now()-100)&&(N.head==M||N.head==k.mapping.map(E)-1)||We&&N.empty&&N.head==M)&&k.setSelection(N)}Q&&k.ensureMarks(Q),r&&k.setMeta("composition",r),i.dispatch(k.scrollIntoView())}(this,n,s,r,a)),this.domObserver.start(),function mk(i){for(let t in ze){let e=ze[t];i.dom.addEventListener(t,i.input.eventHandlers[t]=n=>{fk(i,n)&&!za(i,n)&&(i.editable||!(n.type in He))&&e(i,n)},uk[t]?{passive:!0}:void 0)}Ve&&i.dom.addEventListener("input",()=>null),Va(i)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Va(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(yp),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let n in this._props)e[n]=this._props[n];e.state=this.state;for(let n in t)e[n]=t[n];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){var n;let s=this.state,r=!1,a=!1;t.storedMarks&&this.composing&&(np(this),a=!0),this.state=t;let l=s.plugins!=t.plugins||this._props.plugins!=e.plugins;if(l||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let m=vp(this);(function qk(i,t){let e=0,n=0;for(let s in i){if(i[s]!=t[s])return!0;e++}for(let s in t)n++;return e!=n})(m,this.nodeViews)&&(this.nodeViews=m,r=!0)}(l||e.handleDOMEvents!=this._props.handleDOMEvents)&&Va(this),this.editable=xp(this),_p(this);let c=Ya(this),h=fp(this),d=s.plugins==t.plugins||s.doc.eq(t.doc)?t.scrollToSelection>s.scrollToSelection?"to selection":"preserve":"reset",u=r||!this.docView.matchesNode(t.doc,h,c);(u||!t.selection.eq(s.selection))&&(a=!0);let p="preserve"==d&&a&&null==this.dom.style.overflowAnchor&&function DT(i){let n,s,t=i.dom.getBoundingClientRect(),e=Math.max(0,t.top);for(let r=(t.left+t.right)/2,a=e+1;a<Math.min(innerHeight,t.bottom);a+=5){let l=i.root.elementFromPoint(r,a);if(!l||l==i.dom||!i.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=e-20){n=l,s=c.top;break}}return{refDOM:n,refTop:s,stack:pu(i.dom)}}(this);if(a){this.domObserver.stop();let m=u&&(We||Pe)&&!this.composing&&!s.selection.empty&&!t.selection.empty&&function Qk(i,t){let e=Math.min(i.$anchor.sharedDepth(i.head),t.$anchor.sharedDepth(t.head));return i.$anchor.start(e)!=t.$anchor.start(e)}(s.selection,t.selection);if(u){let g=Pe?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function Ak(i){let t=i.domSelectionRange();if(!t.focusNode)return null;let e=function vT(i,t){for(;;){if(3==i.nodeType&&t)return i;if(1==i.nodeType&&t>0){if("false"==i.contentEditable)return null;t=st(i=i.childNodes[t-1])}else{if(!i.parentNode||ss(i))return null;t=Se(i),i=i.parentNode}}}(t.focusNode,t.focusOffset),n=function yT(i,t){for(;;){if(3==i.nodeType&&t<i.nodeValue.length)return i;if(1==i.nodeType&&t<i.childNodes.length){if("false"==i.contentEditable)return null;i=i.childNodes[t],t=0}else{if(!i.parentNode||ss(i))return null;t=Se(i)+1,i=i.parentNode}}}(t.focusNode,t.focusOffset);if(e&&n&&e!=n){let s=n.pmViewDesc,r=i.domObserver.lastChangedTextNode;if(e==r||n==r)return r;if(!s||!s.isText(n.nodeValue))return n;if(i.input.compositionNode==n){let a=e.pmViewDesc;if(a&&a.isText(e.nodeValue))return n}}return e||n}(this)),(r||!this.docView.update(t.doc,h,c,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=wu(t.doc,h,c,this.dom,this)),g&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function JT(i){let t=i.docView.domFromPos(i.state.selection.anchor,0),e=i.domSelectionRange();return Ei(t.node,t.offset,e.anchorNode,e.anchorOffset)}(this))?Xt(this,m):(Pu(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!(null===(n=this.dragging)||void 0===n)&&n.node&&!s.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,s),"reset"==d?this.dom.scrollTop=0:"to selection"==d?this.scrollToSelection():p&&function MT({refDOM:i,refTop:t,stack:e}){let n=i?i.getBoundingClientRect().top:0;mu(e,0==n?0:n-t)}(p)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",e=>e(this)))if(this.state.selection instanceof R){let e=this.docView.domAfterPos(this.state.selection.from);1==e.nodeType&&uu(this,e.getBoundingClientRect(),t)}else uu(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let e=0;e<this.pluginViews.length;e++){let n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let n=this.directPlugins[e];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let n=this.state.plugins[e];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}}updateDraggedNode(t,e){let n=t.node,s=-1;if(this.state.doc.nodeAt(n.from)==n.node)s=n.from;else{let r=n.from+(this.state.doc.content.size-e.doc.content.size);(r>0&&this.state.doc.nodeAt(r))==n.node&&(s=r)}this.dragging=new rp(t.slice,t.move,s<0?void 0:R.create(this.state.doc,s))}someProp(t,e){let s,n=this._props&&this._props[t];if(null!=n&&(s=e?e(n):n))return s;for(let a=0;a<this.directPlugins.length;a++){let l=this.directPlugins[a].props[t];if(null!=l&&(s=e?e(l):l))return s}let r=this.state.plugins;if(r)for(let a=0;a<r.length;a++){let l=r[a].props[t];if(null!=l&&(s=e?e(l):l))return s}}hasFocus(){if(We){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if("false"==t.contentEditable)return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function LT(i){if(i.setActive)return i.setActive();if(pn)return i.focus(pn);let t=pu(i);i.focus(null==pn?{get preventScroll(){return pn={preventScroll:!0},!0}}:void 0),pn||(pn=!1,mu(t,0))}(this.dom),Xt(this),this.domObserver.start()}get root(){let t=this._root;if(null==t)for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e;return t||document}updateRoot(){this._root=null}posAtCoords(t){return PT(this,t)}coordsAtPos(t,e=1){return xu(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,n=-1){let s=this.docView.posFromDOM(t,e,n);if(null==s)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(t,e){return function zT(i,t,e){return yu==t&&bu==e?Cu:(yu=t,bu=e,Cu="up"==e||"down"==e?function RT(i,t,e){let n=t.selection,s="up"==e?n.$from:n.$to;return vu(i,t,()=>{let{node:r}=i.docView.domFromPos(s.pos,"up"==e?-1:1);for(;;){let l=i.docView.nearestDesc(r,!0);if(!l)break;if(l.node.isBlock){r=l.contentDOM||l.dom;break}r=l.dom.parentNode}let a=xu(i,s.pos,1);for(let l=r.firstChild;l;l=l.nextSibling){let c;if(1==l.nodeType)c=l.getClientRects();else{if(3!=l.nodeType)continue;c=$t(l,0,l.nodeValue.length).getClientRects()}for(let h=0;h<c.length;h++){let d=c[h];if(d.bottom>d.top+1&&("up"==e?a.top-d.top>2*(d.bottom-a.top):d.bottom-a.bottom>2*(a.bottom-d.top)))return!1}}return!0})}(i,t,e):function VT(i,t,e){let{$head:n}=t.selection;if(!n.parent.isTextblock)return!1;let s=n.parentOffset,r=!s,a=s==n.parent.content.size,l=i.domSelection();return l?NT.test(n.parent.textContent)&&l.modify?vu(i,t,()=>{let{focusNode:c,focusOffset:h,anchorNode:d,anchorOffset:u}=i.domSelectionRange(),p=l.caretBidiLevel;l.modify("move",e,"character");let m=n.depth?i.docView.domAfterPos(n.before()):i.dom,{focusNode:g,focusOffset:_}=i.domSelectionRange(),f=g&&!m.contains(1==g.nodeType?g:g.parentNode)||c==g&&h==_;try{l.collapse(d,u),c&&(c!=d||h!=u)&&l.extend&&l.extend(c,h)}catch{}return null!=p&&(l.caretBidiLevel=p),f}):"left"==e||"backward"==e?r:a:n.pos==n.start()||n.pos==n.end()}(i,t,e))}(this,e||this.state,t)}pasteHTML(t,e){return us(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return us(this,t,null,!0,e||new ClipboardEvent("paste"))}destroy(){this.docView&&(function gk(i){i.domObserver.stop();for(let t in i.input.eventHandlers)i.dom.removeEventListener(t,i.input.eventHandlers[t]);clearTimeout(i.input.composingTimeout),clearTimeout(i.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ya(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,ka=null)}get isDestroyed(){return null==this.docView}dispatchEvent(t){return function _k(i,t){!za(i,t)&&ze[t.type]&&(i.editable||!(t.type in He))&&ze[t.type](i,t)}(this,t)}dispatch(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){let t=this.domSelection();return t?Ve&&11===this.root.nodeType&&function CT(i){let t=i.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function Vk(i,t){if(t.getComposedRanges){let s=t.getComposedRanges(i.root)[0];if(s)return pp(i,s)}let e;function n(s){s.preventDefault(),s.stopImmediatePropagation(),e=s.getTargetRanges()[0]}return i.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),i.dom.removeEventListener("beforeinput",n,!0),e?pp(i,e):null}(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function fp(i){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(i.editable),i.someProp("attributes",e=>{if("function"==typeof e&&(e=e(i.state)),e)for(let n in e)"class"==n?t.class+=" "+e[n]:"style"==n?t.style=(t.style?t.style+";":"")+e[n]:!t[n]&&"contenteditable"!=n&&"nodeName"!=n&&(t[n]=String(e[n]))}),t.translate||(t.translate="no"),[at.node(0,i.state.doc.content.size,t)]}function _p(i){if(i.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),i.cursorWrapper={dom:t,deco:at.widget(i.state.selection.from,t,{raw:!0,marks:i.markCursor})}}else i.cursorWrapper=null}function xp(i){return!i.someProp("editable",t=>!1===t(i.state))}function vp(i){let t=Object.create(null);function e(n){for(let s in n)Object.prototype.hasOwnProperty.call(t,s)||(t[s]=n[s])}return i.someProp("nodeViews",e),i.someProp("markViews",e),t}function yp(i){if(i.spec.state||i.spec.filterTransaction||i.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const Kk=["ol",0],Jk=["ul",0],Zk=["li",0],bp={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs:i=>({order:i.hasAttribute("start")?+i.getAttribute("start"):1})}],toDOM:i=>1==i.attrs.order?Kk:["ol",{start:i.attrs.order},0]},Cp={parseDOM:[{tag:"ul"}],toDOM:()=>Jk},Tp={parseDOM:[{tag:"li"}],toDOM:()=>Zk,defining:!0};function kp(i,t){return function(e,n){let{$from:s,$to:r,node:a}=e.selection;if(a&&a.isBlock||s.depth<2||!s.sameParent(r))return!1;let l=s.node(-1);if(l.type!=i)return!1;if(0==s.parent.content.size&&s.node(-1).childCount==s.indexAfter(-1)){if(3==s.depth||s.node(-3).type!=i||s.index(-2)!=s.node(-2).childCount-1)return!1;if(n){let u=v.empty,p=s.index(-1)?1:s.index(-2)?2:3;for(let x=s.depth-p;x>=s.depth-3;x--)u=v.from(s.node(x).copy(u));let m=s.indexAfter(-1)<s.node(-2).childCount?1:s.indexAfter(-2)<s.node(-3).childCount?2:3;u=u.append(v.from(i.createAndFill()));let g=s.before(s.depth-(p-1)),_=e.tr.replace(g,s.after(-m),new w(u,4-p,0)),f=-1;_.doc.nodesBetween(g,_.doc.content.size,(x,T)=>{if(f>-1)return!1;x.isTextblock&&0==x.content.size&&(f=T+1)}),f>-1&&_.setSelection(Y.near(_.doc.resolve(f))),n(_.scrollIntoView())}return!0}let c=r.pos==s.end()?l.contentMatchAt(0).defaultType:null,h=e.tr.delete(s.pos,r.pos),d=c?[t?{type:i,attrs:t}:null,{type:c}]:void 0;return!!an(h.doc,s.pos,2,d)&&(n&&n(h.split(s.pos,2,d).scrollIntoView()),!0)}}function wp(i){return function(t,e){let{$from:n,$to:s}=t.selection,r=n.blockRange(s,a=>a.childCount>0&&a.firstChild.type==i);return!!r&&(!e||(n.node(r.depth-1).type==i?function iw(i,t,e,n){let s=i.tr,r=n.end,a=n.$to.end(n.depth);r<a&&(s.step(new we(r-1,a,r,a,new w(v.from(e.create(null,n.parent.copy())),1,0),1,!0)),n=new _r(s.doc.resolve(n.$from.pos),s.doc.resolve(a),n.depth));const l=Jn(n);if(null==l)return!1;s.lift(n,l);let c=s.mapping.map(r,-1)-1;return Sr(s.doc,c)&&s.join(c),t(s.scrollIntoView()),!0}(t,e,i,r):function nw(i,t,e){let n=i.tr,s=e.parent;for(let m=e.end,g=e.endIndex-1,_=e.startIndex;g>_;g--)m-=s.child(g).nodeSize,n.delete(m-1,m+1);let r=n.doc.resolve(e.start),a=r.nodeAfter;if(n.mapping.map(e.end)!=e.start+r.nodeAfter.nodeSize)return!1;let l=0==e.startIndex,c=e.endIndex==s.childCount,h=r.node(-1),d=r.index(-1);if(!h.canReplace(d+(l?0:1),d+1,a.content.append(c?v.empty:v.from(s))))return!1;let u=r.pos,p=u+a.nodeSize;return n.step(new we(u-(l?1:0),p+(c?1:0),u+1,p-1,new w((l?v.empty:v.from(s.copy(v.empty))).append(c?v.empty:v.from(s.copy(v.empty))),l?0:1,c?0:1),l?0:1)),t(n.scrollIntoView()),!0}(t,e,r)))}}function Sp(i){return function(t,e){let{$from:n,$to:s}=t.selection,r=n.blockRange(s,h=>h.childCount>0&&h.firstChild.type==i);if(!r)return!1;let a=r.startIndex;if(0==a)return!1;let l=r.parent,c=l.child(a-1);if(c.type!=i)return!1;if(e){let h=c.lastChild&&c.lastChild.type==l.type,d=v.from(h?i.create():null),u=new w(v.from(i.create(null,v.from(l.type.create(null,d)))),h?3:1,0),p=r.start,m=r.end;e(t.tr.step(new we(p-(h?3:1),m,p,m,u,1,!0)).scrollIntoView())}return!0}}const sw={link:{attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:i=>({href:i.getAttribute("href"),title:i.getAttribute("title"),target:i.getAttribute("target")})}],toDOM(i){const{href:t,title:e,target:n}=i.attrs;return["a",{href:t,title:e,target:n},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:i=>"normal"!==i.style.fontWeight&&null},{style:"font-weight",getAttrs:i=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(i)&&null}],toDOM:()=>["strong",0]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code",0]},u:{parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM:()=>["u",0]},s:{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:()=>["s",0]},text_color:{attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:i=>({color:i})}],toDOM(i){const{color:t}=i.attrs;return["span",{style:`color:${t};`},0]}},text_background_color:{attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:i=>({backgroundColor:i})}],toDOM(i){const{backgroundColor:t}=i.attrs;return["span",{style:`background-color:${t};`},0]}},sup:{attrs:{},parseDOM:[{tag:"sup"},{style:"vertical-align=super"}],toDOM:()=>["sup",0]},sub:{attrs:{},parseDOM:[{tag:"sub"},{style:"vertical-align=sub"}],toDOM:()=>["sub",0]}},_w={doc:{content:"block+"},text:{group:"inline"},paragraph:{content:"inline*",group:"block",attrs:{align:{default:null},indent:{default:null}},parseDOM:[{tag:"p",getAttrs(i){const{textAlign:t}=i.style,e=i.getAttribute("align")||t||null,n=i.getAttribute("data-indent")||null;return{align:e,indent:parseInt(n,10)||null}}}],toDOM(i){const{align:t,indent:e}=i.attrs;return["p",{style:ra({textAlign:"left"!==t?t:null,marginLeft:null!==e?40*e+"px":null})||null,"data-indent":e??null},0]}},blockquote:{content:"block+",group:"block",defining:!0,attrs:{indent:{default:null}},parseDOM:[{tag:"blockquote",getAttrs(i){const t=i.getAttribute("data-indent")||null;return{indent:parseInt(t,10)||null}}}],toDOM(i){const{indent:t}=i.attrs;return["blockquote",{style:ra({marginLeft:null!==t?40*t+"px":null})||null,"data-indent":t??null},0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},heading:{attrs:{level:{default:1},align:{default:null},indent:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(i){const{textAlign:t}=i.style,e=i.getAttribute("align")||t||null,n=i.getAttribute("data-indent")||null;return{level:1,align:e,indent:parseInt(n,10)||null}}},{tag:"h2",getAttrs(i){const{textAlign:t}=i.style,e=i.getAttribute("align")||t||null,n=i.getAttribute("data-indent")||null;return{level:2,align:e,indent:parseInt(n,10)||null}}},{tag:"h3",getAttrs(i){const{textAlign:t}=i.style,e=i.getAttribute("align")||t||null,n=i.getAttribute("data-indent")||null;return{level:3,align:e,indent:parseInt(n,10)||null}}},{tag:"h4",getAttrs(i){const{textAlign:t}=i.style,e=i.getAttribute("align")||t||null,n=i.getAttribute("data-indent")||null;return{level:4,align:e,indent:parseInt(n,10)||null}}},{tag:"h5",getAttrs(i){const{textAlign:t}=i.style,e=i.getAttribute("align")||t||null,n=i.getAttribute("data-indent")||null;return{level:5,align:e,indent:parseInt(n,10)||null}}},{tag:"h6",getAttrs(i){const{textAlign:t}=i.style,e=i.getAttribute("align")||t||null,n=i.getAttribute("data-indent")||null;return{level:6,align:e,indent:parseInt(n,10)||null}}}],toDOM(i){const{level:t,align:e,indent:n}=i.attrs;return[`h${t}`,{style:ra({textAlign:"left"!==e?e:null,marginLeft:null!==n?40*n+"px":null})||null,"data-indent":n??null},0]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:i=>({src:i.getAttribute("src"),title:i.getAttribute("title"),alt:i.getAttribute("alt"),width:i.getAttribute("width")})}],toDOM(i){const{src:t,alt:e,title:n,width:s}=i.attrs;return["img",{src:t,alt:e,title:n,width:s}]}},list_item:{...Tp,content:"paragraph block*"},ordered_list:{...bp,content:"list_item+",group:"block"},bullet_list:{...Cp,content:"list_item+",group:"block"}},Rr=new class BC{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let s in t)e[s]=t[s];e.nodes=pd.from(t.nodes),e.marks=pd.from(t.marks||{}),this.nodes=vr.compile(this.spec.nodes,this),this.marks=yr.compile(this.spec.marks,this);let n=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let r=this.nodes[s],a=r.spec.content||"",l=r.spec.marks;if(r.contentMatch=n[a]||(n[a]=Di.parse(a,this.nodes)),r.inlineContent=r.contentMatch.inlineContent,r.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!r.isInline||!r.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=r}r.markSet="_"==l?null:l?Ed(this,l.split(" ")):""!=l&&r.inlineContent?null:[]}for(let s in this.marks){let r=this.marks[s],a=r.spec.excludes;r.excluded=null==a?[r]:""==a?[]:Ed(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,n,s){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof vr))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,s)}text(t,e){let n=this.nodes.text;return new xr(n,n.defaultAttrs,t,te.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return bt.fromJSON(this,t)}markFromJSON(t){return te.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}({marks:sw,nodes:_w}),Ap=(i,t)=>!i.selection.empty&&(t&&t(i.tr.deleteSelection().scrollIntoView()),!0);function _n(i,t,e=!1){for(let n=i;n;n="start"==t?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(e&&1!=n.childCount)return!1}return!1}function Ua(i){if(!i.parent.type.spec.isolating)for(let t=i.depth-1;t>=0;t--){if(i.index(t)>0)return i.doc.resolve(i.before(t+1));if(i.node(t).type.spec.isolating)break}return null}function Qa(i){if(!i.parent.type.spec.isolating)for(let t=i.depth-1;t>=0;t--){let e=i.node(t);if(i.index(t)+1<e.childCount)return i.doc.resolve(i.after(t+1));if(e.type.spec.isolating)break}return null}const Ep=(i,t)=>{let{$head:e,$anchor:n}=i.selection;return!(!e.parent.type.spec.code||!e.sameParent(n)||(t&&t(i.tr.insertText("\n").scrollIntoView()),0))};function qa(i){for(let t=0;t<i.edgeCount;t++){let{type:e}=i.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const Fp=(i,t)=>{let{$head:e,$anchor:n}=i.selection;if(!e.parent.type.spec.code||!e.sameParent(n))return!1;let s=e.node(-1),r=e.indexAfter(-1),a=qa(s.contentMatchAt(r));if(!a||!s.canReplaceWith(r,r,a))return!1;if(t){let l=e.after(),c=i.tr.replaceWith(l,l,a.createAndFill());c.setSelection(Y.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0},Op=(i,t)=>{let e=i.selection,{$from:n,$to:s}=e;if(e instanceof et||n.parent.inlineContent||s.parent.inlineContent)return!1;let r=qa(s.parent.contentMatchAt(s.indexAfter()));if(!r||!r.isTextblock)return!1;if(t){let a=(!n.parentOffset&&s.index()<s.parent.childCount?n:s).pos,l=i.tr.insert(a,r.createAndFill());l.setSelection(q.create(l.doc,a+1)),t(l.scrollIntoView())}return!0},Ip=(i,t)=>{let{$cursor:e}=i.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let r=e.before();if(an(i.doc,r))return t&&t(i.tr.split(r).scrollIntoView()),!0}let n=e.blockRange(),s=n&&Jn(n);return null!=s&&(t&&t(i.tr.lift(n,s).scrollIntoView()),!0)},Ka=function Tw(i){return(t,e)=>{let{$from:n,$to:s}=t.selection;if(t.selection instanceof R&&t.selection.node.isBlock)return!(!n.parentOffset||!an(t.doc,n.pos)||(e&&e(t.tr.split(n.pos).scrollIntoView()),0));if(!n.depth)return!1;let a,l,r=[],c=!1,h=!1;for(let m=n.depth;;m--){if(n.node(m).isBlock){c=n.end(m)==n.pos+(n.depth-m),h=n.start(m)==n.pos-(n.depth-m),l=qa(n.node(m-1).contentMatchAt(n.indexAfter(m-1)));let _=i&&i(s.parent,c,n);r.unshift(_||(c&&l?{type:l}:null)),a=m;break}if(1==m)return!1;r.unshift(null)}let d=t.tr;(t.selection instanceof q||t.selection instanceof et)&&d.deleteSelection();let u=d.mapping.map(n.pos),p=an(d.doc,u,r.length,r);if(p||(r[0]=l?{type:l}:null,p=an(d.doc,u,r.length,r)),d.split(u,r.length,r),!c&&h&&n.node(a).type!=l){let m=d.mapping.map(n.before(a)),g=d.doc.resolve(m);l&&n.node(a-1).canReplaceWith(g.index(),g.index()+1,l)&&d.setNodeMarkup(d.mapping.map(n.before(a)),l)}return e&&e(d.scrollIntoView()),!0}}();function Pp(i,t,e,n){let a,l,s=t.nodeBefore,r=t.nodeAfter,c=s.type.spec.isolating||r.type.spec.isolating;if(!c&&function ww(i,t,e){let n=t.nodeBefore,s=t.nodeAfter,r=t.index();return!(!(n&&s&&n.type.compatibleContent(s.type))||(!n.content.size&&t.parent.canReplace(r-1,r)?(e&&e(i.tr.delete(t.pos-n.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(r,r+1)||!s.isTextblock&&!Sr(i.doc,t.pos)||(e&&e(i.tr.join(t.pos).scrollIntoView()),0)))}(i,t,e))return!0;let h=!c&&t.parent.canReplace(t.index(),t.index()+1);if(h&&(a=(l=s.contentMatchAt(s.childCount)).findWrapping(r.type))&&l.matchType(a[0]||r.type).validEnd){if(e){let m=t.pos+r.nodeSize,g=v.empty;for(let x=a.length-1;x>=0;x--)g=v.from(a[x].create(null,g));g=v.from(s.copy(g));let _=i.tr.step(new we(t.pos-1,m,t.pos,m,new w(g,1,0),a.length,!0)),f=_.doc.resolve(m+2*a.length);f.nodeAfter&&f.nodeAfter.type==s.type&&Sr(_.doc,f.pos)&&_.join(f.pos),e(_.scrollIntoView())}return!0}let d=r.type.spec.isolating||n>0&&c?null:Y.findFrom(t,1),u=d&&d.$from.blockRange(d.$to),p=u&&Jn(u);if(null!=p&&p>=t.depth)return e&&e(i.tr.lift(u,p).scrollIntoView()),!0;if(h&&_n(r,"start",!0)&&_n(s,"end")){let m=s,g=[];for(;g.push(m),!m.isTextblock;)m=m.lastChild;let _=r,f=1;for(;!_.isTextblock;_=_.firstChild)f++;if(m.canReplace(m.childCount,m.childCount,_.content)){if(e){let x=v.empty;for(let C=g.length-1;C>=0;C--)x=v.from(g[C].copy(x));e(i.tr.step(new we(t.pos-g.length,t.pos+r.nodeSize,t.pos+f,t.pos+r.nodeSize-f,new w(x,g.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Bp(i){return function(t,e){let n=t.selection,s=i<0?n.$from:n.$to,r=s.depth;for(;s.node(r).isInline;){if(!r)return!1;r--}return!!s.node(r).isTextblock&&(e&&e(t.tr.setSelection(q.create(t.doc,i<0?s.start(r):s.end(r)))),!0)}}const Sw=Bp(-1),Aw=Bp(1);function Ja(i,t=null){return function(e,n){let s=!1;for(let r=0;r<e.selection.ranges.length&&!s;r++){let{$from:{pos:a},$to:{pos:l}}=e.selection.ranges[r];e.doc.nodesBetween(a,l,(c,h)=>{if(s)return!1;if(c.isTextblock&&!c.hasMarkup(i,t))if(c.type==i)s=!0;else{let d=e.doc.resolve(h),u=d.index();s=d.parent.canReplaceWith(u,u+1,i)}})}if(!s)return!1;if(n){let r=e.tr;for(let a=0;a<e.selection.ranges.length;a++){let{$from:{pos:l},$to:{pos:c}}=e.selection.ranges[a];r.setBlockType(l,c,i,t)}n(r.scrollIntoView())}return!0}}function xn(i,t=null,e){let n=!1!==(e&&e.removeWhenPresent),s=!1!==(e&&e.enterInlineAtoms);return function(r,a){let{empty:l,$cursor:c,ranges:h}=r.selection;if(l&&!c||!function Mw(i,t,e,n){for(let s=0;s<t.length;s++){let{$from:r,$to:a}=t[s],l=0==r.depth&&i.inlineContent&&i.type.allowsMarkType(e);if(i.nodesBetween(r.pos,a.pos,(c,h)=>{if(l||!n&&c.isAtom&&c.isInline&&h>=r.pos&&h+c.nodeSize<=a.pos)return!1;l=c.inlineContent&&c.type.allowsMarkType(e)}),l)return!0}return!1}(r.doc,h,i,s))return!1;if(a)if(c)i.isInSet(r.storedMarks||c.marks())?a(r.tr.removeStoredMark(i)):a(r.tr.addStoredMark(i.create(t)));else{let d,u=r.tr;s||(h=function Lw(i){let t=[];for(let e=0;e<i.length;e++){let{$from:n,$to:s}=i[e];n.doc.nodesBetween(n.pos,s.pos,(r,a)=>{if(r.isAtom&&r.content.size&&r.isInline&&a>=n.pos&&a+r.nodeSize<=s.pos)return a+1>n.pos&&t.push(new ya(n,n.doc.resolve(a+1))),n=n.doc.resolve(a+1+r.content.size),!1}),n.pos<s.pos&&t.push(new ya(n,s))}return t}(h)),d=n?!h.some(p=>r.doc.rangeHasMark(p.$from.pos,p.$to.pos,i)):!h.every(p=>{let m=!1;return u.doc.nodesBetween(p.$from.pos,p.$to.pos,(g,_,f)=>{if(m)return!1;m=!i.isInSet(g.marks)&&!!f&&f.type.allowsMarkType(i)&&!(g.isText&&/^\s*$/.test(g.textBetween(Math.max(0,p.$from.pos-_),Math.min(g.nodeSize,p.$to.pos-_))))}),!m});for(let p=0;p<h.length;p++){let{$from:m,$to:g}=h[p];if(d){let _=m.pos,f=g.pos,x=m.nodeAfter,T=g.nodeBefore,C=x&&x.isText?/^\s*/.exec(x.text)[0].length:0,M=T&&T.isText?/\s*$/.exec(T.text)[0].length:0;_+C<f&&(_+=C,f-=M),u.addMark(_,f,i.create(t))}else u.removeMark(m.pos,g.pos,i)}a(u.scrollIntoView())}return!0}}function ms(...i){return function(t,e,n){for(let s=0;s<i.length;s++)if(i[s](t,e,n))return!0;return!1}}let Za=ms(Ap,(i,t,e)=>{let n=function Dp(i,t){let{$cursor:e}=i.selection;return!e||(t?!t.endOfTextblock("backward",i):e.parentOffset>0)?null:e}(i,e);if(!n)return!1;let s=Ua(n);if(!s){let a=n.blockRange(),l=a&&Jn(a);return null!=l&&(t&&t(i.tr.lift(a,l).scrollIntoView()),!0)}let r=s.nodeBefore;if(Pp(i,s,t,-1))return!0;if(0==n.parent.content.size&&(_n(r,"end")||R.isSelectable(r)))for(let a=n.depth;;a--){let l=fa(i.doc,n.before(a),n.after(a),w.empty);if(l&&l.slice.size<l.to-l.from){if(t){let c=i.tr.step(l);c.setSelection(_n(r,"end")?Y.findFrom(c.doc.resolve(c.mapping.map(s.pos,-1)),-1):R.create(c.doc,s.pos-r.nodeSize)),t(c.scrollIntoView())}return!0}if(1==a||n.node(a-1).childCount>1)break}return!(!r.isAtom||s.depth!=n.depth-1||(t&&t(i.tr.delete(s.pos-r.nodeSize,s.pos).scrollIntoView()),0))},(i,t,e)=>{let{$head:n,empty:s}=i.selection,r=n;if(!s)return!1;if(n.parent.isTextblock){if(e?!e.endOfTextblock("backward",i):n.parentOffset>0)return!1;r=Ua(n)}let a=r&&r.nodeBefore;return!(!a||!R.isSelectable(a)||(t&&t(i.tr.setSelection(R.create(i.doc,r.pos-a.nodeSize)).scrollIntoView()),0))}),Rp=ms(Ap,(i,t,e)=>{let n=function Lp(i,t){let{$cursor:e}=i.selection;return!e||(t?!t.endOfTextblock("forward",i):e.parentOffset<e.parent.content.size)?null:e}(i,e);if(!n)return!1;let s=Qa(n);if(!s)return!1;let r=s.nodeAfter;if(Pp(i,s,t,1))return!0;if(0==n.parent.content.size&&(_n(r,"start")||R.isSelectable(r))){let a=fa(i.doc,n.before(),n.after(),w.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=i.tr.step(a);l.setSelection(_n(r,"start")?Y.findFrom(l.doc.resolve(l.mapping.map(s.pos)),1):R.create(l.doc,l.mapping.map(s.pos))),t(l.scrollIntoView())}return!0}}return!(!r.isAtom||s.depth!=n.depth-1||(t&&t(i.tr.delete(s.pos,s.pos+r.nodeSize).scrollIntoView()),0))},(i,t,e)=>{let{$head:n,empty:s}=i.selection,r=n;if(!s)return!1;if(n.parent.isTextblock){if(e?!e.endOfTextblock("forward",i):n.parentOffset<n.parent.content.size)return!1;r=Qa(n)}let a=r&&r.nodeAfter;return!(!a||!R.isSelectable(a)||(t&&t(i.tr.setSelection(R.create(i.doc,r.pos)).scrollIntoView()),0))});const Yt={Enter:ms(Ep,Op,Ip,Ka),"Mod-Enter":Fp,Backspace:Za,"Mod-Backspace":Za,"Shift-Backspace":Za,Delete:Rp,"Mod-Delete":Rp,"Mod-a":(i,t)=>(t&&t(i.tr.setSelection(new et(i.doc))),!0)},Np={"Ctrl-h":Yt.Backspace,"Alt-Backspace":Yt["Mod-Backspace"],"Ctrl-d":Yt.Delete,"Ctrl-Alt-Backspace":Yt["Mod-Delete"],"Alt-Delete":Yt["Mod-Delete"],"Alt-d":Yt["Mod-Delete"],"Ctrl-a":Sw,"Ctrl-e":Aw};for(let i in Yt)Np[i]=Yt[i];const Fw=(typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&"darwin"==os.platform())?Np:Yt;class Wt{constructor(t,e,n={}){this.match=t,this.match=t,this.handler="string"==typeof e?function Ow(i){return function(t,e,n,s){let r=i;if(e[1]){let a=e[0].lastIndexOf(e[1]);r+=e[0].slice(a+e[1].length);let l=(n+=a)-s;l>0&&(r=e[0].slice(a-l,a)+r,n=s)}return t.tr.insertText(r,n,s)}}(e):e,this.undoable=!1!==n.undoable,this.inCode=n.inCode||!1}}function Vp(i,t,e,n,s,r){if(i.composing)return!1;let a=i.state,l=a.doc.resolve(t),c=l.parent.textBetween(Math.max(0,l.parentOffset-500),l.parentOffset,null,"\ufffc")+n;for(let h=0;h<s.length;h++){let d=s[h];if(l.parent.type.spec.code){if(!d.inCode)continue}else if("only"===d.inCode)continue;let u=d.match.exec(c),p=u&&d.handler(a,u,t-(u[0].length-n.length),e);if(p)return d.undoable&&p.setMeta(r,{transform:p,from:t,to:e,text:n}),i.dispatch(p),!0}return!1}const Bw=new Wt(/--$/,"\u2014"),Rw=new Wt(/\.\.\.$/,"\u2026"),$w=[new Wt(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201c"),new Wt(/"$/,"\u201d"),new Wt(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),new Wt(/'$/,"\u2019")];function el(i,t,e=null,n){return new Wt(i,(s,r,a,l)=>{let c=e instanceof Function?e(r):e,h=s.tr.delete(a,l),u=h.doc.resolve(a).blockRange(),p=u&&ga(u,t,c);if(!p)return null;h.wrap(u,p);let m=h.doc.resolve(a-1).nodeBefore;return m&&m.type==t&&Sr(h.doc,a-1)&&(!n||n(r,m))&&h.join(a-1),h})}function zp(i,t,e=null){return new Wt(i,(n,s,r,a)=>{let l=n.doc.resolve(r),c=e instanceof Function?e(s):e;return l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),t)?n.tr.delete(r,a).setBlockType(r,r,t,c):null})}const tl=(i,t)=>{const{from:e,$from:n,to:s,empty:r}=i.selection;return r?!!t.isInSet(i.storedMarks||n.marks()):i.doc.rangeHasMark(e,s,t)},Hp=(i,t,e={})=>{const{selection:n}=i,{$from:s,to:r}=n,a=((i,t)=>{for(let e=t.depth;e>0;e-=1)if(t.node(e).type===i)return t.node(e).type;return null})(t,s);return Object.entries(e).length&&a?r<=s.end()&&s.parent.hasMarkup(t,e):!!a},$p=i=>{const t=[],{selection:{from:e,to:n}}=i;return i.doc.nodesBetween(e,n,s=>{t.push(s)}),t},Gp=(i,t,e)=>{for(const n of t){const{$from:s,$to:r}=n;let a=0===s.depth&&i.type.allowsMarkType(e);if(i.nodesBetween(s.pos,r.pos,l=>!a&&(a=l.inlineContent&&l.type.allowsMarkType(e),!0)),a)return!0}return!1},Xp=(i,t,e)=>new Wt(i,(n,s,r,a)=>{const{tr:l}=n,c=r;let h=a;const[d,,u]=s,p=d.search(/\S/);if(u){const m=r+d.indexOf(u),g=m+u.length;g<a&&l.delete(g,a),m>r&&l.delete(r+p,m),h=r+u.length+p}return l.addMark(c,h,t.create(e)),l.removeStoredMark(t),l}),Yp=(i,t={})=>(e,n)=>{const{tr:s,selection:r}=e,{empty:a,ranges:l,$from:c,$to:h}=r;if(a&&r instanceof q){const{$cursor:d}=r;if(!d||!Gp(e.doc,l,i)||(s.addStoredMark(i.create(t)),!s.storedMarksSet))return!1;n?.(s)}else{if(s.addMark(c.pos,h.pos,i.create(t)),!s.docChanged)return!1;n?.(s.scrollIntoView())}return!0};var Ae=function(){};Ae.prototype.append=function(t){return t.length?(t=Ae.from(t),!this.length&&t||t.length<200&&this.leafAppend(t)||this.length<200&&t.leafPrepend(this)||this.appendInner(t)):this},Ae.prototype.prepend=function(t){return t.length?Ae.from(t).append(this):this},Ae.prototype.appendInner=function(t){return new Uw(this,t)},Ae.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?Ae.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},Ae.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},Ae.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},Ae.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var s=[];return this.forEach(function(r,a){return s.push(t(r,a))},e,n),s},Ae.from=function(t){return t instanceof Ae?t:t&&t.length?new Wp(t):Ae.empty};var Wp=function(i){function t(n){i.call(this),this.values=n}i&&(t.__proto__=i),(t.prototype=Object.create(i&&i.prototype)).constructor=t;var e={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,r){return 0==s&&r==this.length?this:new t(this.values.slice(s,r))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,r,a,l){for(var c=r;c<a;c++)if(!1===s(this.values[c],l+c))return!1},t.prototype.forEachInvertedInner=function(s,r,a,l){for(var c=r-1;c>=a;c--)if(!1===s(this.values[c],l+c))return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=200)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=200)return new t(s.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(t.prototype,e),t}(Ae);Ae.empty=new Wp([]);var Uw=function(i){function t(e,n){i.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return i&&(t.__proto__=i),(t.prototype=Object.create(i&&i.prototype)).constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},t.prototype.forEachInner=function(n,s,r,a){var l=this.left.length;if(s<l&&!1===this.left.forEachInner(n,s,Math.min(r,l),a)||r>l&&!1===this.right.forEachInner(n,Math.max(s-l,0),Math.min(this.length,r)-l,a+l))return!1},t.prototype.forEachInvertedInner=function(n,s,r,a){var l=this.left.length;if(s>l&&!1===this.right.forEachInvertedInner(n,s-l,Math.max(r,l)-l,a+l)||r<l&&!1===this.left.forEachInvertedInner(n,Math.min(s,l),r,a))return!1},t.prototype.sliceInner=function(n,s){if(0==n&&s==this.length)return this;var r=this.left.length;return s<=r?this.left.slice(n,s):n>=r?this.right.slice(n-r,s-r):this.left.slice(n,r).append(this.right.slice(0,s-r))},t.prototype.leafAppend=function(n){var s=this.right.leafAppend(n);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(n){var s=this.left.leafPrepend(n);if(s)return new t(s,this.right)},t.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new t(this.left,new t(this.right,n)):new t(this,n)},t}(Ae);const jp=Ae;class ft{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(0==this.eventCount)return null;let s,r,n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}e&&(s=this.remapping(n,this.items.length),r=s.maps.length);let l,c,a=t.tr,h=[],d=[];return this.items.forEach((u,p)=>{if(!u.step)return s||(s=this.remapping(n,p+1),r=s.maps.length),r--,void d.push(u);if(s){d.push(new St(u.map));let g,m=u.step.map(s.slice(r));m&&a.maybeStep(m).doc&&(g=a.mapping.maps[a.mapping.maps.length-1],h.push(new St(g,void 0,void 0,h.length+d.length))),r--,g&&s.appendMap(g,r)}else a.maybeStep(u.step);return u.selection?(l=s?u.selection.map(s.slice(r)):u.selection,c=new ft(this.items.slice(0,n).append(d.reverse().concat(h)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:c,transform:a,selection:l}}addTransform(t,e,n,s){let r=[],a=this.eventCount,l=this.items,c=!s&&l.length?l.get(l.length-1):null;for(let d=0;d<t.steps.length;d++){let m,u=t.steps[d].invert(t.docs[d]),p=new St(t.mapping.maps[d],u,e);(m=c&&c.merge(p))&&(p=m,d?r.pop():l=l.slice(0,l.length-1)),r.push(p),e&&(a++,e=void 0),s||(c=p)}let h=a-n.depth;return h>Kw&&(l=function qw(i,t){let e;return i.forEach((n,s)=>{if(n.selection&&0==t--)return e=s,!1}),i.slice(e)}(l,h),a-=h),new ft(l.append(r),a)}remapping(t,e){let n=new rn;return this.items.forEach((s,r)=>{n.appendMap(s.map,null!=s.mirrorOffset&&r-s.mirrorOffset>=t?n.maps.length-s.mirrorOffset:void 0)},t,e),n}addMaps(t){return 0==this.eventCount?this:new ft(this.items.append(t.map(e=>new St(e))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let n=[],s=Math.max(0,this.items.length-e),r=t.mapping,a=t.steps.length,l=this.eventCount;this.items.forEach(p=>{p.selection&&l--},s);let c=e;this.items.forEach(p=>{let m=r.getMirror(--c);if(null==m)return;a=Math.min(a,m);let g=r.maps[m];if(p.step){let _=t.steps[m].invert(t.docs[m]),f=p.selection&&p.selection.map(r.slice(c+1,m));f&&l++,n.push(new St(g,_,f))}else n.push(new St(g))},s);let h=[];for(let p=e;p<a;p++)h.push(new St(r.maps[p]));let d=this.items.slice(0,s).append(h).append(n),u=new ft(d,l);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let t=0;return this.items.forEach(e=>{e.step||t++}),t}compress(t=this.items.length){let e=this.remapping(0,t),n=e.maps.length,s=[],r=0;return this.items.forEach((a,l)=>{if(l>=t)s.push(a),a.selection&&r++;else if(a.step){let c=a.step.map(e.slice(n)),h=c&&c.getMap();if(n--,h&&e.appendMap(h,n),c){let d=a.selection&&a.selection.map(e.slice(n));d&&r++;let p,u=new St(h.invert(),c,d),m=s.length-1;(p=s.length&&s[m].merge(u))?s[m]=p:s.push(u)}}else a.map&&n--},this.items.length,0),new ft(jp.from(s.reverse()),r)}}ft.empty=new ft(jp.empty,0);class St{constructor(t,e,n,s){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=s}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new St(e.getMap().invert(),e,this.selection)}}}class ai{constructor(t,e,n,s,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=s,this.prevComposition=r}}const Kw=20;function Up(i){let t=[];for(let e=i.length-1;e>=0&&0==t.length;e--)i[e].forEach((n,s,r,a)=>t.push(r,a));return t}function il(i,t){if(!i)return null;let e=[];for(let n=0;n<i.length;n+=2){let s=t.map(i[n],1),r=t.map(i[n+1],-1);s<=r&&e.push(s,r)}return e}let nl=!1,Qp=null;function Vr(i){let t=i.plugins;if(Qp!=t){nl=!1,Qp=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){nl=!0;break}}return nl}const jt=new Ht("history"),qp=new Ht("closeHistory");function zr(i,t){return(e,n)=>{let s=jt.getState(e);if(!s||0==(i?s.undone:s.done).eventCount)return!1;if(n){let r=function eS(i,t,e){let n=Vr(t),s=jt.get(t).spec.config,r=(e?i.undone:i.done).popEvent(t,n);if(!r)return null;let a=r.selection.resolve(r.transform.doc),l=(e?i.done:i.undone).addTransform(r.transform,t.selection.getBookmark(),s,n),c=new ai(e?l:r.remaining,e?r.remaining:l,null,0,-1);return r.transform.setSelection(a).setMeta(jt,{redo:e,historyState:c})}(s,e,i);r&&n(t?r.scrollIntoView():r)}return!0}}const sl=zr(!1,!0),Hr=zr(!0,!0);zr(!1,!1),zr(!0,!1);for(var iS=S(345),li={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},nS=typeof navigator<"u"&&/Mac/.test(navigator.platform),sS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),De=0;De<10;De++)li[48+De]=li[96+De]=String(De);for(De=1;De<=24;De++)li[De+111]="F"+De;for(De=65;De<=90;De++)li[De]=String.fromCharCode(De+32),$r[De]=String.fromCharCode(De);for(var rl in li)$r.hasOwnProperty(rl)||($r[rl]=li[rl]);const oS=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function aS(i){let n,s,r,a,t=i.split(/-(?!$)/),e=t[t.length-1];"Space"==e&&(e=" ");for(let l=0;l<t.length-1;l++){let c=t[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);oS?a=!0:s=!0}}return n&&(e="Alt-"+e),s&&(e="Ctrl-"+e),a&&(e="Meta-"+e),r&&(e="Shift-"+e),e}function ol(i,t,e=!0){return t.altKey&&(i="Alt-"+i),t.ctrlKey&&(i="Ctrl-"+i),t.metaKey&&(i="Meta-"+i),e&&t.shiftKey&&(i="Shift-"+i),i}function Gr(i){return new Tt({props:{handleKeyDown:cS(i)}})}function cS(i){let t=function lS(i){let t=Object.create(null);for(let e in i)t[aS(e)]=i[e];return t}(i);return function(e,n){let r,s=function rS(i){var e=!(nS&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||sS&&i.shiftKey&&i.key&&1==i.key.length||"Unidentified"==i.key)&&i.key||(i.shiftKey?$r:li)[i.keyCode]||i.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(n),a=t[ol(s,n)];if(a&&a(e.state,e.dispatch,e))return!0;if(1==s.length&&" "!=s){if(n.shiftKey){let l=t[ol(s,n,!1)];if(l&&l(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||s.charCodeAt(0)>127)&&(r=li[n.keyCode])&&r!=s){let l=t[ol(r,n)];if(l&&l(e.state,e.dispatch,e))return!0}}return!1}}const hS=["imgEl"],dS=i=>({"NgxEditor__Resizer--Active":i});function uS(i,t){if(1&i){const e=o.RV6();o.j41(0,"span",4)(1,"span",5),o.bIt("mousedown",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.startResizing(s,"left"))}),o.k0s(),o.j41(2,"span",6),o.bIt("mousedown",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.startResizing(s,"right"))}),o.k0s(),o.j41(3,"span",7),o.bIt("mousedown",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.startResizing(s,"left"))}),o.k0s(),o.j41(4,"span",8),o.bIt("mousedown",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.startResizing(s,"right"))}),o.k0s()()}}const pS=["ngxEditor"],mS=["*"];function gS(i,t){if(1&i&&(o.j41(0,"div",12),o.EFF(1),o.nI1(2,"async"),o.k0s()),2&i){const e=o.XpG(2);o.R7$(),o.SpI(" ",o.bMT(2,1,(null==e.href.errors?null:e.href.errors.pattern)&&e.getLabel("enterValidUrl"))," ")}}function fS(i,t){if(1&i&&(o.j41(0,"div",12),o.EFF(1),o.k0s()),2&i){const e=o.XpG(2);o.R7$(),o.SpI(" ",(null==e.text.errors?null:e.text.errors.required)&&"This is required"," ")}}function _S(i,t){if(1&i&&(o.j41(0,"div",4)(1,"div",5)(2,"label"),o.nrm(3,"input",13),o.EFF(4),o.nI1(5,"async"),o.k0s()()()),2&i){const e=o.XpG(2);o.R7$(4),o.SpI(" ",o.bMT(5,1,e.getLabel("openInNewTab"))," ")}}function xS(i,t){if(1&i){const e=o.RV6();o.j41(0,"div",2)(1,"form",3),o.bIt("ngSubmit",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.insertLink(s))}),o.j41(2,"div",4)(3,"div",5)(4,"label",6),o.EFF(5),o.nI1(6,"async"),o.k0s(),o.nrm(7,"input",7),o.DNE(8,gS,3,3,"div",8),o.k0s()(),o.j41(9,"div",4)(10,"div",5)(11,"label",6),o.EFF(12),o.nI1(13,"async"),o.k0s(),o.nrm(14,"input",9),o.DNE(15,fS,2,1,"div",8),o.k0s()(),o.DNE(16,_S,6,3,"div",10),o.j41(17,"button",11),o.EFF(18),o.nI1(19,"async"),o.k0s()()()}if(2&i){const e=o.XpG();o.R7$(),o.Y8G("formGroup",e.form),o.R7$(3),o.Y8G("htmlFor",e.getId("link-popup-url")),o.R7$(),o.JRh(o.bMT(6,12,e.getLabel("url"))),o.R7$(2),o.Y8G("id",e.getId("link-popup-url")),o.R7$(),o.Y8G("ngIf",e.href.touched&&e.href.invalid),o.R7$(3),o.Y8G("htmlFor",e.getId("link-popup-label")),o.R7$(),o.JRh(o.bMT(13,14,e.getLabel("text"))),o.R7$(2),o.Y8G("id",e.getId("link-popup-label")),o.R7$(),o.Y8G("ngIf",e.text.touched&&e.text.invalid),o.R7$(),o.Y8G("ngIf",e.options.showOpenInNewTab),o.R7$(),o.Y8G("disabled",!e.form.valid),o.R7$(),o.JRh(o.bMT(19,16,e.getLabel("insert")))}}const vS=(i,t)=>({"NgxEditor__Dropdown--Active":i,"NgxEditor--Disabled":t});function yS(i,t){if(1&i){const e=o.RV6();o.j41(0,"button",4),o.nI1(1,"async"),o.bIt("mousedown",function(s){const r=o.eBV(e).$implicit,a=o.XpG(2);return o.Njj(a.onDropdownItemMouseClick(s,r))})("keydown.enter",function(s){const r=o.eBV(e).$implicit,a=o.XpG(2);return o.Njj(a.onDropdownItemKeydown(s,r))})("keydown.space",function(s){const r=o.eBV(e).$implicit,a=o.XpG(2);return o.Njj(a.onDropdownItemKeydown(s,r))}),o.EFF(2),o.nI1(3,"async"),o.k0s()}if(2&i){const e=t.$implicit,n=o.XpG(2);o.Y8G("ngClass",o.l_i(8,vS,e===n.activeItem,n.disabledItems.includes(e)))("ariaLabel",o.bMT(1,4,n.getName(e))),o.BMQ("aria-selected",e===n.activeItem),o.R7$(2),o.SpI(" ",o.bMT(3,6,n.getName(e))," ")}}function bS(i,t){if(1&i&&(o.j41(0,"div",2),o.DNE(1,yS,4,11,"button",3),o.k0s()),2&i){const e=o.XpG();o.R7$(),o.Y8G("ngForOf",e.items)("ngForTrackBy",e.trackByIndex)}}function CS(i,t){if(1&i&&(o.j41(0,"div",12),o.EFF(1),o.nI1(2,"async"),o.k0s()),2&i){const e=o.XpG(2);o.R7$(),o.SpI(" ",o.bMT(2,1,(null==e.src.errors?null:e.src.errors.pattern)&&e.getLabel("enterValidUrl"))," ")}}function TS(i,t){if(1&i){const e=o.RV6();o.j41(0,"div",2)(1,"form",3),o.bIt("ngSubmit",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.insertLink(s))}),o.j41(2,"div",4)(3,"div",5)(4,"label",6),o.EFF(5),o.nI1(6,"async"),o.k0s(),o.nrm(7,"input",7),o.DNE(8,CS,3,3,"div",8),o.k0s()(),o.j41(9,"div",4)(10,"div",5)(11,"label",6),o.EFF(12),o.nI1(13,"async"),o.k0s(),o.nrm(14,"input",9),o.k0s()(),o.j41(15,"div",4)(16,"div",5)(17,"label",6),o.EFF(18),o.nI1(19,"async"),o.k0s(),o.nrm(20,"input",10),o.k0s()(),o.j41(21,"button",11),o.EFF(22),o.nI1(23,"async"),o.k0s()()()}if(2&i){const e=o.XpG();o.R7$(),o.Y8G("formGroup",e.form),o.R7$(3),o.Y8G("htmlFor",e.getId("image-popup-url")),o.R7$(),o.JRh(o.bMT(6,13,e.getLabel("url"))),o.R7$(2),o.Y8G("id",e.getId("image-popup-url")),o.R7$(),o.Y8G("ngIf",e.src.touched&&e.src.invalid),o.R7$(3),o.Y8G("htmlFor",e.getId("image-popup-label")),o.R7$(),o.JRh(o.bMT(13,15,e.getLabel("altText"))),o.R7$(2),o.Y8G("id",e.getId("image-popup-label")),o.R7$(3),o.Y8G("htmlFor",e.getId("image-popup-title")),o.R7$(),o.JRh(o.bMT(19,17,e.getLabel("title"))),o.R7$(2),o.Y8G("id",e.getId("image-popup-title")),o.R7$(),o.Y8G("disabled",!e.form.valid||!e.form.dirty),o.R7$(),o.JRh(o.bMT(23,19,e.getLabel("insert")))}}const kS=(i,t)=>({backgroundColor:i,color:t}),wS=i=>({"NgxEditor__Color--Active":i});function SS(i,t){if(1&i){const e=o.RV6();o.j41(0,"button",7),o.bIt("mousedown",function(s){const r=o.eBV(e).$implicit,a=o.XpG(3);return o.Njj(a.onColorSelectMouseClick(s,r))})("keydown.enter",function(){const s=o.eBV(e).$implicit,r=o.XpG(3);return o.Njj(r.onColorSelectKeydown(s))})("keydown.space",function(){const s=o.eBV(e).$implicit,r=o.XpG(3);return o.Njj(r.onColorSelectKeydown(s))}),o.k0s()}if(2&i){const e=t.$implicit,n=o.XpG(3);o.Y8G("ngStyle",o.l_i(3,kS,e,n.getContrastYIQ(e)))("title",e)("ngClass",o.eq3(6,wS,n.activeColors.includes(e)))}}function AS(i,t){if(1&i&&(o.j41(0,"div",5),o.DNE(1,SS,1,8,"button",6),o.k0s()),2&i){const e=t.$implicit,n=o.XpG(2);o.R7$(),o.Y8G("ngForOf",e)("ngForTrackBy",n.trackByIndex)}}function DS(i,t){if(1&i){const e=o.RV6();o.j41(0,"div",2),o.DNE(1,AS,2,2,"div",3),o.j41(2,"button",4),o.bIt("mousedown",function(s){o.eBV(e);const r=o.XpG();return o.Njj(r.onRemoveMouseClick(s))})("keydown.enter",function(){o.eBV(e);const s=o.XpG();return o.Njj(s.onRemoveKeydown())})("keydown.space",function(){o.eBV(e);const s=o.XpG();return o.Njj(s.onRemoveKeydown())}),o.EFF(3),o.nI1(4,"async"),o.k0s()()}if(2&i){const e=o.XpG();o.R7$(),o.Y8G("ngForOf",e.presets)("ngForTrackBy",e.trackByIndex),o.R7$(),o.Y8G("disabled",!e.isActive),o.R7$(),o.SpI(" ",o.bMT(4,4,e.getLabel("remove"))," ")}}const MS=(i,t)=>({"NgxEditor--Disabled":i,"NgxEditor__MenuBar--Reverse":t});function LS(i,t){if(1&i&&o.nrm(0,"ngx-toggle-command",7),2&i){const e=o.XpG().$implicit,n=o.XpG(2);o.HbH(n.iconContainerClass),o.Y8G("toolbarItem",e)}}function ES(i,t){if(1&i&&o.nrm(0,"ngx-insert-command",7),2&i){const e=o.XpG().$implicit,n=o.XpG(2);o.HbH(n.iconContainerClass),o.Y8G("toolbarItem",e)}}function FS(i,t){if(1&i&&(o.qex(0),o.nrm(1,"ngx-link",8),o.bVm()),2&i){const e=o.XpG().$implicit,n=o.XpG(2);o.R7$(),o.HbH(n.iconContainerClass),o.Y8G("options",n.getLinkOptions(e))}}function OS(i,t){if(1&i&&o.nrm(0,"ngx-image"),2&i){const e=o.XpG(3);o.HbH(e.iconContainerClass)}}function IS(i,t){if(1&i&&o.nrm(0,"ngx-dropdown",10),2&i){const e=t.$implicit,n=o.XpG(4);o.HbH(n.dropdownContainerClass),o.Y8G("group",e.key)("items",e.value)}}function PS(i,t){if(1&i&&(o.qex(0),o.DNE(1,IS,1,4,"ngx-dropdown",9),o.nI1(2,"keyvalue"),o.bVm()),2&i){const e=o.XpG().$implicit,n=o.XpG(2);o.R7$(),o.Y8G("ngForOf",o.bMT(2,2,n.getDropdownItems(e)))("ngForTrackBy",n.trackByIndex)}}function BS(i,t){if(1&i&&o.nrm(0,"ngx-color-picker",11),2&i){const e=o.XpG(3);o.HbH(e.iconContainerClass),o.Y8G("presets",e.presets)}}function RS(i,t){if(1&i&&o.nrm(0,"ngx-color-picker",12),2&i){const e=o.XpG(3);o.HbH(e.iconContainerClass),o.Y8G("presets",e.presets)}}function NS(i,t){if(1&i&&o.nrm(0,"div"),2&i){const e=o.XpG(3);o.HbH(e.seperatorClass)}}function VS(i,t){if(1&i&&(o.qex(0),o.DNE(1,LS,1,3,"ngx-toggle-command",3)(2,ES,1,3,"ngx-insert-command",3)(3,FS,2,3,"ng-container",2)(4,OS,1,2,"ngx-image",4)(5,PS,3,4,"ng-container",2)(6,BS,1,3,"ngx-color-picker",5)(7,RS,1,3,"ngx-color-picker",6)(8,NS,1,2,"div",4),o.bVm()),2&i){const e=t.$implicit,n=t.last,s=o.XpG().last,r=o.XpG();o.R7$(),o.Y8G("ngIf",r.toggleCommands.includes(e)),o.R7$(),o.Y8G("ngIf",r.insertCommands.includes(e)),o.R7$(),o.Y8G("ngIf",r.isLinkItem(e)),o.R7$(),o.Y8G("ngIf","image"===e),o.R7$(),o.Y8G("ngIf",r.isDropDown(e)),o.R7$(),o.Y8G("ngIf","text_color"===e),o.R7$(),o.Y8G("ngIf","background_color"===e),o.R7$(),o.Y8G("ngIf",n&&!s)}}function zS(i,t){if(1&i&&(o.qex(0),o.DNE(1,VS,9,8,"ng-container",1),o.bVm()),2&i){const e=t.$implicit,n=o.XpG();o.R7$(),o.Y8G("ngForOf",e)("ngForTrackBy",n.trackByIndex)}}function HS(i,t){if(1&i&&(o.qex(0),o.eu8(1,13),o.bVm()),2&i){const e=o.XpG();o.R7$(),o.Y8G("ngTemplateOutlet",e.customMenuRef)}}const WS=(i=!0)=>new Tt({key:new Ht("editable"),state:{init:()=>i,apply:(t,e)=>t.getMeta("UPDATE_EDITABLE")??e},props:{editable(t){return this.getState(t)},attributes(t){return this.getState(t)?null:{class:"NgxEditor__Content--Disabled"}}}}),US=i=>new Tt({key:new Ht("placeholder"),state:{init:()=>i??"",apply:(t,e)=>t.getMeta("UPDATE_PLACEHOLDER")??e},props:{decorations(t){const{doc:e}=t,{textContent:n,childCount:s}=e,r=this.getState(t);if(!r||s>1)return fe.empty;const a=[];return e.descendants((c,h)=>{if(c.type.isBlock&&0===c.childCount&&0===n.length){const p=at.node(h,h+c.nodeSize,{class:"NgxEditor__Placeholder","data-placeholder":r,"data-align":c.attrs.align??null});a.push(p)}return!1}),fe.create(e,a)}}});let JS=(()=>{class i{src;alt="";title="";outerWidth="";selected=!1;view;imageResize=new o.bkB;imgEl;startResizing(e,n){e.preventDefault(),this.resizeImage(e,n)}resizeImage(e,n){const s=e.pageX,r=this.imgEl.nativeElement.clientWidth,a="left"===n,{width:l}=window.getComputedStyle(this.view.dom),c=parseInt(l,10),h=u=>{const m=u.pageX-s,g=a?r-m:r+m;g>c||g<20||(this.outerWidth=`${g}px`)},d=u=>{u.preventDefault(),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",d),this.imageResize.emit()};document.addEventListener("mousemove",h),document.addEventListener("mouseup",d)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=o.VBU({type:i,selectors:[["ngx-image-view"]],viewQuery:function(n,s){if(1&n&&o.GBs(hS,7),2&n){let r;o.mGM(r=o.lsd())&&(s.imgEl=r.first)}},inputs:{src:"src",alt:"alt",title:"title",outerWidth:"outerWidth",selected:"selected",view:"view"},outputs:{imageResize:"imageResize"},decls:4,vars:9,consts:[["imgEl",""],[1,"NgxEditor__ImageWrapper",3,"ngClass"],["class","NgxEditor__ResizeHandle",4,"ngIf"],[3,"src","alt","title"],[1,"NgxEditor__ResizeHandle"],[1,"NgxEditor__ResizeHandle--TL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--TR",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BR",3,"mousedown"]],template:function(n,s){1&n&&(o.j41(0,"span",1),o.DNE(1,uS,5,0,"span",2),o.nrm(2,"img",3,0),o.k0s()),2&n&&(o.xc7("width",s.outerWidth),o.Y8G("ngClass",o.eq3(7,dS,s.selected)),o.R7$(),o.Y8G("ngIf",s.selected),o.R7$(),o.Y8G("src",s.src,o.B4B)("alt",s.alt)("title",s.title))},dependencies:[b.YU,b.bT],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}"]})}return i})();class ZS{dom;view;getPos;applicationRef;imageComponentRef;resizeSubscription;node;updating=!1;constructor(t,e,n,s){this.applicationRef=s.get(o.o8S),this.imageComponentRef=(0,o.a0P)(JS,{environmentInjector:this.applicationRef.injector}),this.applicationRef.attachView(this.imageComponentRef.hostView),this.setNodeAttributes(t.attrs),this.imageComponentRef.instance.view=e,this.dom=this.imageComponentRef.location.nativeElement,this.view=e,this.node=t,this.getPos=n,this.resizeSubscription=this.imageComponentRef.instance.imageResize.subscribe(()=>{this.handleResize()})}computeChanges(t,e){return JSON.stringify(t)===JSON.stringify(e)}setNodeAttributes(t){this.imageComponentRef.instance.src=t.src,this.imageComponentRef.instance.alt=t.alt,this.imageComponentRef.instance.title=t.title,this.imageComponentRef.instance.outerWidth=t.width}handleResize=()=>{if(this.updating)return;const{state:t,dispatch:e}=this.view,{tr:n}=t,s=n.setNodeMarkup(this.getPos(),void 0,{...this.node.attrs,width:this.imageComponentRef.instance.outerWidth}),r=s.doc.resolve(this.getPos()),a=new R(r);s.setSelection(a),e(s)};update(t){return t.type===this.node.type&&(this.node=t,this.computeChanges(this.node.attrs,t.attrs)&&(this.updating=!0,this.setNodeAttributes(t.attrs),this.updating=!1),!0)}ignoreMutation(){return!0}selectNode(){this.imageComponentRef.instance.selected=!0}deselectNode(){this.imageComponentRef.instance.selected=!1}destroy(){this.resizeSubscription.unsubscribe(),this.applicationRef.detachView(this.imageComponentRef.hostView)}}const tA=/(?:https?:\/\/)?[\w-]+(?:\.[\w-]+)+\.?(?:\d+)?(?:\/\S*)?$/,Kp=i=>{const t=[];return i.forEach(e=>{if(e.isText){const n=e.text;let s=0;const r=tA.exec(n);if(r){const a=r.index,l=a+r[0].length,{link:c}=e.type.schema.marks;a>0&&t.push(e.cut(s,a));const h=n.slice(a,l);t.push(e.cut(a,l).mark(c.create({href:h}).addToSet(e.marks))),s=l}s<n.length&&t.push(e.cut(s))}else t.push(e.copy(Kp(e.content)))}),v.fromArray(t)},Jp=i=>"string"==typeof i,Zp=i=>window.trustedTypes?.isHTML(i)??!1,em=i=>Jp(i)||Zp(i),tm={type:"doc",content:[{type:"paragraph"}]},gs=(i,t,e)=>{if(!i)return t.nodeFromJSON(tm);if(!em(i))return t.nodeFromJSON(i);const n=((i,t,e)=>{const n=t??Rr,s=document.createElement("div");return s.innerHTML=i,Mi.fromSchema(n).parse(s,e).toJSON()})(i,t,e);return t.nodeFromJSON(n)};let oA=(()=>{class i{renderer;injector;elementRef;constructor(e,n,s){this.renderer=e,this.injector=n,this.elementRef=s}ngxEditor;editor;outputFormat;placeholder="Type Here...";focusOut=new o.bkB;focusIn=new o.bkB;unsubscribe=new oe.B;onChange=()=>{};onTouched=()=>{};writeValue(e){!this.outputFormat&&em(e)&&(this.outputFormat="html"),this.editor.setContent(e??tm)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.setMeta("UPDATE_EDITABLE",!e),this.renderer.setProperty(this.elementRef.nativeElement,"disabled",e)}handleChange(e){if("html"!==this.outputFormat)this.onChange(e);else{const n=(i=>{const e=this.editor.schema??Rr,n=e.nodeFromJSON(i),s=Li.fromSchema(e).serializeFragment(n.content),r=document.createElement("div");return r.appendChild(s),r.innerHTML})(e);this.onChange(n)}}setMeta(e,n){const{dispatch:s,state:{tr:r}}=this.editor.view;s(r.setMeta(e,n))}setPlaceholder(e){this.setMeta("UPDATE_PLACEHOLDER",e)}registerPlugins(){this.editor.registerPlugin(WS()),this.editor.registerPlugin(US(this.placeholder)),this.editor.registerPlugin(((i={})=>new Tt({key:new Ht("attributes"),props:{attributes:i}}))({class:"NgxEditor__Content"})),this.editor.registerPlugin((i=>new Tt({key:new Ht("focus"),props:{handleDOMEvents:{focus:()=>(i(),!1)}}}))(()=>{this.focusIn.emit()})),this.editor.registerPlugin((i=>new Tt({key:new Ht("blur"),props:{handleDOMEvents:{blur:()=>(i(),!1)}}}))(()=>{this.focusOut.emit(),this.onTouched()})),this.editor.features.resizeImage&&this.editor.registerPlugin((i=>new Tt({key:new Ht("image-resize"),props:{nodeViews:{image:(t,e,n)=>new ZS(t,e,n,i)}}}))(this.injector)),this.editor.features.linkOnPaste&&this.editor.registerPlugin(new Tt({key:new Ht("linkify"),props:{transformPasted:i=>new w(Kp(i.content),i.openStart,i.openEnd)}}))}ngOnInit(){if(!this.editor)throw new oa("Required editor instance for initializing editor component");this.registerPlugins(),this.renderer.appendChild(this.ngxEditor.nativeElement,this.editor.view.dom),this.editor.valueChanges.pipe((0,ue.Q)(this.unsubscribe)).subscribe(e=>{this.handleChange(e)})}ngOnChanges(e){e.placeholder&&!e.placeholder.isFirstChange()&&this.setPlaceholder(e.placeholder.currentValue)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}static \u0275fac=function(n){return new(n||i)(o.rXU(o.sFG),o.rXU(o.zZn),o.rXU(o.aKT))};static \u0275cmp=o.VBU({type:i,selectors:[["ngx-editor"]],viewQuery:function(n,s){if(1&n&&o.GBs(pS,7),2&n){let r;o.mGM(r=o.lsd())&&(s.ngxEditor=r.first)}},inputs:{editor:"editor",outputFormat:"outputFormat",placeholder:"placeholder"},outputs:{focusOut:"focusOut",focusIn:"focusIn"},features:[o.Jv_([{provide:P.kq,useExisting:(0,o.Rfq)(()=>i),multi:!0}]),o.OA$],ngContentSelectors:mS,decls:3,vars:0,consts:[["ngxEditor",""],[1,"NgxEditor"]],template:function(n,s){1&n&&(o.NAR(),o.j41(0,"div",1,0),o.SdG(2),o.k0s())},styles:[':root{--ngx-editor-border-radius: 4px;--ngx-editor-background-color: #fff;--ngx-editor-text-color: #000;--ngx-editor-placeholder-color: #6c757d;--ngx-editor-border-color: rgba(0, 0, 0, .2);--ngx-editor-wrapper-border-color: rgba(0, 0, 0, .2);--ngx-editor-menubar-bg-color: #fff;--ngx-editor-menubar-padding: 3px;--ngx-editor-menubar-height: 30px;--ngx-editor-blockquote-color: #ddd;--ngx-editor-blockquote-border-width: 3px;--ngx-editor-icon-size: 30px;--ngx-editor-popup-bg-color: #fff;--ngx-editor-popup-border-radius: 4px;--ngx-editor-popup-shadow: rgba(60, 64, 67, .15) 0px 2px 6px 2px;--ngx-editor-menu-item-border-radius: 2px;--ngx-editor-menu-item-active-color: #1a73e8;--ngx-editor-menu-item-hover-bg-color: #f1f1f1;--ngx-editor-menu-item-active-bg-color: #e8f0fe;--ngx-editor-seperator-color: #ccc;--ngx-editor-bubble-bg-color: #000;--ngx-editor-bubble-text-color: #fff;--ngx-editor-bubble-item-hover-color: #636262;--ngx-editor-bubble-seperator-color: #fff;--ngx-editor-focus-ring-color: #5e9ed6;--ngx-editor-error-color: red;--ngx-editor-click-pointer: default}.NgxEditor{background:var(--ngx-editor-background-color);color:var(--ngx-editor-text-color);background-clip:padding-box;border-radius:var(--ngx-editor-border-radius);border:1px solid var(--ngx-editor-border-color);position:relative}.NgxEditor--Disabled{opacity:.5!important;pointer-events:none!important}.NgxEditor__Placeholder:before{color:var(--ngx-editor-placeholder-color);opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:"liga" 0}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:var(--ngx-editor-blockquote-border-width) solid var(--ngx-editor-blockquote-color);margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid var(--ngx-editor-wrapper-border-color);border-radius:var(--ngx-editor-border-radius)}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:var(--ngx-editor-border-radius);border-top-right-radius:var(--ngx-editor-border-radius);border-bottom:1px solid var(--ngx-editor-border-color)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:var(--ngx-editor-menubar-padding);background-color:var(--ngx-editor-menubar-bg-color);gap:.25rem .1rem}.NgxEditor__MenuBar button:not(:disabled),.NgxEditor__MenuBar [role=button]:not(:disabled){cursor:var(--ngx-editor-click-pointer, default)}.NgxEditor__MenuItem{display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem.NgxEditor__MenuItem--IconContainer{display:flex;align-items:center;justify-content:center}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon{all:unset;appearance:none;height:var(--ngx-editor-icon-size);width:var(--ngx-editor-icon-size);transition:.2s ease-in-out;display:inline-flex;align-items:center;justify-content:center;border-radius:var(--ngx-editor-menu-item-border-radius)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:var(--ngx-editor-menu-item-active-bg-color);color:var(--ngx-editor-menu-item-active-color)}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{all:unset;appearance:none;display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:"";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;width:100%;top:calc(var(--ngx-editor-menubar-height) + 2px);display:flex;flex-direction:column}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{all:unset;appearance:none;padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:var(--ngx-editor-menu-item-active-color);background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__Popup{position:absolute;top:calc(var(--ngx-editor-menubar-height) + 2px);box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid var(--ngx-editor-seperator-color);margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:var(--ngx-editor-error-color)}\n'],encapsulation:2})}return i})(),ci=(()=>{class i{editor;customMenuRefChange=new oe.B;setCustomMenuRef(e){this.customMenuRefChange.next(e)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class hi{name;constructor(t){this.name=t}apply(){return(t,e)=>{const{schema:n}=t,s=n.marks[this.name];return!!s&&Yp(s)(t,e)}}toggle(){return(t,e)=>{const{schema:n}=t,s=n.marks[this.name];return!!s&&xn(s)(t,e)}}isActive(t){const{schema:e}=t,n=e.marks[this.name];return!!n&&tl(t,n)}canExecute(t){return this.toggle()(t)}}class Xr{isBulletList=!1;constructor(t=!1){this.isBulletList=t}getType(t){return this.isBulletList?t.nodes.bullet_list:t.nodes.ordered_list}toggle(){return(t,e)=>{const{schema:n}=t,s=this.getType(n);return!!s&&(this.isActive(t)?wp(n.nodes.list_item)(t,e):function ew(i,t=null){return function(e,n){let{$from:s,$to:r}=e.selection,a=s.blockRange(r),l=!1,c=a;if(!a)return!1;if(a.depth>=2&&s.node(a.depth-1).type.compatibleContent(i)&&0==a.startIndex){if(0==s.index(a.depth-1))return!1;let d=e.doc.resolve(a.start-2);c=new _r(d,d,a.depth),a.endIndex<a.parent.childCount&&(a=new _r(s,e.doc.resolve(r.end(a.depth)),a.depth)),l=!0}let h=ga(c,i,t,a);return!!h&&(n&&n(function tw(i,t,e,n,s){let r=v.empty;for(let d=e.length-1;d>=0;d--)r=v.from(e[d].type.create(e[d].attrs,r));i.step(new we(t.start-(n?2:0),t.end,t.start,t.end,new w(r,0,0),e.length,!0));let a=0;for(let d=0;d<e.length;d++)e[d].type==s&&(a=d+1);let l=e.length-a,c=t.start+e.length-(n?2:0),h=t.parent;for(let d=t.startIndex,u=t.endIndex,p=!0;d<u;d++,p=!1)!p&&an(i.doc,c,l)&&(i.split(c,l),c+=2*l),c+=h.child(d).nodeSize;return i}(e.tr,a,h,l,i).scrollIntoView()),!0)}}(s)(t,e))}}isActive(t){const{schema:e}=t,n=this.getType(e);return!!n&&Hp(t,n)}canExecute(t){return this.toggle()(t)}}class Ni{level;constructor(t){this.level=t}apply(){return(t,e)=>{const{schema:n}=t,s=n.nodes.heading;return!!s&&Ja(s)(t,e)}}toggle(){return(t,e)=>{const{schema:n,selection:s,doc:r}=t,a=n.nodes.heading;if(!a)return!1;const l=s.$from.before(1),h=r.nodeAt(l)?.attrs??{};return this.isActive(t)?Ja(n.nodes.paragraph,h)(t,e):Ja(a,{...h,level:this.level})(t,e)}}isActive(t){const{schema:e}=t,n=$p(t),s=e.nodes.heading;if(!s)return!1;const r=[s,e.nodes.text,e.nodes.blockquote];return!!n.filter(c=>r.includes(c.type)).find(c=>c.attrs.level===this.level)}canExecute(t){return this.toggle()(t)}}class fs{align;constructor(t){this.align=t}toggle(){return(t,e)=>{const{doc:n,selection:s,tr:r,schema:a}=t,{from:l,to:c}=s;let h=!1;return n.nodesBetween(l,c,(d,u)=>{const p=d.type;return[a.nodes.paragraph,a.nodes.heading].includes(p)&&(h=!0,r.setNodeMarkup(u,p,{...d.attrs,align:d.attrs.align===this.align?null:this.align})),!0}),!!h&&(r.docChanged&&e?.(r),!0)}}isActive(t){return!!$p(t).find(s=>s.attrs.align===this.align)}canExecute(t){return this.toggle()(t)}}const cA={strict:!0};let al=class{update(t){return(e,n)=>{const{schema:s,selection:r}=e,a=s.marks.link;return!(!a||r.empty)&&xn(a,t)(e,n)}}insert(t,e){return(n,s)=>{const{schema:r,tr:a}=n;if(!r.marks.link)return!1;const h=r.text(t,[r.marks.link.create({href:e.href,title:e.title??t,target:e.target??"_blank"})]);return a.replaceSelectionWith(h,!1).scrollIntoView(),!!a.docChanged&&(s?.(a),!0)}}isActive(t,e=cA){if(e.strict)return!0;const{schema:n}=t,s=n.marks.link;return!!s&&tl(t,s)}remove(t,e){return((i,t)=>{const{doc:e,selection:n,tr:s,schema:r}=i,{$head:{pos:a},from:l,to:c}=n,h=r.marks.link;if(l===c){const d=e.resolve(a),u=a-d.textOffset,p=u+d.parent.child(d.index()).nodeSize;s.removeMark(u,p,h)}else s.removeMark(l,c,h);return!!s.docChanged&&(t?.(s),!0)})(t,e)}canExecute(t){const e={href:""};return this.insert("Exec",e)(t)||this.update(e)(t)}},im=class{insert(t,e){return(n,s)=>{const{schema:r,tr:a,selection:l}=n,c=r.nodes.image;if(!c)return!1;const h={width:null,src:t,...e};!h.width&&l instanceof R&&l.node.type===c&&(h.width=l.node.attrs.width),a.replaceSelectionWith(c.createAndFill(h));const d=a.doc.resolve(a.selection.anchor-a.selection.$anchor.nodeBefore.nodeSize);return a.setSelection(new R(d)).scrollIntoView(),!!a.docChanged&&(s?.(a),!0)}}isActive(t){const{selection:e}=t;return e instanceof R&&"image"===e.node.type.name}},vn=class{name;attrName;constructor(t,e="color"){this.name=t,this.attrName=e}apply(t){return(e,n)=>{const{schema:s,selection:r,doc:a}=e,l=s.marks[this.name];if(!l)return!1;const{from:c,to:h,empty:d}=r;if(!d&&c+1===h){const u=a.nodeAt(c);if(u?.isAtom&&!u.isText&&u.isLeaf)return!1}return Yp(l,t)(e,n)}}isActive(t){const{schema:e}=t,n=e.marks[this.name];return!!n&&tl(t,n)}getActiveColors(t){if(!this.isActive(t))return[];const{schema:e}=t;return(i=>{let t=[];const{selection:e,storedMarks:n}=i,{from:s,to:r,empty:a,$from:l}=e;return a?t=n||l.marks():i.doc.nodesBetween(s,r,c=>{t=[...t,...c.marks]}),t})(t).filter(r=>r.type===e.marks[this.name]).map(r=>r.attrs[this.attrName]).filter(Boolean)}remove(){return(t,e)=>{const{schema:n}=t,s=n.marks[this.name];return!!s&&(i=s,(t,e)=>{const{tr:n,selection:s,storedMarks:r,doc:a}=t,{empty:l,ranges:c}=s;if(l&&s instanceof q){const{$cursor:h}=s;if(!h||!Gp(t.doc,c,i))return!1;if(i.isInSet(r||h.marks()))return n.removeStoredMark(i),e?.(n),!0}else{for(const h of c){const{$from:d,$to:u}=h;a.rangeHasMark(d.pos,u.pos,i)&&n.removeMark(d.pos,u.pos,i)}if(!n.docChanged)return!1;e?.(n.scrollIntoView())}return!1})(t,e);var i}}canExecute(t){return this.apply("text_color"===this.name?{color:""}:{backgroundColor:""})(t)}};const hA=["link"],uA=["paragraph","heading","blockquote"];class Yr{method="increase";constructor(t){this.method=t}insert(){return(t,e)=>{const{tr:n,doc:s}=t,{from:r,to:a}=n.selection;let l=!1;return s.nodesBetween(r,a,(c,h)=>uA.includes(c.type.name)?(l=((i,t,e)=>{const n=i.doc.nodeAt(t);if(!n)return!1;const s=n.attrs.indent??0,r=(i=>Math.min(Math.max(i,0),10))(s+("increase"===e?1:-1));if(r===s||r<0||r>10)return!1;const a={...n.attrs,indent:r};return i.setNodeMarkup(t,n.type,a),!0})(n,h,this.method),!1):!c.type.name.includes("list")),!!l&&(n.docChanged&&e?.(n),!0)}}canExecute(t){return this.insert()(t)}}class rm{mode="undo";constructor(t){this.mode=t}insert(){return(t,e)=>"undo"===this.mode?sl(t,e):Hr(t,e)}canExecute(t){return this.insert()(t)}}const mA=new hi("strong"),gA=new hi("em"),fA=new hi("code"),_A=new hi("u"),xA=new hi("s"),vA=new class aA{toggle(){return(t,e)=>{const{schema:n}=t,s=n.nodes.blockquote;return!!s&&(this.isActive(t)?((i,t)=>{let{$from:e,$to:n}=i.selection,s=e.blockRange(n),r=s&&Jn(s);return null!=r&&(t&&t(i.tr.lift(s,r).scrollIntoView()),!0)})(t,e):function Dw(i,t=null){return function(e,n){let{$from:s,$to:r}=e.selection,a=s.blockRange(r),l=a&&ga(a,i,t);return!!l&&(n&&n(e.tr.wrap(a,l).scrollIntoView()),!0)}}(s)(t,e))}}isActive(t){const{schema:e}=t,n=e.nodes.blockquote;return!!n&&Hp(t,n)}canExecute(t){return this.toggle()(t)}},yA=new class lA{insert(){return(t,e)=>{const{schema:n,tr:s}=t,r=n.nodes.horizontal_rule;return!!r&&(e(s.replaceSelectionWith(r.create()).scrollIntoView()),!0)}}canExecute(t){return((i,t)=>{const{$from:e}=i.selection;for(let n=e.depth;n>=0;n-=1){const s=e.index(n);if(e.node(n).canReplaceWith(s,s,t))return!0}return!1})(t,t.schema.nodes.horizontal_rule)}},bA=new class dA{insert(){return(t,e)=>{const{tr:n}=t,{ranges:s,empty:r}=n.selection;return r||(Object.entries(t.schema.marks).forEach(([a,l])=>{hA.includes(a)||s.forEach(c=>{n.removeMark(c.$from.pos,c.$to.pos,l)})}),e(n)),!0}}canExecute(){return!0}},CA=new Xr(!0),TA=new Xr(!1),kA=new Ni(1),wA=new Ni(2),SA=new Ni(3),AA=new Ni(4),DA=new Ni(5),MA=new Ni(6),LA=new fs("left"),EA=new fs("center"),FA=new fs("right"),OA=new fs("justify"),IA=new al,PA=new im,BA=new vn("text_color","color"),RA=new vn("text_background_color","backgroundColor"),NA=new Yr("increase"),VA=new Yr("decrease"),zA=new hi("sup"),HA=new hi("sub"),$A=new rm("undo"),GA=new rm("redo"),Wr={bold:mA,italic:gA,code:fA,underline:_A,strike:xA,blockquote:vA,bullet_list:CA,ordered_list:TA,h1:kA,h2:wA,h3:SA,h4:AA,h5:DA,h6:MA,align_left:LA,align_center:EA,align_right:FA,align_justify:OA,superscript:zA,subscript:HA},om={horizontal_rule:yA,format_clear:bA,indent:NA,outdent:VA,undo:$A,redo:GA},_s=IA,am=PA,XA=BA,YA=RA,ll={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",indent:"Increase Indent",outdent:"Decrease Indent",superscript:"Superscript",subscript:"Subscript",undo:"Undo",redo:"Redo",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove",enterValidUrl:"Please enter a valid URL"};class WA{locals=ll;constructor(t={}){this.locals={...ll,...t}}get=t=>{const e=this.locals[t];return e?(0,gC.A)(e)?e:(0,en.of)(e):(0,en.of)("")}}const lm={bold:'\n  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />\n',italic:'\n  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />\n',code:'\n<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>\n',underline:'\n<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>\n',strike:'\n<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>\n',ordered_list:'\n<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>\n',bullet_list:'\n<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>\n',blockquote:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>\n',link:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>\n',unlink:'\n<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>\n',image:'\n<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>\n',align_left:'\n<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>\n',align_center:'\n<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>\n',align_right:'\n<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>\n',align_justify:'\n<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>\n',text_color:'\n<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>\n',color_fill:'\n<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>\n',horizontal_rule:'\n  <g>\n    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>\n    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>\n  </g>\n',format_clear:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>\n',indent:'<path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',outdent:'<path d="M0 0h24v24H0V0z" fill="none"/><path d="M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',superscript:'<g><rect fill="none" height="20" width="20"/><path d="M17,6l-1,0v1h2v1l-3,0V6c0-0.55,0.45-1,1-1l1,0l0-1h-2V3l2,0c0.55,0,1,0.45,1,1v1C18,5.55,17.55,6,17,6z M5.63,16h1.9 l2.43-3.87h0.08L12.47,16h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,6h-1.9l3.09,4.8L5.63,16z"/></g>',subscript:'<g><rect fill="none" height="20" width="20"/><path d="M17,15l-1,0v1h2v1h-3v-2c0-0.55,0.45-1,1-1l1,0l0-1h-2v-1l2,0c0.55,0,1,0.45,1,1v1C18,14.55,17.55,15,17,15z M5.63,14h1.9 l2.43-3.87h0.08L12.47,14h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,4h-1.9l3.09,4.8L5.63,14z"/></g>',undo:'<path d="M0 0h24v24H0V0z" fill="none"/><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/>',redo:'<path d="M0 0h24v24H0V0z" fill="none"/><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/>',path:"<path></path>"};class bD{static get(t,e="currentColor"){const n=lm[t];return n&&(n.includes("<path")||n.includes("<g"))?`\n        <svg\n          xmlns="http://www.w3.org/2000/svg"\n          viewBox="0 0 24 24"\n          fill=${e}\n          height=20\n          width=20\n        >\n          ${n}\n        </svg>\n      `:n}}let cl=(()=>{class i{locals={};icons={};static \u0275fac=function(n){return new(n||i)};static \u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Vi=(()=>{class i{config;constructor(e){this.config=e}get locals(){return new WA(this.config.locals)}getIcon(e){return this.config.icons[e]?this.config.icons[e]:bD.get(e)}static \u0275fac=function(n){return new(n||i)(o.KVO(cl,8))};static \u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const cm=i=>({locals:i.locals??{},icons:i.icons??{}});let yn=(()=>{class i{sanitizer;constructor(e){this.sanitizer=e}transform(e){return Zp(e)?e:this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(n){return new(n||i)(o.rXU(iS.up,16))};static \u0275pipe=o.EJ8({name:"sanitizeHtml",type:i,pure:!0})}return i})(),CD=(()=>{class i{ngxeService;menuService;toolbarItem;get name(){return this.toolbarItem}html;editorView;isActive=!1;disabled=!1;updateSubscription;constructor(e,n){this.ngxeService=e,this.menuService=n}toggle(){const{state:e,dispatch:n}=this.editorView;Wr[this.name].toggle()(e,n)}onMouseClick(e){e.preventDefault(),0===e.button&&this.toggle()}onKeydown(){this.toggle()}update=e=>{const{state:n}=e,s=Wr[this.name];this.isActive=s.isActive(n),this.disabled=!s.canExecute(n)};getTitle(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)(o.rXU(Vi),o.rXU(ci))};static \u0275cmp=o.VBU({type:i,selectors:[["ngx-toggle-command"]],inputs:{toolbarItem:"toolbarItem"},decls:4,vars:14,consts:[["type","button",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"]],template:function(n,s){1&n&&(o.j41(0,"button",0),o.nI1(1,"sanitizeHtml"),o.nI1(2,"async"),o.nI1(3,"async"),o.bIt("mousedown",function(a){return s.onMouseClick(a)})("keydown.enter",function(){return s.onKeydown()})("keydown.space",function(){return s.onKeydown()}),o.k0s()),2&n&&(o.AVh("NgxEditor__MenuItem--Active",s.isActive)("NgxEditor--Disabled",s.disabled),o.Y8G("disabled",s.disabled)("innerHTML",o.bMT(1,8,s.html),o.npT)("title",o.bMT(2,10,s.getTitle(s.name)))("ariaLabel",o.bMT(3,12,s.getTitle(s.name))))},dependencies:[b.Jj,yn]})}return i})(),TD=(()=>{class i{ngxeService;menuService;toolbarItem;get name(){return this.toolbarItem}html;editorView;disabled=!1;updateSubscription;constructor(e,n){this.ngxeService=e,this.menuService=n}onMouseClick(e){e.preventDefault(),0===e.button&&this.insert()}onKeydown(){this.insert()}insert(){const{state:e,dispatch:n}=this.editorView;om[this.name].insert()(e,n)}update=e=>{const{state:n}=e;this.disabled=!om[this.name].canExecute(n)};getTitle(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)(o.rXU(Vi),o.rXU(ci))};static \u0275cmp=o.VBU({type:i,selectors:[["ngx-insert-command"]],inputs:{toolbarItem:"toolbarItem"},decls:4,vars:12,consts:[[1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"]],template:function(n,s){1&n&&(o.j41(0,"button",0),o.nI1(1,"sanitizeHtml"),o.nI1(2,"async"),o.nI1(3,"async"),o.bIt("mousedown",function(a){return s.onMouseClick(a)})("keydown.enter",function(){return s.onKeydown()})("keydown.space",function(){return s.onKeydown()}),o.k0s()),2&n&&(o.AVh("NgxEditor--Disabled",s.disabled),o.Y8G("disabled",s.disabled)("innerHTML",o.bMT(1,6,s.html),o.npT)("title",o.bMT(2,8,s.getTitle(s.name)))("ariaLabel",o.bMT(3,10,s.getTitle(s.name))))},dependencies:[b.Jj,yn]})}return i})();const hm={showOpenInNewTab:!0};let kD=(()=>{class i{el;ngxeService;menuService;options=hm;showPopup=!1;isActive=!1;canExecute=!0;componentId=ud();form;editorView;updateSubscription;constructor(e,n,s){this.el=e,this.ngxeService=n,this.menuService=s}get icon(){return this.ngxeService.getIcon(this.isActive?"unlink":"link")}get title(){return this.ngxeService.locals.get(this.isActive?"removeLink":"insertLink")}get href(){return this.form.get("href")}get text(){return this.form.get("text")}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hidePopup()}getId(e){return`${e}-${this.componentId}`}getLabel(e){return this.ngxeService.locals.get(e)}hidePopup(){this.showPopup=!1,this.form.reset({href:"",text:"",openInNewTab:!0}),this.text.enable()}togglePopup(){const{state:e,dispatch:n}=this.editorView;this.isActive?_s.remove(e,n):(this.showPopup=!this.showPopup,this.showPopup&&this.setText())}onTogglePopupMouseClick(e){0===e.button&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}setText=()=>{const{state:{selection:e,doc:n}}=this.editorView,{empty:s,from:r,to:a}=e,l=s?"":n.textBetween(r,a);l&&(this.text.patchValue(l),this.text.disable())};update=e=>{const{state:n}=e;this.isActive=_s.isActive(n,{strict:!1}),this.canExecute=_s.canExecute(n)};insertLink(e){e.preventDefault();const{text:n,href:s,openInNewTab:r}=this.form.getRawValue(),{dispatch:a,state:l}=this.editorView,{selection:c}=l;let h;this.options.showOpenInNewTab&&(h=r?"_blank":"_self");const d={title:s,href:s,target:h};c.empty?(_s.insert(n,d)(l,a),this.editorView.focus()):_s.update(d)(l,a),this.hidePopup()}ngOnInit(){this.editorView=this.menuService.editor.view,this.form=new P.gE({href:new P.MJ("",[P.k0.required,P.k0.pattern(this.menuService.editor.linkValidationPattern)]),text:new P.MJ("",[P.k0.required]),openInNewTab:new P.MJ(!0)}),this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)(o.rXU(o.aKT),o.rXU(Vi),o.rXU(ci))};static \u0275cmp=o.VBU({type:i,selectors:[["ngx-link"]],hostBindings:function(n,s){1&n&&o.bIt("mousedown",function(a){return s.onDocumentClick(a)},!1,o.EBC)},inputs:{options:[2,"options","options",e=>({...hm,...e})]},features:[o.GFd],decls:5,vars:16,consts:[["type","button","aria-haspopup","dialog",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel","ariaExpanded"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"ngSubmit","formGroup"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label",3,"htmlFor"],["type","url","formControlName","href","autocomplete","off",3,"id"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","text","autocomplete","off",3,"id"],["class","NgxEditor__Popup--FormGroup",4,"ngIf"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"],["type","checkbox","formControlName","openInNewTab"]],template:function(n,s){1&n&&(o.j41(0,"button",0),o.nI1(1,"sanitizeHtml"),o.nI1(2,"async"),o.nI1(3,"async"),o.bIt("mousedown",function(a){return s.onTogglePopupMouseClick(a)})("keydown.enter",function(){return s.onTogglePopupKeydown()})("keydown.space",function(){return s.onTogglePopupKeydown()}),o.k0s(),o.DNE(4,xS,20,18,"div",1)),2&n&&(o.AVh("NgxEditor__MenuItem--Active",s.isActive||s.showPopup)("NgxEditor--Disabled",!s.canExecute),o.Y8G("disabled",!s.canExecute)("innerHTML",o.bMT(1,10,s.icon),o.npT)("title",o.bMT(2,12,s.title))("ariaLabel",o.bMT(3,14,s.title))("ariaExpanded",s.showPopup),o.R7$(4),o.Y8G("ngIf",s.showPopup))},dependencies:[b.bT,P.qT,P.me,P.Zm,P.BC,P.cb,P.j4,P.JD,b.Jj,yn]})}return i})(),wD=(()=>{class i{ngxeService;menuService;el;editorView;updateSubscription;group;items;isDropdownOpen=!1;disabledItems=[];activeItem;constructor(e,n,s){this.ngxeService=e,this.menuService=n,this.el=s}get isSelected(){return!(!this.activeItem&&!this.isDropdownOpen)}get isDropdownDisabled(){return this.disabledItems.length===this.items.length}onDocumentClick(e){!this.el.nativeElement.contains(e)&&this.isDropdownOpen&&(this.isDropdownOpen=!1)}getName(e){return this.ngxeService.locals.get(e)}getIsDropdownActive(e){return this.activeItem===e}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}onToggleDropdownMouseClick(e){e.preventDefault(),0===e.button&&this.toggleDropdown()}onToggleDropdownKeydown(){this.toggleDropdown()}trackByIndex(e){return e}selectItem(e){const n=Wr[e],{state:s,dispatch:r}=this.editorView;n.toggle()(s,r),this.isDropdownOpen=!1}onDropdownItemMouseClick(e,n){e.preventDefault(),0===e.button&&this.selectItem(n)}onDropdownItemKeydown(e,n){e.preventDefault(),this.selectItem(n)}update=e=>{const{state:n}=e;this.disabledItems=[];const s=[];this.items.forEach(r=>{const a=Wr[r];a.isActive(n)&&s.push(r),a.canExecute(n)||this.disabledItems.push(r)}),1===s.length?[this.activeItem]=s:this.activeItem=null};ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)(o.rXU(Vi),o.rXU(ci),o.rXU(o.aKT))};static \u0275cmp=o.VBU({type:i,selectors:[["ngx-dropdown"]],hostBindings:function(n,s){1&n&&o.bIt("mousedown",function(a){return s.onDocumentClick(a.target)},!1,o.EBC)},inputs:{group:"group",items:"items"},decls:5,vars:13,consts:[["type","button","aria-haspopup","listbox",1,"NgxEditor__Dropdown--Text",3,"mousedown","keydown.enter","keydown.space","disabled","ariaLabel","ariaExpanded"],["class","NgxEditor__Dropdown--DropdownMenu","role","listbox",4,"ngIf"],["role","listbox",1,"NgxEditor__Dropdown--DropdownMenu"],["type","button","class","NgxEditor__Dropdown--Item","role","option",3,"ngClass","ariaLabel","mousedown","keydown.enter","keydown.space",4,"ngFor","ngForOf","ngForTrackBy"],["type","button","role","option",1,"NgxEditor__Dropdown--Item",3,"mousedown","keydown.enter","keydown.space","ngClass","ariaLabel"]],template:function(n,s){1&n&&(o.j41(0,"button",0),o.nI1(1,"async"),o.bIt("mousedown",function(a){return s.onToggleDropdownMouseClick(a)})("keydown.enter",function(){return s.onToggleDropdownKeydown()})("keydown.space",function(){return s.onToggleDropdownKeydown()}),o.EFF(2),o.nI1(3,"async"),o.k0s(),o.DNE(4,bS,2,2,"div",1)),2&n&&(o.AVh("NgxEditor__Dropdown--Selected",s.isSelected)("NgxEditor--Disabled",s.isDropdownDisabled),o.Y8G("disabled",s.isDropdownDisabled)("ariaLabel",o.bMT(1,9,s.getName(s.activeItem||s.group)))("ariaExpanded",s.isDropdownOpen),o.R7$(2),o.SpI(" ",o.bMT(3,11,s.getName(s.activeItem||s.group)),"\n"),o.R7$(2),o.Y8G("ngIf",s.isDropdownOpen))},dependencies:[b.YU,b.Sq,b.bT,b.Jj]})}return i})(),SD=(()=>{class i{el;ngxeService;menuService;showPopup=!1;isActive=!1;componentId=ud();updateSubscription;form=new P.gE({src:new P.MJ("",[P.k0.required,P.k0.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#\n\r]*)?#?([^\n\r]*)")]),alt:new P.MJ(""),title:new P.MJ("")});editorView;constructor(e,n,s){this.el=e,this.ngxeService=n,this.menuService=s}get icon(){return this.ngxeService.getIcon("image")}get src(){return this.form.get("src")}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hideForm()}getId(e){return`${e}-${this.componentId}`}getLabel(e){return this.ngxeService.locals.get(e)}hideForm(){this.showPopup=!1,this.form.reset({src:"",alt:"",title:""})}togglePopup(){this.showPopup=!this.showPopup,this.showPopup&&this.fillForm()}onTogglePopupMouseClick(e){0===e.button&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}fillForm(){const{state:e}=this.editorView,{selection:n}=e;if(n instanceof R&&this.isActive){const{src:s,alt:r="",title:a=""}=n.node.attrs;this.form.setValue({src:s,alt:r,title:a})}}update=e=>{const{state:n}=e;this.isActive=am.isActive(n)};insertLink(e){e.preventDefault();const{src:n,alt:s,title:r}=this.form.getRawValue(),{dispatch:a,state:l}=this.editorView;am.insert(n,{alt:s,title:r})(l,a),this.editorView.focus(),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)(o.rXU(o.aKT),o.rXU(Vi),o.rXU(ci))};static \u0275cmp=o.VBU({type:i,selectors:[["ngx-image"]],hostBindings:function(n,s){1&n&&o.bIt("mousedown",function(a){return s.onDocumentClick(a)},!1,o.EBC)},decls:5,vars:13,consts:[["type","button","aria-haspopup","dialog",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","innerHTML","title","ariaLabel","ariaExpanded"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"ngSubmit","formGroup"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label",3,"htmlFor"],["type","url","formControlName","src","autocomplete","off",3,"id"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","alt","autocomplete","off",3,"id"],["type","text","formControlName","title","autocomplete","off",3,"id"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(n,s){1&n&&(o.j41(0,"button",0),o.nI1(1,"sanitizeHtml"),o.nI1(2,"async"),o.nI1(3,"async"),o.bIt("mousedown",function(a){return s.onTogglePopupMouseClick(a)})("keydown.enter",function(){return s.onTogglePopupKeydown()})("keydown.space",function(){return s.onTogglePopupKeydown()}),o.k0s(),o.DNE(4,TS,24,21,"div",1)),2&n&&(o.AVh("NgxEditor__MenuItem--Active",s.isActive||s.showPopup),o.Y8G("innerHTML",o.bMT(1,7,s.icon),o.npT)("title",o.bMT(2,9,s.getLabel("insertImage")))("ariaLabel",o.bMT(3,11,s.getLabel("insertImage")))("ariaExpanded",s.showPopup),o.R7$(4),o.Y8G("ngIf",s.showPopup))},dependencies:[b.bT,P.qT,P.me,P.BC,P.cb,P.j4,P.JD,b.Jj,yn]})}return i})(),AD=(()=>{class i{el;menuService;ngxeService;presets;type;constructor(e,n,s){this.el=e,this.menuService=n,this.ngxeService=s}get title(){return this.getLabel("text_color"===this.type?"text_color":"background_color")}get icon(){return this.ngxeService.getIcon("text_color"===this.type?"text_color":"color_fill")}get command(){return"text_color"===this.type?XA:YA}updateSubscription;editorView;showPopup=!1;isActive=!1;activeColors=[];canExecute=!0;getContrastYIQ(e){const n=e.replace("#","");return(299*parseInt(n.substring(0,2),16)+587*parseInt(n.substring(2,4),16)+114*parseInt(n.substring(4,6),16))/1e3>=128?"black":"white"}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hidePopup()}hidePopup(){this.showPopup=!1}togglePopup(){this.showPopup=!this.showPopup}onTogglePopupMouseClick(e){e.preventDefault(),0===e.button&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}remove(){const{state:e,dispatch:n}=this.editorView;this.command.remove()(e,n),this.hidePopup()}onRemoveMouseClick(e){e.preventDefault(),0===e.button&&(e.preventDefault(),this.remove())}onRemoveKeydown(){this.remove()}trackByIndex(e){return e}selectColor(e){const{state:n,dispatch:s}=this.editorView;"text_color"===this.type?this.command.apply({color:e})(n,s):this.command.apply({backgroundColor:e})(n,s),this.editorView.hasFocus()||this.editorView.focus(),this.hidePopup()}onColorSelectMouseClick(e,n){e.preventDefault(),0===e.button&&this.selectColor(n)}onColorSelectKeydown(e){this.selectColor(e)}update=e=>{const{state:n}=e;this.canExecute=this.command.canExecute(n),this.isActive=this.command.isActive(n),this.activeColors=[],this.isActive&&(this.activeColors=this.command.getActiveColors(n))};getLabel(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)(o.rXU(o.aKT),o.rXU(ci),o.rXU(Vi))};static \u0275cmp=o.VBU({type:i,selectors:[["ngx-color-picker"]],hostBindings:function(n,s){1&n&&o.bIt("mousedown",function(a){return s.onDocumentClick(a)},!1,o.EBC)},inputs:{presets:"presets",type:"type"},decls:5,vars:15,consts:[["type","button",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],["class","NgxEditor__ColorContainer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__MenuItem--Button",3,"mousedown","keydown.enter","keydown.space","disabled"],[1,"NgxEditor__ColorContainer"],["class","NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown","keydown.enter","keydown.space",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Color",3,"mousedown","keydown.enter","keydown.space","ngStyle","title","ngClass"]],template:function(n,s){1&n&&(o.j41(0,"button",0),o.nI1(1,"sanitizeHtml"),o.nI1(2,"async"),o.nI1(3,"async"),o.bIt("mousedown",function(a){return s.onTogglePopupMouseClick(a)})("keydown.enter",function(){return s.onTogglePopupKeydown()})("keydown.space",function(){return s.onTogglePopupKeydown()}),o.k0s(),o.DNE(4,DS,5,6,"div",1)),2&n&&(o.AVh("NgxEditor__MenuItem--Active",s.isActive||s.showPopup)("NgxEditor--Disabled",!s.canExecute),o.Y8G("disabled",!s.canExecute)("innerHTML",o.bMT(1,9,s.icon),o.npT)("title",o.bMT(2,11,s.title))("ariaLabel",o.bMT(3,13,s.title)),o.R7$(4),o.Y8G("ngIf",s.showPopup))},dependencies:[b.YU,b.Sq,b.bT,b.B3,b.Jj,yn],styles:['@charset "UTF-8";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color[_ngcontent-%COMP%]:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color);outline-offset:1px}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:"\\2714";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}']})}return i})();const DD=[["bold","italic"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"]],MD=["#b60205","#d93f0b","#fbca04","#0e8a16","#006b75","#1d76db","#0052cc","#5319e7","#e99695","#f9d0c4","#fef2c0","#c2e0c6","#bfdadc","#c5def5","#bfd4f2","#d4c5f9"];let LD=(()=>{class i{menuService;toolbar=DD;colorPresets=MD;disabled=!1;editor;customMenuRef=null;dropdownPlacement="bottom";toggleCommands=["bold","italic","underline","strike","code","blockquote","ordered_list","bullet_list","align_left","align_center","align_right","align_justify","superscript","subscript"];insertCommands=["horizontal_rule","format_clear","indent","outdent","undo","redo"];iconContainerClass=["NgxEditor__MenuItem","NgxEditor__MenuItem--IconContainer"];dropdownContainerClass=["NgxEditor__Dropdown"];seperatorClass=["NgxEditor__Seperator"];constructor(e){this.menuService=e}get presets(){const n=[];return this.colorPresets.forEach((s,r)=>{const a=Math.floor(r/8);n[a]||n.push([]),n[a].push(s)}),n}trackByIndex(e){return e}isDropDown(e){return!!e?.heading}getDropdownItems(e){return e}isLinkItem(e){return"link"===e||"object"==typeof e&&"object"==typeof e?.link}isLinkWithOptions(e){return"object"==typeof e&&"object"==typeof e?.link}getLinkOptions(e){return e?.link}ngOnInit(){if(!this.editor)throw new oa("Required editor instance to initialize menu component");this.menuService.editor=this.editor}static \u0275fac=function(n){return new(n||i)(o.rXU(ci))};static \u0275cmp=o.VBU({type:i,selectors:[["ngx-editor-menu"]],inputs:{toolbar:"toolbar",colorPresets:"colorPresets",disabled:"disabled",editor:"editor",customMenuRef:"customMenuRef",dropdownPlacement:"dropdownPlacement"},features:[o.Jv_([ci])],decls:3,vars:7,consts:[[1,"NgxEditor__MenuBar",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"toolbarItem","class",4,"ngIf"],[3,"class",4,"ngIf"],["type","text_color",3,"class","presets",4,"ngIf"],["type","background_color",3,"class","presets",4,"ngIf"],[3,"toolbarItem"],[3,"options"],[3,"class","group","items",4,"ngFor","ngForOf","ngForTrackBy"],[3,"group","items"],["type","text_color",3,"presets"],["type","background_color",3,"presets"],[3,"ngTemplateOutlet"]],template:function(n,s){1&n&&(o.j41(0,"div",0),o.DNE(1,zS,2,2,"ng-container",1)(2,HS,2,1,"ng-container",2),o.k0s()),2&n&&(o.Y8G("ngClass",o.l_i(4,MS,s.disabled,"top"===s.dropdownPlacement)),o.R7$(),o.Y8G("ngForOf",s.toolbar)("ngForTrackBy",s.trackByIndex),o.R7$(),o.Y8G("ngIf",s.customMenuRef))},dependencies:[b.YU,b.Sq,b.bT,b.T3,CD,TD,kD,wD,SD,AD,b.lG]})}return i})(),ED=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=o.$C({type:i});static \u0275inj=o.G2t({providers:[yn],imports:[b.MD,P.X1]})}return i})();const jr=new o.nKC("NgxEditorConfig"),dm={locals:ll,icons:lm};let FD=(()=>{class i{static forRoot(e=dm){return{ngModule:i,providers:[{provide:jr,useValue:e},{provide:cl,useFactory:cm,deps:[jr]}]}}static forChild(e=dm){return{ngModule:i,providers:[{provide:jr,useValue:e},{provide:cl,useFactory:cm,deps:[jr]},Vi]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=o.$C({type:i});static \u0275inj=o.G2t({imports:[b.MD,ED]})}return i})();const je=(i,t=!1)=>(e,n)=>{const s=new hi(i);return t?s.toggle()(e,n):s.apply()(e,n)};class PD{view;state;tr;constructor(t){if(!t)throw new oa("Required view to initialize commands.");this.view=t,this.state=t.state,this.tr=this.view.state.tr}applyTrx=t=>{this.state=this.state.apply(t??this.tr),this.tr=this.state.tr,this.tr.setMeta("APPLIED_TRX",!0)};dispatch=t=>{this.applyTrx(t)};exec(){if(!this.tr.getMeta("APPLIED_TRX"))return!1;const t=!this.view.state.doc.eq(this.state.doc);this.view.updateState(this.state);const e=this.tr.setMeta("FORCE_EMIT",t);return this.view.dispatch(e),!0}focus(t="end"){const e="start"===t?Y.atStart(this.state.doc):Y.atEnd(this.state.doc);return this.tr.setSelection(e),this.applyTrx(),this.view.focus(),this}scrollIntoView(){return this.tr.scrollIntoView(),this.applyTrx(),this}insertText(t){return this.tr.insertText(t),this.applyTrx(),this}insertNewLine(){return ms(Ep,Op,Ip,Ka)(this.state,this.dispatch),this}applyMark(t){return je(t,!1)(this.state,this.dispatch),this}toggleMark(t){return je(t,!0)(this.state,this.dispatch),this}bold(){return je("strong")(this.state,this.dispatch),this}toggleBold(){return je("strong",!0)(this.state,this.dispatch),this}italics(){return je("em")(this.state,this.dispatch),this}toggleItalics(){return je("em",!0)(this.state,this.dispatch),this}underline(){return je("u")(this.state,this.dispatch),this}toggleUnderline(){return je("u",!0)(this.state,this.dispatch),this}strike(){return je("s")(this.state,this.dispatch),this}toggleStrike(){return je("s",!0)(this.state,this.dispatch),this}code(){return je("code")(this.state,this.dispatch),this}toggleCode(){return je("code",!0)(this.state,this.dispatch),this}superscript(){return je("sup")(this.state,this.dispatch),this}subscript(){return je("sub")(this.state,this.dispatch),this}toggleOrderedList(){return new Xr(!1).toggle()(this.state,this.dispatch),this}toggleBulletList(){return new Xr(!0).toggle()(this.state,this.dispatch),this}toggleHeading(t){return new Ni(t).toggle()(this.state,this.dispatch),this}insertLink(t,e){return(new al).insert(t,e)(this.state,this.dispatch),this}updateLink(t){return(new al).update(t)(this.state,this.dispatch),this}insertImage(t,e={}){return(new im).insert(t,e)(this.state,this.dispatch),this}textColor(t){return new vn("text_color").apply({color:t})(this.state,this.dispatch),this}backgroundColor(t){return new vn("text_background_color").apply({backgroundColor:t})(this.state,this.dispatch),this}removeTextColor(){return new vn("text_color").remove()(this.state,this.dispatch),this}removeBackgroundColor(){return new vn("text_background_color").remove()(this.state,this.dispatch),this}align(t){return new fs(t).toggle()(this.state,this.dispatch),this}insertHTML(t){const{selection:e,schema:n,tr:s}=this.state,{from:r,to:a}=e,l=document.createElement("div");l.innerHTML=Jp(t)?t.trim():t;const c=Mi.fromSchema(n).parseSlice(l),h=s.replaceRange(r,a,c);return this.applyTrx(h),this}indent(){return new Yr("increase").insert()(this.state,this.dispatch),this}outdent(){return new Yr("decrease").insert()(this.state,this.dispatch),this}}const BD=typeof navigator<"u"&&/Mac/.test(navigator.platform),XD=i=>{const t=$w.concat(Rw,Bw);return t.push((i=>Xp(/(?:^|\s)(?:(\*\*|__)(?:([^*_]+))(\*\*|__))$/,i))(i.marks.strong)),t.push((i=>Xp(/(?:^|\s)(?:(\*|_)(?:([^*_]+))(\*|_))$/,i))(i.marks.em)),t.push((i=>el(/^\s*>\s$/,i))(i.nodes.blockquote)),t.push((i=>el(/^(?:\d+)\.\s$/,i,t=>({order:Number(t[1])}),(t,e)=>e.childCount+e.attrs.order===Number(t[1])))(i.nodes.ordered_list)),t.push((i=>el(/^\s*(?:[-+*])\s$/,i))(i.nodes.bullet_list)),t.push((i=>zp(/^```$/,i))(i.nodes.code_block)),t.push((i=>zp(new RegExp("^(#{1,6})\\s$"),i,e=>({level:e[1].length})))(i.nodes.heading)),function Pw({rules:i}){let t=new Tt({state:{init:()=>null,apply(e,n){return e.getMeta(this)||(e.selectionSet||e.docChanged?null:n)}},props:{handleTextInput:(e,n,s,r)=>Vp(e,n,s,r,i,t),handleDOMEvents:{compositionend:e=>{setTimeout(()=>{let{$cursor:n}=e.state.selection;n&&Vp(e,n.pos,n.pos,"",i,t)})}}},isInputRules:!0});return t}({rules:t})},WD=(i,t)=>{const e=[];return t.keyboardShortcuts&&e.push(...((i,t)=>{const e={};e["Mod-z"]=sl,BD?e["Shift-Mod-z"]=Hr:e["Mod-y"]=Hr;const n=[Gr({"Mod-b":xn(i.marks.strong),"Mod-i":xn(i.marks.em),"Mod-u":xn(i.marks.u),"Mod-`":xn(i.marks.code)}),Gr({Enter:kp(i.nodes.list_item),"Shift-Enter":ms(Fp,(s,r)=>{const{tr:a}=s;return r(a.replaceSelectionWith(i.nodes.hard_break.create()).scrollIntoView()),!0}),"Mod-[":wp(i.nodes.list_item),"Mod-]":Sp(i.nodes.list_item),Tab:Sp(i.nodes.list_item)}),Gr(Fw)];return t.history&&n.push(Gr(e)),n})(i,{history:t.history})),t.history&&e.push(function tS(i={}){return new Tt({key:jt,state:{init:()=>new ai(ft.empty,ft.empty,null,0,-1),apply:(t,e,n)=>function Jw(i,t,e,n){let r,s=e.getMeta(jt);if(s)return s.historyState;e.getMeta(qp)&&(i=new ai(i.done,i.undone,null,0,-1));let a=e.getMeta("appendedTransaction");if(0==e.steps.length)return i;if(a&&a.getMeta(jt))return a.getMeta(jt).redo?new ai(i.done.addTransform(e,void 0,n,Vr(t)),i.undone,Up(e.mapping.maps),i.prevTime,i.prevComposition):new ai(i.done,i.undone.addTransform(e,void 0,n,Vr(t)),null,i.prevTime,i.prevComposition);if(!1===e.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(r=e.getMeta("rebased"))?new ai(i.done.rebased(e,r),i.undone.rebased(e,r),il(i.prevRanges,e.mapping),i.prevTime,i.prevComposition):new ai(i.done.addMaps(e.mapping.maps),i.undone.addMaps(e.mapping.maps),il(i.prevRanges,e.mapping),i.prevTime,i.prevComposition);{let l=e.getMeta("composition"),c=0==i.prevTime||!a&&i.prevComposition!=l&&(i.prevTime<(e.time||0)-n.newGroupDelay||!function Zw(i,t){if(!t)return!1;if(!i.docChanged)return!0;let e=!1;return i.mapping.maps[0].forEach((n,s)=>{for(let r=0;r<t.length;r+=2)n<=t[r+1]&&s>=t[r]&&(e=!0)}),e}(e,i.prevRanges)),h=a?il(i.prevRanges,e.mapping):Up(e.mapping.maps);return new ai(i.done.addTransform(e,c?t.selection.getBookmark():void 0,n,Vr(t)),ft.empty,h,e.time,l??i.prevComposition)}}(e,n,t,i)},config:i={depth:i.depth||100,newGroupDelay:i.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(t,e){let n=e.inputType,s="historyUndo"==n?sl:"historyRedo"==n?Hr:null;return!!s&&(e.preventDefault(),s(t.state,t.dispatch))}}}})}()),t.inputRules&&e.push(XD(i)),e},pm={linkOnPaste:!0,resizeImage:!0},mm={content:null,history:!0,keyboardShortcuts:!0,inputRules:!0,schema:Rr,plugins:[],nodeViews:{},attributes:{},features:pm,handleScrollToSelection:null,linkValidationPattern:"(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#\n\r]*)?#?([^\n\r]*)|(mailto:.*[@].*)"};class jD{options;view;constructor(t=mm){this.options={...mm,...t},this.createEditor()}valueChangesSubject=new oe.B;updateSubject=new oe.B;get valueChanges(){return this.valueChangesSubject.asObservable()}get update(){return this.updateSubject.asObservable()}get schema(){return this.options.schema||Rr}get linkValidationPattern(){return this.options.linkValidationPattern}get commands(){return new PD(this.view)}get features(){return{...pm,...this.options.features}}handleTransactions(t){const e=this.view.state.apply(t);if(this.view.updateState(e),this.updateSubject.next(this.view),!t.docChanged&&!t.getMeta("FORCE_EMIT"))return;const n=e.doc.toJSON();this.valueChangesSubject.next(n)}createEditor(){const{options:t,schema:e}=this,{content:n=null,nodeViews:s}=t,{history:r=!0,keyboardShortcuts:a=!0,inputRules:l=!0}=t,c=gs(n,e,t.parseOptions),h=t.plugins??[],d=t.attributes??{},u=WD(e,{history:r,keyboardShortcuts:a,inputRules:l});this.view=new Uk(null,{state:dn.create({doc:c,schema:e,plugins:[...u,...h]}),nodeViews:s,dispatchTransaction:this.handleTransactions.bind(this),attributes:d,handleScrollToSelection:t.handleScrollToSelection})}setContent(t){if(typeof(i=t)>"u"||null===i)return;var i;const{state:e}=this.view,{tr:n,doc:s}=e,r=gs(t,this.schema,this.options.parseOptions);n.replaceWith(0,e.doc.content.size,r),!s.eq(n.doc)&&n.docChanged&&this.view.dispatch(n)}registerPlugin(t){const{state:e}=this.view,n=[...e.plugins,t],s=e.reconfigure({plugins:n});this.view.updateState(s)}destroy(){this.view.destroy()}}var UD=S(8177),QD=S(9327),_t=S(9079),gm=S(3767),hl=S(7703),qD=S(9213),KD=S(5911),dl=S(882);const JD=["*"],ZD=()=>[".."],eM=i=>[i];function tM(i,t){if(1&i&&(o.j41(0,"div",19),o.nrm(1,"div",20),o.j41(2,"div",21)(3,"h5"),o.EFF(4),o.k0s(),o.j41(5,"span"),o.EFF(6),o.k0s()()()),2&i){const e=t.ngIf;o.R7$(4),o.JRh(e.name),o.R7$(2),o.JRh(e.email)}}function iM(i,t){if(1&i){const e=o.RV6();o.j41(0,"mat-list-item",22),o.bIt("click",function(){o.eBV(e);const s=o.XpG();return o.Njj(s.handleOpen())}),o.j41(1,"mat-icon",2),o.nrm(2,"lucide-icon",23),o.k0s(),o.j41(3,"p",24),o.EFF(4),o.k0s()()}if(2&i){const e=t.$implicit;o.Y8G("routerLink",o.eq3(2,eM,e.url)),o.R7$(4),o.SpI(" ",e.title," ")}}let nM=(()=>{class i{sidenavMode="side";isOpen=!0;navigations=[{title:"Dashboard",url:"dashboard"},{title:"My task",url:"my-task"}];services={breakPoint:(0,o.WQX)(QD.QP),authServices:(0,o.WQX)(gm.u),notification:(0,o.WQX)(hl.I),destryoRef:(0,o.WQX)(o.abz),router:(0,o.WQX)(ae.Ix)};user$=this.services.authServices.getUserSignedin();ngOnInit(){const{breakPoint:e,destryoRef:n}=this.services;e.observe(["(min-width: 768px)"]).pipe((0,_t.pQ)(n)).subscribe(s=>{s.matches?(this.isOpen=!0,this.sidenavMode="side"):(this.isOpen=!1,this.sidenavMode="push")})}handleOpen(){"push"===this.sidenavMode&&(this.isOpen=!this.isOpen)}logout(){const{authServices:e,destryoRef:n,notification:s,router:r}=this.services;e.deleteLogout().pipe((0,_t.pQ)(n)).subscribe(()=>{s.addSuccess("Logout success, see you again"),r.navigateByUrl("/")})}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=o.VBU({type:i,selectors:[["app-side-nav"]],ngContentSelectors:JD,decls:27,vars:7,consts:[[1,"mat-elevation-z3","relative","z-50","px-2","md:px-4"],["mat-mini-fab","",3,"click"],["matListItemIcon",""],["name","menu",1,"text-natural-one"],[1,"h-[calc(100vh-64px)]","md:h-full","relative"],[3,"opened","mode"],["role","link",1,"w-11/12","my-8","bg-black","rounded-sm","mx-auto","md:rounded-md","cursor-pointer",3,"routerLink"],[1,"text-natural-one","px-2","py-4","text-center","md:text-left","md:py-1"],["class","flex md:flex-col gap-2 px-2 mx-8",4,"ngIf"],[1,"flex","my-8","text-left","flex-col","gap-8"],["role","link","routerLinkActive","active",1,"mb-4","hover:bg-primary-three/60","hover:rounded-xl",3,"routerLink"],[1,"absolute","inset-x-0","bottom-2","px-2"],[1,"mb-4"],[1,"mt-4","mb-8"],["href","https://www.linkedin.com/in/dewa-surya/","target","_blank","mat-button","",1,""],["name","move-right",1,"inline-block","ml-2"],[1,"flex","gap-1","my-2"],["mat-flat-button","",3,"click"],[1,"mx-1"],[1,"flex","md:flex-col","gap-2","px-2","mx-8"],[1,"bg-natural-three","w-[50px]","h-[50px]","md:w-[150px]","md:h-[150px]","rounded-lg","md:self-center"],[1,"col-span-2","items-center"],["role","link","routerLinkActive","active",1,"mb-4","hover:bg-primary-three/60","hover:rounded-xl",3,"click","routerLink"],["name","square-arrow-right",1,"text-text"],["matListItemTitle","",1,""]],template:function(n,s){1&n&&(o.NAR(),o.j41(0,"mat-toolbar",0)(1,"button",1),o.bIt("click",function(){return s.handleOpen()}),o.j41(2,"mat-icon",2),o.nrm(3,"lucide-icon",3),o.k0s()()(),o.j41(4,"mat-sidenav-container",4)(5,"mat-sidenav",5)(6,"div",6)(7,"h5",7),o.EFF(8," Productive TODO . "),o.k0s()(),o.DNE(9,tM,7,2,"div",8),o.nI1(10,"async"),o.j41(11,"div",9)(12,"mat-list"),o.Z7z(13,iM,5,4,"mat-list-item",10,o.Vm6),o.k0s()(),o.j41(15,"div",11),o.nrm(16,"hr",12),o.j41(17,"div",13)(18,"a",14),o.EFF(19," Dewa Surya Ariesta "),o.nrm(20,"lucide-icon",15),o.k0s()(),o.j41(21,"div",16)(22,"button",17),o.bIt("click",function(){return s.logout()}),o.EFF(23," Logout "),o.k0s()()()(),o.j41(24,"mat-sidenav-content")(25,"main",18),o.SdG(26),o.k0s()()()),2&n&&(o.R7$(5),o.Y8G("opened",s.isOpen)("mode",s.sidenavMode),o.R7$(),o.Y8G("routerLink",o.lJ4(6,ZD)),o.R7$(3),o.Y8G("ngIf",o.bMT(10,4,s.user$)),o.R7$(4),o.Dyx(s.navigations))},dependencies:[b.bT,ae.Wk,ae.wQ,Rt.$z,Rt.It,Rt.$0,qD.An,zt.WGl,KD.KQ,dl.LG,dl.US,dl.El,Ci.jt,Ci.YE,Ci.ZV,Ci.yE,b.Jj],styles:["[_nghost-%COMP%]{--mat-sidenav-container-divider-color: var(--natural-three);--mat-sidenav-container-width: 100vw }.active[_ngcontent-%COMP%]{background-color:var(--primary-two)}svg[_ngcontent-%COMP%]{color:var(--primary-three)}@media (min-width: 768px){[_nghost-%COMP%]{--mat-sidenav-container-width: 250px}mat-toolbar[_ngcontent-%COMP%]{display:none}}"]})}return i})(),sM=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=o.VBU({type:i,selectors:[["app-home-todo"]],decls:2,vars:0,template:function(n,s){1&n&&(o.j41(0,"app-side-nav"),o.nrm(1,"router-outlet"),o.k0s())},dependencies:[ae.n3,nM]})}return i})();var rM=S(1562),oM=S(5312),Me=S(6354),Ur=S(8141);let xs=(()=>{class i{endpoint=`${oM.c.domain}/todo`;prevQurtal="";prevCelenderData=[];services={httpClient:(0,o.WQX)(rM.Qq)};getAllTodo(e){return this.services.httpClient.get(this.endpoint,{params:{title:e.title||"",from:e.from||"",to:e.to||"",is_completed:e.is_completed||"",limit:e.limit||"",priority:e.priority||"",page:e.page||""}})}postNewTodo(e){return this.services.httpClient.post(this.endpoint,e).pipe((0,Me.T)(n=>n.data))}getTodoById(e){return this.services.httpClient.get(`${this.endpoint}/${e}`).pipe((0,Me.T)(n=>n.data))}putTodo(e,n){return this.services.httpClient.put(`${this.endpoint}/${n}`,e).pipe((0,Me.T)(s=>s.data))}deleteTodo(e){return this.services.httpClient.delete(`${this.endpoint}/${e}`).pipe((0,Me.T)(()=>e))}completeTodo(e,n){return this.services.httpClient.put(`${this.endpoint}/toggle-completion/${n}`,e).pipe((0,Me.T)(s=>s.data))}getTodoHeatMap(e){return e.cuartel===this.prevQurtal?(0,en.of)(this.prevCelenderData):(e.cuartel&&(this.prevQurtal=e.cuartel),this.services.httpClient.get(`${this.endpoint}/todo-heatmap`,{params:{cuartel:e.cuartel||"Q1",year:e.year||(new Date).getFullYear().toString()}}).pipe((0,Ur.M)(n=>this.prevCelenderData=n)))}static \u0275fac=function(n){return new(n||i)};static \u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Qr=S(4412),fm=S(980);let _m=(()=>{class i{heatMapData$=new Qr.t([]);isFetching$=new Qr.t(!1);currectCuartal$=new Qr.t("Q1");currentDate=new Date;services={todoServices:(0,o.WQX)(xs),activatedRoute:(0,o.WQX)(ae.nX),destroyRef:(0,o.WQX)(o.abz)};constructor(){const{todoServices:e,activatedRoute:n,destroyRef:s}=this.services;n.queryParamMap.pipe((0,_t.pQ)(s)).pipe((0,Me.T)(r=>{let a=r.get("cuartel");return a||(a=this.getCuartel()),a})).pipe((0,qt.n)(r=>{const a=this.currentDate.getFullYear().toString();return this.currectCuartal$.next(r),this.isFetching$.next(!0),e.getTodoHeatMap({year:a,cuartel:r}).pipe((0,fm.j)(()=>this.isFetching$.next(!1)))})).subscribe(r=>{this.heatMapData$.next(r)})}getCuartel(){const e=(new Date).getMonth();return e<=3?"Q1":e<=6?"Q2":e<=9?"Q3":"Q4"}static \u0275fac=function(n){return new(n||i)};static \u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const aM=(i,t)=>({width:i,height:t});function lM(i,t){if(1&i&&o.nrm(0,"div",0),2&i){const e=o.XpG();o.Y8G("ngStyle",o.l_i(1,aM,e.view[0]+"px",e.view[1]+"px"))}}function cM(i,t){if(1&i&&(o.j41(0,"div"),o.nrm(1,"ngx-charts-heat-map",2),o.k0s()),2&i){const e=t.ngIf,n=o.XpG(2);o.R7$(),o.Y8G("view",n.view)("results",e)("xAxis",n.showXAxis)("yAxis",n.showYAxis)("gradient",n.gradient)("xAxisLabel",n.xAxisLabel)("yAxisLabel",n.yAxisLabel)}}function hM(i,t){if(1&i&&(o.DNE(0,cM,2,7,"div",1),o.nI1(1,"async")),2&i){const e=o.XpG();o.Y8G("ngIf",o.bMT(1,1,e.calenderData$))}}let dM=(()=>{class i{view=[1400,400];showXAxis=!0;showYAxis=!0;gradient=!0;xAxisLabel="Week";yAxisLabel="Day";services={todoHeatMap:(0,o.WQX)(_m)};calenderData$=this.services.todoHeatMap.heatMapData$;isFetching$=this.services.todoHeatMap.isFetching$;static \u0275fac=function(n){return new(n||i)};static \u0275cmp=o.VBU({type:i,selectors:[["app-todo-heat-map"]],decls:3,vars:3,consts:[[1,"shimmer","rounded-xl",3,"ngStyle"],[4,"ngIf"],[3,"view","results","xAxis","yAxis","gradient","xAxisLabel","yAxisLabel"]],template:function(n,s){1&n&&(o.DNE(0,lM,1,4,"div",0),o.nI1(1,"async"),o.DNE(2,hM,2,3,"div")),2&n&&o.vxM(o.bMT(1,1,s.isFetching$)?0:2)},dependencies:[b.bT,b.B3,Qb,b.Jj],styles:["[_nghost-%COMP%]{margin:0;padding:0}"]})}return i})();const uM=()=>({cuartel:"Q1"}),pM=()=>({cuartel:"Q2"}),mM=()=>({cuartel:"Q3"}),gM=()=>({cuartel:"Q4"});function fM(i,t){1&i&&(o.j41(0,"ul",1)(1,"li"),o.nrm(2,"div",3),o.k0s(),o.j41(3,"li"),o.nrm(4,"div",3),o.k0s(),o.j41(5,"li"),o.nrm(6,"div",3),o.k0s(),o.j41(7,"li"),o.nrm(8,"div",3),o.k0s()())}function _M(i,t){if(1&i&&(o.j41(0,"mat-list",2)(1,"mat-list-item",4)(2,"a",5),o.EFF(3," January - March "),o.k0s()(),o.j41(4,"mat-list-item",6)(5,"a",5),o.EFF(6," April - July "),o.k0s()(),o.j41(7,"mat-list-item",6)(8,"a",5),o.EFF(9," July - September "),o.k0s()(),o.j41(10,"mat-list-item",6)(11,"a",5),o.EFF(12," October - December "),o.k0s()()()),2&i){const e=o.XpG();o.R7$(2),o.Y8G("queryParams",o.lJ4(8,uM))("disabled","Q1"===e.currentCuartal),o.R7$(3),o.Y8G("queryParams",o.lJ4(9,pM))("disabled","Q2"===e.currentCuartal),o.R7$(3),o.Y8G("queryParams",o.lJ4(10,mM))("disabled","Q3"===e.currentCuartal),o.R7$(3),o.Y8G("queryParams",o.lJ4(11,gM))("disabled","Q4"===e.currentCuartal)}}let xM=(()=>{class i{currentCuartal;services={heatMapServices:(0,o.WQX)(_m),destroyRef:(0,o.WQX)(o.abz)};constructor(){const{heatMapServices:e,destroyRef:n}=this.services;e.currectCuartal$.pipe((0,_t.pQ)(n)).subscribe(s=>this.currentCuartal=s)}isFeatching$=this.services.heatMapServices.isFetching$;static \u0275fac=function(n){return new(n||i)};static \u0275cmp=o.VBU({type:i,selectors:[["app-todo-heat-map-filter"]],decls:5,vars:3,consts:[[1,"text-center","inline-block"],[1,"flex","flex-col","gap-2","w-full","max-w-[250px]","px-2","my-4"],["role","list"],[1,"shimmer","h-[30px]","w-full"],["role","listitem",1,"w-min"],["routerLink",".","mat-stroked-button","",1,"filter-button",3,"queryParams","disabled"],["role","listitem",1,"w-max"]],template:function(n,s){1&n&&(o.j41(0,"h5",0),o.EFF(1," Filter By Month's\n"),o.k0s(),o.DNE(2,fM,9,0,"ul",1),o.nI1(3,"async"),o.DNE(4,_M,13,12,"mat-list",2)),2&n&&(o.R7$(2),o.vxM(o.bMT(3,1,s.isFeatching$)?2:4))},dependencies:[ae.Wk,Ci.jt,Ci.YE,Rt.It,b.Jj],styles:[".filter-button[disabled=true][_ngcontent-%COMP%]{background-color:var(--primary-two)}"]})}return i})(),ul=(()=>{class i{todoData$;todoOutput$;services={todoServices:(0,o.WQX)(xs),notification:(0,o.WQX)(hl.I)};constructor(){const{todoServices:e,notification:n}=this.services;this.todoData$=new oe.B,this.todoOutput$=this.todoData$.pipe((0,qt.n)(s=>{switch(s.type){case"add":return e.postNewTodo(s.todo).pipe((0,Ur.M)(()=>n.addSuccess("Create Todo")),(0,Me.T)(r=>({todo:r,type:"add"})));case"update":return e.putTodo(s.todo,s.todo.id).pipe((0,Me.T)(r=>({todo:r,type:"add"})));case"toggle":return e.completeTodo(s.todo,s.todo.id).pipe((0,Me.T)(r=>({todo:r,type:"add"})));default:return e.deleteTodo(s.todo.id).pipe((0,Ur.M)(()=>n.addSuccess("Deleted")),(0,Me.T)(r=>({id:r,type:"refresh"})))}}))}createTodo(){this.todoData$.next({todo:{id:-1*this.randoId(),description:"",is_completed:!1,priority:"NORMAL",title:"new Todo"},type:"add"})}updateTodo(e){this.todoData$.next({todo:e,type:"update"})}deleteTodo(e){this.todoData$.next({todo:e,type:"remove"})}togleComplitionTodo(e){this.todoData$.next({todo:e,type:"toggle"})}randoId(){return Math.round(1e4*Math.random())}todoMapper(e){return{description:e.description,id:e.id,is_completed:e.is_completed,priority:e.priority,title:e.title}}static \u0275fac=function(n){return new(n||i)};static \u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var vM=S(2771),yM=S(2816),bM=S(6648);let xm=(()=>{class i{todoData$;todoDataStore$;isFetching$=new Qr.t(!1);metaData=null;services={destroyRef:(0,o.WQX)(o.abz),todoServices:(0,o.WQX)(xs),activatedRouter:(0,o.WQX)(ae.nX),todoItem:(0,o.WQX)(ul)};constructor(){const{todoItem:e,destroyRef:n}=this.services;this.todoData$=new vM.m,this.todoDataStore$=this.todoData$.pipe((0,nt.p)(s=>null!==s),(0,yM.S)((s,r)=>{switch(r.type){case"add":{const a=s.findIndex(l=>l.id===r.id);return-1!==a?[...s.slice(0,a),r.todo,...s.slice(a+1)]:[r.todo,...s]}case"remove":return s.filter(a=>a.id!==r.id);default:return[]}},[]),(0,Me.T)(s=>s.length<=10?s:s.slice(0,10))),this.setUpQueryData(),e.todoOutput$.pipe((0,_t.pQ)(n)).subscribe(s=>{switch(s.type){case"add":this.todoData$.next({type:"add",todo:s.todo});break;case"refresh":this.todoData$.next({type:"remove",id:s.id});break;default:this.setUpQueryData()}})}setUpQueryData(){const{todoServices:e,destroyRef:n,activatedRouter:s}=this.services;s.queryParamMap.pipe((0,_t.pQ)(n),(0,Me.T)(r=>{let a=r.get("title")||void 0,l=r.get("from")||void 0,c=r.get("to")||void 0,h=r.get("is_completed")||void 0,d=r.get("limit")||void 0;return{title:a,from:l,to:c,is_completed:h,priority:r.get("priority")||void 0,limit:d,page:r.get("page")||void 0}}),(0,qt.n)(r=>(this.isFetching$.next(!0),this.todoData$.next({type:"clear"}),e.getAllTodo(r).pipe((0,Ur.M)(a=>this.metaData=a.meta),(0,fm.j)(()=>this.isFetching$.next(!1))))),(0,qt.n)(r=>(0,bM.H)(r.data.reverse()))).subscribe(r=>{this.todoData$.next({type:"add",todo:r})})}static \u0275fac=function(n){return new(n||i)};static \u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),pl=(()=>{class i{set appProprity(e){this.setTailwindClassesBasedOnPriority(e)}services={el:(0,o.WQX)(o.aKT),renderer:(0,o.WQX)(o.sFG)};setTailwindClassesBasedOnPriority(e){const{el:n,renderer:s}=this.services;switch(s.addClass(n.nativeElement,"text-slate-700"),s.addClass(n.nativeElement,"extra-small"),s.addClass(n.nativeElement,"hover:brightness-50"),s.addClass(n.nativeElement,"duration-300"),s.addClass(n.nativeElement,"ease-in-out"),s.addClass(n.nativeElement,"shadow-2xl"),e){case"HIGHT":s.addClass(n.nativeElement,"bg-priority-one/70");break;case"MID":s.addClass(n.nativeElement,"bg-priority-two/70");break;case"LOW":s.addClass(n.nativeElement,"bg-priority-three/70");break;default:s.addClass(n.nativeElement,"border"),s.addClass(n.nativeElement,"border-text/10"),s.addClass(n.nativeElement,"bg-slate-700/10")}}static \u0275fac=function(n){return new(n||i)};static \u0275dir=o.FsC({type:i,selectors:[["","appProprity",""]],inputs:{appProprity:"appProprity"}})}return i})();const CM=()=>[0,1,2,3,4,5,6,7,8,9],TM=(i,t)=>({"bg-black/90 ":i,"bg-gray-500/90":t}),kM=i=>({"line-through":i}),wM=i=>["/todo",i];function SM(i,t){1&i&&(o.j41(0,"li"),o.nrm(1,"div",1),o.k0s())}function AM(i,t){1&i&&(o.j41(0,"ul"),o.Z7z(1,SM,2,0,"li",null,o.Vm6),o.k0s()),2&i&&(o.R7$(),o.Dyx(o.lJ4(0,CM)))}function DM(i,t){if(1&i){const e=o.RV6();o.j41(0,"li",4)(1,"div",5),o.nrm(2,"span",6),o.k0s(),o.j41(3,"div",7)(4,"p",8),o.EFF(5),o.k0s(),o.j41(6,"div",9)(7,"div",10),o.EFF(8),o.k0s(),o.j41(9,"div",11),o.EFF(10),o.nI1(11,"date"),o.k0s()()(),o.j41(12,"mat-menu",12,0)(14,"a",13),o.EFF(15," Edit "),o.k0s(),o.j41(16,"button",14),o.bIt("click",function(){const s=o.eBV(e).$implicit,r=o.XpG(4);return o.Njj(r.handleDeleteTodo(s))}),o.EFF(17," Delete "),o.k0s()()()}if(2&i){const e=t.$implicit,n=o.sdS(13);o.R7$(2),o.Y8G("ngClass",o.l_i(10,TM,e.is_completed,!e.is_completed)),o.R7$(),o.Y8G("matMenuTriggerFor",n),o.R7$(),o.Y8G("ngClass",o.eq3(13,kM,e.is_completed)),o.R7$(),o.JRh(e.title),o.R7$(2),o.Y8G("appProprity",e.priority),o.R7$(),o.JRh(e.priority),o.R7$(2),o.JRh(o.bMT(11,8,e.created_at)),o.R7$(4),o.Y8G("routerLink",o.eq3(15,wM,e.id))}}function MM(i,t){if(1&i&&(o.j41(0,"ul"),o.Z7z(1,DM,18,17,"li",4,o.Vm6),o.k0s()),2&i){const e=o.XpG().ngIf;o.R7$(),o.Dyx(e)}}function LM(i,t){if(1&i){const e=o.RV6();o.j41(0,"div",3)(1,"div",15)(2,"h4",16),o.EFF(3," Opss.. ! Todo not found "),o.k0s(),o.nrm(4,"hr",17),o.j41(5,"p",18),o.EFF(6," Plase Create The todo first "),o.k0s(),o.j41(7,"div",19)(8,"button",20),o.bIt("click",function(){o.eBV(e);const s=o.XpG(3);return o.Njj(s.handCreateNewTodo())}),o.EFF(9," Create New Todo "),o.k0s()()()()}}function EM(i,t){if(1&i&&(o.j41(0,"article"),o.DNE(1,MM,3,0,"ul")(2,LM,10,0,"div",3),o.k0s()),2&i){const e=t.ngIf;o.R7$(),o.vxM(e.length?1:2)}}function FM(i,t){if(1&i&&(o.DNE(0,EM,3,1,"article",2),o.nI1(1,"async")),2&i){const e=o.XpG();o.Y8G("ngIf",o.bMT(1,1,e.todoItems$))}}let vm=(()=>{class i{todoItems$;isFetching;services={todoStore:(0,o.WQX)(xm),todoItem:(0,o.WQX)(ul),router:(0,o.WQX)(ae.Ix)};constructor(){const{todoStore:e}=this.services;this.todoItems$=e.todoDataStore$,this.isFetching=e.isFetching$}handleDeleteTodo(e){const{todoItem:n}=this.services;n.deleteTodo(n.todoMapper(e))}handTogleCompletion(e){const{todoItem:n}=this.services;n.togleComplitionTodo(n.todoMapper(e))}handCreateNewTodo(){const{todoItem:e,router:n}=this.services;e.createTodo(),n.navigate([],{queryParams:{}})}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=o.VBU({type:i,selectors:[["app-todo-container"]],decls:3,vars:3,consts:[["beforeMenu","matMenu"],[1,"shimmer","h-[40px]","my-4"],[4,"ngIf"],[1,"min-h-[300px]","flex","justify-center","items-center"],[1,"my-2","border","border-text/10","rounded-md","p-2","relative"],[1,"absolute","left-2","top-1/2","-translate-y-1/2","cursor-pointer"],[1,"block","w-[15px]","h-[15px]","hover:brightness-50","duration-200",3,"ngClass"],[1,"flex","justify-between","flex-col","xl:flex-row","ml-8","py-1","px-2","cursor-pointer","rounded-xl","hover:bg-primary-one/50","duration-300","ease-out",3,"matMenuTriggerFor"],[1,"w-5/6",3,"ngClass"],[1,"flex","justify-between","gap-2","xl:w-1/6","extra-small"],[1,"py-1","px-2","rounded-2xl","flex","items-center","justify-center",3,"appProprity"],[1,"text-text/60"],["xPosition","before"],["target","_blank","mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],[1,"w-2/3","h-1/2","max-w-[600px]","py-8","px-4","bg-natural-three/50","border","shadow-xl","rounded-xl"],[1,"text-text"],[1,"h-1","bg-text/70"],[1,"py-4","text-text/90"],[1,"flex","justify-end","mt-8"],["mat-flat-button","",3,"click"]],template:function(n,s){1&n&&(o.DNE(0,AM,3,1,"ul"),o.nI1(1,"async"),o.DNE(2,FM,2,3,"article")),2&n&&o.vxM(o.bMT(1,1,s.isFetching)?0:2)},dependencies:[b.YU,b.bT,ae.Wk,Rt.$z,Un,or,N1,pl,b.Jj,b.vh],styles:["[_nghost-%COMP%]{--mat-menu-container-color: red}.mat-mdc-menu-panel[_ngcontent-%COMP%]{width:300px!important}"]})}return i})();const ml=()=>["."],OM=()=>({is_completed:""}),IM=()=>({is_completed:!0}),PM=()=>({is_completed:!1});let ym=(()=>{class i{currentRoute="";services={activeRotue:(0,o.WQX)(ae.nX),destroyRef:(0,o.WQX)(o.abz)};ngOnInit(){const{activeRotue:e,destroyRef:n}=this.services;e.queryParamMap.pipe((0,_t.pQ)(n),(0,Me.T)(s=>s.get("is_completed")||"")).subscribe(s=>this.currentRoute=s)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=o.VBU({type:i,selectors:[["app-todo-completed-filter"]],decls:10,vars:15,consts:[[1,"flex","gap-1","flex-wrap"],["mat-raised-button","",3,"routerLink","queryParams","disabled"]],template:function(n,s){1&n&&(o.j41(0,"ul",0)(1,"li")(2,"a",1),o.EFF(3," All "),o.k0s()(),o.j41(4,"li")(5,"a",1),o.EFF(6," Complited "),o.k0s()(),o.j41(7,"li")(8,"a",1),o.EFF(9," Not Complited "),o.k0s()()()),2&n&&(o.R7$(2),o.Y8G("routerLink",o.lJ4(9,ml))("queryParams",o.lJ4(10,OM))("disabled",""===s.currentRoute),o.R7$(3),o.Y8G("routerLink",o.lJ4(11,ml))("queryParams",o.lJ4(12,IM))("disabled","true"===s.currentRoute),o.R7$(3),o.Y8G("routerLink",o.lJ4(13,ml))("queryParams",o.lJ4(14,PM))("disabled","false"===s.currentRoute))},dependencies:[ae.Wk,Rt.It]})}return i})();const vs=()=>["."],BM=()=>({priority:""}),ys=i=>({"bg-gray-500/50 hover:brightness-100":i}),RM=()=>({priority:"LOW"}),NM=()=>({priority:"NORMAL"}),VM=()=>({priority:"MID"}),zM=()=>({priority:"HIGHT"});let bm=(()=>{class i{currentRoute="";services={activeRotue:(0,o.WQX)(ae.nX),destroyRef:(0,o.WQX)(o.abz)};ngOnInit(){const{activeRotue:e,destroyRef:n}=this.services;e.queryParamMap.pipe((0,_t.pQ)(n),(0,Me.T)(s=>s.get("priority")||"")).subscribe(s=>this.currentRoute=s)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=o.VBU({type:i,selectors:[["app-todo-priority-filter"]],decls:16,vars:39,consts:[[1,"flex","gap-1","flex-wrap"],[1,"priority-filter","extra-small","hover:brightness-50","ease-in-out","duration-300","shadow-2xl",3,"routerLink","queryParams","ngClass"],[1,"priority-filter",3,"routerLink","queryParams","appProprity","ngClass"]],template:function(n,s){1&n&&(o.j41(0,"ul",0)(1,"li")(2,"a",1),o.EFF(3," All "),o.k0s()(),o.j41(4,"li")(5,"a",2),o.EFF(6," LOW "),o.k0s()(),o.j41(7,"li")(8,"a",2),o.EFF(9," NORMAL "),o.k0s()(),o.j41(10,"li")(11,"a",2),o.EFF(12," MID "),o.k0s()(),o.j41(13,"li")(14,"a",2),o.EFF(15," HIGHT "),o.k0s()()()),2&n&&(o.R7$(2),o.Y8G("routerLink",o.lJ4(19,vs))("queryParams",o.lJ4(20,BM))("ngClass",o.eq3(21,ys,""===s.currentRoute)),o.R7$(3),o.Y8G("routerLink",o.lJ4(23,vs))("queryParams",o.lJ4(24,RM))("appProprity","LOW")("ngClass",o.eq3(25,ys,"LOW"===s.currentRoute)),o.R7$(3),o.Y8G("routerLink",o.lJ4(27,vs))("queryParams",o.lJ4(28,NM))("appProprity","NORMAL")("ngClass",o.eq3(29,ys,"NORMAL"===s.currentRoute)),o.R7$(3),o.Y8G("routerLink",o.lJ4(31,vs))("queryParams",o.lJ4(32,VM))("appProprity","MID")("ngClass",o.eq3(33,ys,"MID"===s.currentRoute)),o.R7$(3),o.Y8G("routerLink",o.lJ4(35,vs))("queryParams",o.lJ4(36,zM))("appProprity","HIGHT")("ngClass",o.eq3(37,ys,"HIGHT"===s.currentRoute)))},dependencies:[b.YU,ae.Wk,pl],styles:[".priority-filter[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);padding:.5rem 1rem;border-radius:1rem;display:flex;align-items:center;justify-content:center}"]})}return i})(),HM=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=o.VBU({type:i,selectors:[["app-dashboard"]],decls:25,vars:0,consts:[[1,"w-full","py-8"],[1,"mx-12","my-8"],[1,"grid","2xl:grid-cols-12"],[1,"overflow-x-scroll","2xl:overflow-x-hidden","slider-container","2xl:col-span-10","py-2","my-8"],[1,"2xl:col-span-2"],[1,"w-full","p-4","min-h-[600px]"],[1,"py-8"],[1,"flex","flex-wrap","gap-x-4","gap-y-2","py-8"],[1,"my-4"],[1,"bold","block","mb-4"],["role","link","routerLink","/todo/my-task","mat-raised-button",""]],template:function(n,s){1&n&&(o.j41(0,"section",0)(1,"h2",1),o.EFF(2,"100 Day's Productivity"),o.k0s(),o.j41(3,"div",2)(4,"div",3),o.nrm(5,"app-todo-heat-map"),o.k0s(),o.j41(6,"div",4),o.nrm(7,"app-todo-heat-map-filter"),o.k0s()()(),o.j41(8,"section",5)(9,"h2",6),o.EFF(10,"My Task"),o.k0s(),o.j41(11,"div",7)(12,"div",8)(13,"h5",9),o.EFF(14," Completed "),o.k0s(),o.nrm(15,"app-todo-completed-filter"),o.k0s(),o.j41(16,"div",8)(17,"h5",9),o.EFF(18," Priority "),o.k0s(),o.nrm(19,"app-todo-priority-filter"),o.k0s()(),o.j41(20,"div",6),o.nrm(21,"app-todo-container"),o.k0s(),o.j41(22,"div",6)(23,"button",10),o.EFF(24," More Task "),o.k0s()()())},dependencies:[ae.Wk,Rt.$z,dM,xM,vm,ym,bm]})}return i})(),$M=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=o.VBU({type:i,selectors:[["app-my-calender"]],decls:2,vars:0,template:function(n,s){1&n&&(o.j41(0,"p"),o.EFF(1,"my-calender works!"),o.k0s())}})}return i})();const gl=()=>["."],fl=i=>({page:i}),GM=(i,t)=>({"bg-primary-two/90 text-text/60":i,"hover:bg-primary-one/50 text-text/60":t});function XM(i,t){if(1&i&&(o.j41(0,"li")(1,"button",6),o.EFF(2),o.k0s()()),2&i){const e=t.$implicit,n=o.XpG();o.R7$(),o.Y8G("routerLink",o.lJ4(5,gl))("queryParams",o.eq3(6,fl,n.getPageNumber(e.url)))("disabled",null===e.url||e.active)("ngClass",o.l_i(8,GM,e.active,null!==e.url)),o.R7$(),o.SpI(" ",e.label," ")}}let YM=(()=>{class i{metaData;set setLinks(e){this.metaData=e}getPageNumber(e){return null===e?"":e.split("=")[1]}get prevLinks(){return this.metaData.links[0]}get nextLink(){return this.metaData.links[this.metaData.links.length-1]}get links(){return this.metaData.links.slice(1,this.metaData.links.length-1)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=o.VBU({type:i,selectors:[["app-paginator"]],inputs:{setLinks:"setLinks"},decls:8,vars:12,consts:[[1,"relative","px-8"],[1,"absolute","left-0","top-1/2","-translate-y-1/2","disabled:text-text/60",3,"routerLink","queryParams","disabled"],["name","chevrons-left"],[1,"flex-1","flex","justify-between","mx-1","items-center"],[1,"absolute","right-0","top-1/2","-translate-y-1/2","disabled:text-text/60",3,"routerLink","queryParams","disabled"],["name","chevrons-right"],[1,"py-2","px-4","rounded-lg","hover:bg-primary-one/50","duration-300","ease-in-out",3,"routerLink","queryParams","disabled","ngClass"]],template:function(n,s){1&n&&(o.j41(0,"div",0)(1,"button",1),o.nrm(2,"lucide-icon",2),o.k0s(),o.j41(3,"ul",3),o.Z7z(4,XM,3,11,"li",null,o.Vm6),o.k0s(),o.j41(6,"button",4),o.nrm(7,"lucide-icon",5),o.k0s()()),2&n&&(o.R7$(),o.Y8G("routerLink",o.lJ4(6,gl))("queryParams",o.eq3(7,fl,s.getPageNumber(s.prevLinks.url)))("disabled",null===s.prevLinks.url),o.R7$(3),o.Dyx(s.links),o.R7$(2),o.Y8G("routerLink",o.lJ4(9,gl))("queryParams",o.eq3(10,fl,s.getPageNumber(s.nextLink.url)))("disabled",null===s.nextLink.url))},dependencies:[b.YU,zt.WGl,ae.Wk]})}return i})();function WM(i,t){if(1&i){const e=o.RV6();o.j41(0,"button",9),o.bIt("click",function(){o.eBV(e);const s=o.XpG();return o.Njj(s.handleClear())}),o.nrm(1,"lucide-icon",10),o.k0s()}}function jM(i,t){1&i&&(o.j41(0,"div",7)(1,"div",11)(2,"h5",12),o.EFF(3," Completed "),o.k0s(),o.nrm(4,"app-todo-completed-filter"),o.k0s(),o.j41(5,"div",11)(6,"h5",12),o.EFF(7," Priority "),o.k0s(),o.nrm(8,"app-todo-priority-filter"),o.k0s()())}function UM(i,t){if(1&i&&o.nrm(0,"app-paginator",14),2&i){const e=o.XpG(2);o.Y8G("setLinks",e.metaData)}}function QM(i,t){1&i&&o.nrm(0,"div",15)}function qM(i,t){if(1&i){const e=o.RV6();o.j41(0,"div",13),o.DNE(1,UM,1,1,"app-paginator",14)(2,QM,1,0,"div",15),o.k0s(),o.j41(3,"div")(4,"button",16),o.bIt("click",function(){o.eBV(e);const s=o.XpG();return o.Njj(s.handleCreateNewTodo())}),o.EFF(5," Create new Task "),o.k0s()()}if(2&i){const e=o.XpG();o.R7$(),o.vxM(e.metaData?1:2)}}let KM=(()=>{class i{formGroup=new P.gE({search:new P.MJ("",[P.k0.pattern("^[a-zA-Z0-9]+(\\s{0,2}[a-zA-Z0-9]+)*$")])});services={todoItem:(0,o.WQX)(ul),destroyRef:(0,o.WQX)(o.abz),itemStore:(0,o.WQX)(xm),router:(0,o.WQX)(ae.Ix)};ngOnInit(){const{router:e,destroyRef:n}=this.services;this.formGroup.valueChanges.pipe((0,_t.pQ)(n),(0,Me.T)(s=>s.search||""),(0,Ts.B)(300),(0,nr.c)(300)).subscribe(s=>{e.navigate([],{queryParams:{title:s}})})}handleClear(){this.formGroup.reset(),this.services.router.navigate([],{queryParams:{title:""}})}handleCreateNewTodo(){const{todoItem:e}=this.services;e.createTodo()}get metaData(){const{itemStore:e}=this.services;return e.metaData}get isHavePagination(){const{metaData:e}=this.services.itemStore;if(!e)return!1;const{last_page:n}=e;return 1!==n}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=o.VBU({type:i,selectors:[["app-my-task"]],decls:12,vars:5,consts:[[1,"w-full","py-8","px-4"],[1,"my-8"],[1,"relative","mx-2",3,"formGroup"],[1,"block","absolute","left-2","top-1/2","-translate-y-1/2","text-text/70"],["name","search"],["type","text","placeholder","Search",1,"w-full","py-4","px-10","rounded-lg",3,"formControl"],["aria-label","Clear",1,"absolute","right-4","top-1/2","-translate-y-1/2","p-1","hover:scale-95","duration-200","ease-out","rounded-xl","hover:bg-primary-one/70"],[1,"flex","flex-wrap","gap-x-4","gap-y-2","py-8"],[1,"px-4"],["aria-label","Clear",1,"absolute","right-4","top-1/2","-translate-y-1/2","p-1","hover:scale-95","duration-200","ease-out","rounded-xl","hover:bg-primary-one/70",3,"click"],["name","x"],[1,"my-4"],[1,"bold","block","mb-4"],[1,"max-w-5xl","mx-auto","my-8"],[3,"setLinks"],[1,"shimmer","h-[50px]"],["mat-flat-button","",3,"click"]],template:function(n,s){1&n&&(o.j41(0,"section",0)(1,"h2",1),o.EFF(2,"My Task"),o.k0s(),o.j41(3,"form",2)(4,"span",3),o.nrm(5,"lucide-icon",4),o.k0s(),o.nrm(6,"input",5),o.DNE(7,WM,2,0,"button",6),o.k0s(),o.DNE(8,jM,9,0,"div",7),o.j41(9,"div",8),o.nrm(10,"app-todo-container"),o.k0s(),o.DNE(11,qM,6,1),o.k0s()),2&n&&(o.R7$(3),o.Y8G("formGroup",s.formGroup),o.R7$(3),o.Y8G("formControl",s.formGroup.controls.search),o.R7$(),o.vxM(s.formGroup.value.search?7:-1),o.R7$(),o.vxM(s.isHavePagination?8:-1),o.R7$(3),o.vxM(s.isHavePagination?11:-1))},dependencies:[Rt.$z,YM,P.qT,P.me,P.BC,P.cb,P.l_,P.j4,zt.WGl,vm,ym,bm]})}return i})();var ZM=S(4572),e2=S(6618);const t2=(i,t)=>({"bg-black/90 ":i,"bg-gray-500/90":t}),n2=i=>({"line-through":i});function s2(i,t){if(1&i){const e=o.RV6();o.j41(0,"div",14)(1,"button",15),o.bIt("click",function(){o.eBV(e);const s=o.XpG();return o.Njj(s.setPriority("NORMAL"))}),o.EFF(2,"NORMAL"),o.k0s(),o.j41(3,"button",16),o.bIt("click",function(){o.eBV(e);const s=o.XpG();return o.Njj(s.setPriority("LOW"))}),o.EFF(4,"LOW"),o.k0s(),o.j41(5,"button",17),o.bIt("click",function(){o.eBV(e);const s=o.XpG();return o.Njj(s.setPriority("MID"))}),o.EFF(6,"MID"),o.k0s(),o.j41(7,"button",18),o.bIt("click",function(){o.eBV(e);const s=o.XpG();return o.Njj(s.setPriority("HIGHT"))}),o.EFF(8,"HIGHT"),o.k0s()()}}const r2=[{path:"",component:sM,canActivate:[(i,t)=>{const e=(0,o.WQX)(gm.u),n=(0,o.WQX)(ae.Ix);return e.getUserSignedin().pipe((0,Me.T)(s=>null!==s||n.createUrlTree(["/"])))}],children:[{path:"dashboard",component:HM},{path:"my-calender",component:$M},{path:"my-task",component:KM}]},{path:":todoId",component:(()=>{class i{todoItem;editor;toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["align_left","align_center","align_right","align_justify"]];formGroup=new P.gE({title:new P.MJ(""),description:new P.MJ(""),is_completed:new P.MJ(!1),priority:new P.MJ("NORMAL")});services={activatedRouter:(0,o.WQX)(ae.nX),destryoRef:(0,o.WQX)(o.abz),todoItemService:(0,o.WQX)(xs)};ngOnInit(){this.setUpTodoItem(),this.editor=new jD,this.handleSave()}ngOnDestroy(){this.editor.destroy()}setPriority(e){this.formGroup.patchValue({priority:e})}get isCompleted(){return this.formGroup.value.is_completed??!1}handleToggleCompleted(){this.formGroup.patchValue({is_completed:!this.isCompleted})}setUpTodoItem(){const{activatedRouter:e,destryoRef:n}=this.services;e.data.pipe((0,_t.pQ)(n),(0,Me.T)(s=>s.todoItem)).subscribe(s=>{this.todoItem=s,this.formGroup.patchValue({title:s.title,description:s.description,is_completed:s.is_completed,priority:s.priority})})}handleSave(){const{formGroup:e,todoItem:n}=this,{todoItemService:s,destryoRef:r}=this.services;(0,ZM.z)([e.valueChanges.pipe((0,Nt.Z)(e.value)),e.statusChanges.pipe((0,Nt.Z)(e.status))]).pipe((0,_t.pQ)(r),(0,Ts.B)(300),(0,nr.c)(300),(0,qt.n)(([a,l])=>"VALID"===l?s.putTodo({description:a?.description??n.description,is_completed:a?.is_completed??n.is_completed,priority:a?.priority??n.priority,title:a?.title??n.title,id:n.id},n.id):(0,en.of)(null)),(0,nt.p)(a=>null!==a)).subscribe()}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=o.VBU({type:i,selectors:[["app-todo-items"]],decls:18,vars:16,consts:[["menu",""],[1,"mt-[80px]","h-[calc(100vh-80px)]","px-2"],["action","",1,"max-w-[1200px]","mx-auto","mt-4","py-16","px-8","bg-white","rounded-2xl",3,"formGroup"],[1,"relative","px-8"],[1,"absolute","left-2","top-1/2","-translate-y-1/2","cursor-pointer",3,"click"],[1,"block","w-[15px]","h-[15px]","hover:brightness-50","duration-200",3,"ngClass"],["type","text","placeholder","TODO Title",1,"w-full","px-4","py-8","text-3xl",3,"ngClass","formControl"],[1,"my-4"],[1,"flex","items-center","gap-2"],[1,"text-xl"],[1,"px-4","py-2","rounded-sm",3,"cdkMenuTriggerFor","appProprity"],[1,"NgxEditor__Wrapper"],[3,"editor","toolbar"],[3,"editor","formControl"],["cdkMenu","",1,"flex","flex-col","py-4","px-2","bg-natural-one","shadow-2xl","rounded-sm"],["appProprity","NORMAL","cdkMenuItem","",1,"px-4","py-2","rounded-sm",3,"click"],["appProprity","LOW","cdkMenuItem","",1,"px-4","py-2","rounded-sm",3,"click"],["appProprity","MID","cdkMenuItem","",1,"px-4","py-2","rounded-sm",3,"click"],["appProprity","HIGHT","cdkMenuItem","",1,"px-4","py-2","rounded-sm",3,"click"]],template:function(n,s){if(1&n){const r=o.RV6();o.nrm(0,"app-navigation"),o.j41(1,"main",1)(2,"form",2)(3,"div",3)(4,"div",4),o.bIt("click",function(){return o.eBV(r),o.Njj(s.handleToggleCompleted())}),o.nrm(5,"span",5),o.k0s(),o.nrm(6,"input",6),o.k0s(),o.j41(7,"div",7)(8,"div",8)(9,"label",9),o.EFF(10,"Priority"),o.k0s(),o.j41(11,"button",10),o.EFF(12),o.k0s(),o.DNE(13,s2,9,0,"ng-template",null,0,o.C5r),o.k0s()(),o.j41(15,"div",11),o.nrm(16,"ngx-editor-menu",12)(17,"ngx-editor",13),o.k0s()()()}if(2&n){const r=o.sdS(14);o.R7$(2),o.Y8G("formGroup",s.formGroup),o.R7$(3),o.Y8G("ngClass",o.l_i(11,t2,s.isCompleted,!s.isCompleted)),o.R7$(),o.Y8G("ngClass",o.eq3(14,n2,s.isCompleted))("formControl",s.formGroup.controls.title),o.R7$(5),o.Y8G("cdkMenuTriggerFor",r)("appProprity",s.formGroup.value.priority||"NORMLA"),o.R7$(),o.SpI(" ",s.formGroup.value.priority," "),o.R7$(4),o.Y8G("editor",s.editor)("toolbar",s.toolbar),o.R7$(),o.Y8G("editor",s.editor)("formControl",s.formGroup.controls.description)}},dependencies:[b.YU,e2.e,P.qT,P.me,P.BC,P.cb,P.l_,P.j4,dd,nn,sa,oA,LD,pl],styles:[".NgxEditor{min-height:800px}.NgxEditor__Wrapper{border:none!important;background:transparent}option{padding:.25rem .5rem}\n"],encapsulation:2})}return i})(),resolve:{todoItem:(i,t)=>{const e=(0,o.WQX)(hl.I),n=(0,o.WQX)(xs),s=(0,o.WQX)(ae.Ix);let r=i.params.todoId;return r=parseInt(r),r?n.getTodoById(r):(e.addError(`todo with id ${r} not found`),s.navigateByUrl("/"),null)}}}];let o2=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=o.$C({type:i});static \u0275inj=o.G2t({imports:[ae.iI.forChild(r2),ae.iI]})}return i})(),a2=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=o.$C({type:i});static \u0275inj=o.G2t({imports:[b.MD,zt.flO.pick({ChevronsLeft:zt.O_5,ChevronsRight:zt.hIh}),ae.iI]})}return i})(),l2=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=o.$C({type:i});static \u0275inj=o.G2t({imports:[b.MD,o2,UD.R,a1,ae.iI,Ci.Fg,Rt.Hl,V1,a2,P.X1,z1.fS,H1.RG,zt.flO.pick({X:zt.X,Search:zt.vji}),mC,FD.forRoot({locals:{bold:"Bold",italic:"Italic",code:"Code",blockquote:"Blockquote",underline:"Underline",strike:"Strike",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove",enterValidUrl:"Please enter a valid URL"}})]})}return i})()},6021:_l=>{function At(o){return o instanceof Buffer?Buffer.from(o):new o.constructor(o.buffer.slice(),o.byteOffset,o.length)}_l.exports=function S(o){if((o=o||{}).circles)return function b(o){const xe=[],ve=[],Ne=new Map;if(Ne.set(Date,D=>new Date(D)),Ne.set(Map,(D,F)=>new Map(lt(Array.from(D),F))),Ne.set(Set,(D,F)=>new Set(lt(Array.from(D),F))),o.constructorHandlers)for(const D of o.constructorHandlers)Ne.set(D[0],D[1]);let Te=null;return o.proto?function ne(D){if("object"!=typeof D||null===D)return D;if(Array.isArray(D))return lt(D,ne);if(D.constructor!==Object&&(Te=Ne.get(D.constructor)))return Te(D,ne);const F={};xe.push(D),ve.push(F);for(const ee in D){const $=D[ee];if("object"!=typeof $||null===$)F[ee]=$;else if($.constructor!==Object&&(Te=Ne.get($.constructor)))F[ee]=Te($,ne);else if(ArrayBuffer.isView($))F[ee]=At($);else{const de=xe.indexOf($);F[ee]=-1!==de?ve[de]:ne($)}}return xe.pop(),ve.pop(),F}:function z(D){if("object"!=typeof D||null===D)return D;if(Array.isArray(D))return lt(D,z);if(D.constructor!==Object&&(Te=Ne.get(D.constructor)))return Te(D,z);const F={};xe.push(D),ve.push(F);for(const ee in D){if(!1===Object.hasOwnProperty.call(D,ee))continue;const $=D[ee];if("object"!=typeof $||null===$)F[ee]=$;else if($.constructor!==Object&&(Te=Ne.get($.constructor)))F[ee]=Te($,z);else if(ArrayBuffer.isView($))F[ee]=At($);else{const de=xe.indexOf($);F[ee]=-1!==de?ve[de]:z($)}}return xe.pop(),ve.pop(),F};function lt(D,F){const ee=Object.keys(D),$=new Array(ee.length);for(let de=0;de<ee.length;de++){const ui=ee[de],Ue=D[ui];if("object"!=typeof Ue||null===Ue)$[ui]=Ue;else if(Ue.constructor!==Object&&(Te=Ne.get(Ue.constructor)))$[ui]=Te(Ue,F);else if(ArrayBuffer.isView(Ue))$[ui]=At(Ue);else{const qr=xe.indexOf(Ue);$[ui]=-1!==qr?ve[qr]:F(Ue)}}return $}}(o);const xe=new Map;if(xe.set(Date,z=>new Date(z)),xe.set(Map,(z,ne)=>new Map(Ne(Array.from(z),ne))),xe.set(Set,(z,ne)=>new Set(Ne(Array.from(z),ne))),o.constructorHandlers)for(const z of o.constructorHandlers)xe.set(z[0],z[1]);let ve=null;return o.proto?function lt(z){if("object"!=typeof z||null===z)return z;if(Array.isArray(z))return Ne(z,lt);if(z.constructor!==Object&&(ve=xe.get(z.constructor)))return ve(z,lt);const ne={};for(const D in z){const F=z[D];ne[D]="object"!=typeof F||null===F?F:F.constructor!==Object&&(ve=xe.get(F.constructor))?ve(F,lt):ArrayBuffer.isView(F)?At(F):lt(F)}return ne}:function Te(z){if("object"!=typeof z||null===z)return z;if(Array.isArray(z))return Ne(z,Te);if(z.constructor!==Object&&(ve=xe.get(z.constructor)))return ve(z,Te);const ne={};for(const D in z){if(!1===Object.hasOwnProperty.call(z,D))continue;const F=z[D];ne[D]="object"!=typeof F||null===F?F:F.constructor!==Object&&(ve=xe.get(F.constructor))?ve(F,Te):ArrayBuffer.isView(F)?At(F):Te(F)}return ne};function Ne(z,ne){const D=Object.keys(z),F=new Array(D.length);for(let ee=0;ee<D.length;ee++){const $=D[ee],de=z[$];F[$]="object"!=typeof de||null===de?de:de.constructor!==Object&&(ve=xe.get(de.constructor))?ve(de,ne):ArrayBuffer.isView(de)?At(de):ne(de)}return F}}}}]);