"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[621],{4621:(uo,C,a)=>{a.r(C),a.d(C,{AuthModule:()=>po});var j=a(177),u=a(8834),d=a(9631),l=a(6467),m=a(5596),y=a(3902),c=a(803),o=a(4438),k=a(4412),g=a(6354),f=a(9079);let G=(()=>{class t{authParam=new k.t("login");constructor(r,n){r.queryParamMap.pipe((0,f.pQ)(n)).pipe((0,g.T)(s=>s.get("auth")||"login")).subscribe(s=>this.authParam.next(s))}static \u0275fac=function(n){return new(n||t)(o.KVO(c.nX),o.KVO(o.abz))};static \u0275prov=o.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var e=a(9417),h=a(3767),F=a(7703),w=a(1986);function R(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"Please enter a valid email address"),o.k0s())}function b(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"Please enter a valid email address"),o.k0s())}function M(t,i){if(1&t){const r=o.RV6();o.j41(0,"form",3),o.bIt("ngSubmit",function(){o.eBV(r);const s=o.XpG();return o.Njj(s.login())}),o.j41(1,"mat-card-header")(2,"mat-card-title")(3,"h5"),o.EFF(4,"Login Form"),o.k0s()(),o.j41(5,"mat-card-subtitle"),o.EFF(6,"Login to An Account"),o.k0s()(),o.j41(7,"label",4)(8,"p"),o.EFF(9,"Email"),o.k0s()(),o.j41(10,"mat-form-field",5)(11,"mat-label",5),o.EFF(12,"Email"),o.k0s(),o.nrm(13,"input",6),o.DNE(14,R,2,0,"mat-error"),o.k0s(),o.j41(15,"label",7)(16,"p"),o.EFF(17,"Password"),o.k0s()(),o.j41(18,"mat-form-field"),o.nrm(19,"input",8),o.DNE(20,b,2,0,"mat-error"),o.k0s(),o.j41(21,"mat-card-actions",9)(22,"button",10),o.EFF(23," Submit "),o.k0s()()()}if(2&t){const r=o.XpG();o.Y8G("formGroup",r.formGroup),o.R7$(13),o.Y8G("formControl",r.formGroup.controls.email),o.R7$(),o.vxM(r.formGroup.controls.email.hasError("required")?14:-1),o.R7$(5),o.Y8G("formControl",r.formGroup.controls.password),o.R7$(),o.vxM(r.formGroup.controls.password.hasError("required")?20:-1),o.R7$(2),o.Y8G("disabled",!r.formGroup.valid)}}function S(t,i){1&t&&(o.j41(0,"div",2)(1,"div",11),o.nrm(2,"div",12)(3,"div",13)(4,"div",12)(5,"div",13),o.j41(6,"div",14),o.nrm(7,"div",15),o.k0s()()())}let P=(()=>{class t{isFetching=!1;formGroup=new e.gE({email:new e.MJ("",[e.k0.required,e.k0.email]),password:new e.MJ("",[e.k0.required,e.k0.min(4),e.k0.min(20)])});services={authService:(0,o.WQX)(h.u),router:(0,o.WQX)(c.Ix),destryoRef:(0,o.WQX)(o.abz),notification:(0,o.WQX)(F.I)};login(){const{authService:r,router:n,destryoRef:s,notification:p}=this.services,{email:v,password:x}=this.formGroup.value;this.isFetching=!0,r.postUserLogin({email:v||"",password:x||""}).pipe((0,f.pQ)(s)).pipe((0,w.c)(500)).subscribe({next:()=>{n.navigateByUrl("/"),p.addSuccess("Login success"),this.isFetching=!1},error:()=>{p.addError("Failed to login, please make sure your credential"),this.isFetching=!1}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=o.VBU({type:t,selectors:[["app-login"]],decls:3,vars:1,consts:[["appearance","outlined",1,"min-h-[600px]"],["action","",1,"flex","flex-col","gap-8","py-16","px-12",3,"formGroup"],[1,"shimmer","h-[600px]","w-full"],["action","",1,"flex","flex-col","gap-8","py-16","px-12",3,"ngSubmit","formGroup"],["for","email-input",1,"px-4","bold"],[1,"border-none"],["type","email","id","email-input","matInput","","placeholder","Ex. pat@example.com",3,"formControl"],["for","passowrd-input",1,"px-4","bold"],["type","password","id","passowrd-input","matInput","","placeholder","Ex. Password",3,"formControl"],["align","end"],["mat-flat-button","","extended","",3,"disabled"],[1,"flex","flex-col","gap-8","py-16","px-12"],[1,"shimmer","h-[10px]","w-full",2,"--shimmer-thickness","100%"],[1,"shimmer","h-[30px]","w-full",2,"--shimmer-thickness","100%"],[1,"flex","justify-end","my-8"],[1,"shimmer","h-[30px]","w-[100px]",2,"--shimmer-thickness","100%"]],template:function(n,s){1&n&&(o.j41(0,"mat-card",0),o.DNE(1,M,24,6,"form",1)(2,S,8,0,"div",2),o.k0s()),2&n&&(o.R7$(),o.vxM(s.isFetching?2:1))},dependencies:[u.$z,e.qT,e.me,e.BC,e.cb,e.l_,e.j4,d.fg,l.rl,l.nJ,l.TL,m.RN,m.YY,m.MM,m.Lc,m.dh]})}return t})(),T=(()=>{class t{validate(r){const{password:n,passwordConfirmation:s}=r.value;return n===s?null:{passwordsDontMatch:!0}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=o.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var E=a(7673),$=a(152),L=a(5558),D=a(5964),A=a(9437);let I=(()=>{class t{authServices;constructor(r){this.authServices=r}uniqueProperty=r=>n=>{const{value:s}=n;return(0,E.of)(s).pipe((0,$.B)(500),(0,L.n)(p=>this.authServices.postUniqueUserProperty({name:p,property:r})),(0,D.p)(p=>!p.is_unique),(0,g.T)(()=>({unique:!0})),(0,A.W)(()=>(0,E.of)(null)))};static \u0275fac=function(n){return new(n||t)(o.KVO(h.u))};static \u0275prov=o.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function X(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"Please enter a username"),o.k0s())}function _(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"Username already use"),o.k0s())}function N(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"Username need to be more then 4 character"),o.k0s())}function Q(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"Please enter a valid email address"),o.k0s())}function Y(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"Please provide valid email"),o.k0s())}function V(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"email already use"),o.k0s())}function U(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"Pleasee provide a password"),o.k0s())}function W(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"Password need to be more then 4 character"),o.k0s())}function H(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"Password can not be more then 20 character"),o.k0s())}function B(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"Pleasee provide a password confirmation"),o.k0s())}function J(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"Password confirmation need to be more then 4 character"),o.k0s())}function z(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"Password confirmation can not be more then 20 character"),o.k0s())}function q(t,i){1&t&&(o.j41(0,"mat-error"),o.EFF(1,"Password doesn't match"),o.k0s())}function O(t,i){1&t&&(o.j41(0,"p",10),o.EFF(1," Please and confirmation passowrd is valid "),o.k0s())}function K(t,i){if(1&t){const r=o.RV6();o.j41(0,"form",3),o.bIt("ngSubmit",function(){o.eBV(r);const s=o.XpG();return o.Njj(s.signup())}),o.j41(1,"mat-card-header")(2,"mat-card-title")(3,"h5"),o.EFF(4,"Sign-up Form"),o.k0s()(),o.j41(5,"mat-card-subtitle"),o.EFF(6,"Create An Account"),o.k0s()(),o.j41(7,"label",4)(8,"p"),o.EFF(9,"Username"),o.k0s()(),o.j41(10,"mat-form-field")(11,"mat-label"),o.EFF(12,"username"),o.k0s(),o.nrm(13,"input",5),o.DNE(14,X,2,0,"mat-error")(15,_,2,0,"mat-error")(16,N,2,0,"mat-error"),o.k0s(),o.j41(17,"label",6)(18,"p"),o.EFF(19,"Email"),o.k0s()(),o.j41(20,"mat-form-field",7)(21,"mat-label"),o.EFF(22,"Email"),o.k0s(),o.nrm(23,"input",8),o.DNE(24,Q,2,0,"mat-error")(25,Y,2,0,"mat-error")(26,V,2,0,"mat-error"),o.k0s(),o.j41(27,"label",6)(28,"p"),o.EFF(29,"Password"),o.k0s()(),o.j41(30,"mat-form-field")(31,"mat-label"),o.EFF(32,"Passowrd"),o.k0s(),o.nrm(33,"input",9),o.DNE(34,U,2,0,"mat-error")(35,W,2,0,"mat-error")(36,H,2,0,"mat-error"),o.k0s(),o.j41(37,"label",6)(38,"p"),o.EFF(39,"Password Confirmation"),o.k0s()(),o.j41(40,"mat-form-field")(41,"mat-label"),o.EFF(42,"Password Confirmation"),o.k0s(),o.nrm(43,"input",9),o.DNE(44,B,2,0,"mat-error")(45,J,2,0,"mat-error")(46,z,2,0,"mat-error")(47,q,2,0,"mat-error"),o.k0s(),o.DNE(48,O,2,0,"p",10),o.j41(49,"mat-card-actions",11)(50,"button",12),o.EFF(51," Submit "),o.k0s()()()}if(2&t){const r=o.XpG();o.Y8G("formGroup",r.formGroup),o.R7$(13),o.Y8G("formControl",r.formGroup.controls.name),o.R7$(),o.vxM(r.formGroup.controls.name.hasError("required")?14:-1),o.R7$(),o.vxM(r.formGroup.controls.name.hasError("unique")?15:-1),o.R7$(),o.vxM(r.formGroup.controls.name.hasError("minlength")?16:-1),o.R7$(7),o.Y8G("formControl",r.formGroup.controls.email),o.R7$(),o.vxM(r.formGroup.controls.email.hasError("required")?24:-1),o.R7$(),o.vxM(r.formGroup.controls.email.hasError("email")?25:-1),o.R7$(),o.vxM(r.formGroup.controls.email.hasError("unique")?26:-1),o.R7$(7),o.Y8G("formControl",r.formGroup.controls.password),o.R7$(),o.vxM(r.formGroup.controls.password.hasError("required")?34:-1),o.R7$(),o.vxM(r.formGroup.controls.password.hasError("minlength")?35:-1),o.R7$(),o.vxM(r.formGroup.controls.password.hasError("maxlength")?36:-1),o.R7$(7),o.Y8G("formControl",r.formGroup.controls.passwordConfirmation),o.R7$(),o.vxM(r.formGroup.controls.passwordConfirmation.hasError("required")?44:-1),o.R7$(),o.vxM(r.formGroup.controls.passwordConfirmation.hasError("minlength")?45:-1),o.R7$(),o.vxM(r.formGroup.controls.passwordConfirmation.hasError("maxlength")?46:-1),o.R7$(),o.vxM(r.formGroup.hasError("passwordsDontMatch")||r.formGroup.errors&&r.formGroup.errors.passwordsDontMatch?47:-1),o.R7$(),o.vxM(r.formGroup.hasError("passwordsDontMatch")?48:-1),o.R7$(2),o.Y8G("disabled","INVALID"===r.formGroup.status)}}function Z(t,i){1&t&&(o.j41(0,"div",2)(1,"div",13),o.nrm(2,"div",14)(3,"div",15)(4,"div",14)(5,"div",15)(6,"div",14)(7,"div",15)(8,"div",14)(9,"div",15),o.j41(10,"div",16),o.nrm(11,"div",17),o.k0s()()())}let oo=(()=>{class t{isFetching=!1;services={uniqProperty:(0,o.WQX)(I),passwordMatch:(0,o.WQX)(T),authServices:(0,o.WQX)(h.u),router:(0,o.WQX)(c.Ix),notification:(0,o.WQX)(F.I),destryoRef:(0,o.WQX)(o.abz)};formGroup=new e.gE({name:new e.MJ("",{validators:[e.k0.required,e.k0.minLength(4)],asyncValidators:[r=>this.services.uniqProperty.uniqueProperty("name")(r)]}),email:new e.MJ("",{validators:[e.k0.required,e.k0.email],asyncValidators:[r=>this.services.uniqProperty.uniqueProperty("email")(r)]}),password:new e.MJ("",[e.k0.required,e.k0.minLength(4),e.k0.maxLength(50)]),passwordConfirmation:new e.MJ("",[e.k0.required,e.k0.minLength(4),e.k0.maxLength(50)])},{validators:[this.services.passwordMatch.validate]});signup(){const{authServices:r,notification:n,router:s,destryoRef:p}=this.services,{email:v,name:x,password:co}=this.formGroup.value;this.isFetching=!0,r.postUserRegister({email:v||"",password:co||"",name:x||""}).pipe((0,f.pQ)(p)).subscribe({next:()=>{n.addSuccess("Register success, wecome to the productive TODO"),s.navigateByUrl("/"),this.isFetching=!1},error:()=>{n.addError("Failed to Register"),this.isFetching=!1}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=o.VBU({type:t,selectors:[["app-signup"]],decls:3,vars:1,consts:[["appearance","outlined",1,"min-h-[600px]","py-16","px-12"],["action","",1,"flex","flex-col","gap-8",3,"formGroup"],[1,"shimmer","h-[600px]","w-full"],["action","",1,"flex","flex-col","gap-8",3,"ngSubmit","formGroup"],["for","name-input",1,"px-4","bold"],["type","text","id","name-input","matInput","","placeholder","Ex. jane deo",3,"formControl"],["for","",1,"px-4","bold"],["subscriptSizing","dynamic"],["type","email","id","email-input","matInput","","placeholder","Ex. pat@example.com",3,"formControl"],["type","password","id","passowrd-input","matInput","","placeholder","Ex. Password",3,"formControl"],[1,"text-red-500"],["align","end"],["mat-flat-button","","extended","",3,"disabled"],[1,"flex","flex-col","gap-8","py-16","px-12"],[1,"shimmer","h-[10px]","w-full",2,"--shimmer-thickness","100%"],[1,"shimmer","h-[30px]","w-full",2,"--shimmer-thickness","100%"],[1,"flex","justify-end","my-8"],[1,"shimmer","h-[30px]","w-[100px]",2,"--shimmer-thickness","100%"]],template:function(n,s){1&n&&(o.j41(0,"mat-card",0),o.DNE(1,K,52,20,"form",1)(2,Z,12,0,"div",2),o.k0s()),2&n&&(o.R7$(),o.vxM(s.isFetching?2:1))},dependencies:[u.$z,e.qT,e.me,e.BC,e.cb,e.l_,e.j4,d.fg,l.rl,l.nJ,l.TL,m.RN,m.YY,m.MM,m.Lc,m.dh]})}return t})();const to=()=>["."],ro=t=>({auth:t});function no(t,i){1&t&&(o.j41(0,"div",2),o.nrm(1,"app-login"),o.k0s())}function eo(t,i){1&t&&(o.j41(0,"div",3),o.nrm(1,"app-signup"),o.k0s())}function ao(t,i){1&t&&(o.j41(0,"span"),o.EFF(1,"Already have an "),o.j41(2,"span",7),o.EFF(3,"Accoutn"),o.k0s()())}function io(t,i){1&t&&(o.j41(0,"span"),o.EFF(1,"Do not have and "),o.j41(2,"span",7),o.EFF(3,"Accoutn"),o.k0s(),o.EFF(4," yet"),o.k0s())}const so=[{path:"",component:(()=>{class t{authPara="login";services={authQuery:(0,o.WQX)(G)};ngOnInit(){const{authQuery:r}=this.services;r.authParam.subscribe(n=>this.authPara=n)}get revertAuthParam(){return"login"===this.authPara?"signup":"login"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=o.VBU({type:t,selectors:[["app-auth-home"]],decls:9,vars:7,consts:[[1,"w-11/12","md:max-w-5xl","mx-auto","py-8"],[1,"grid","md:grid-cols-3"],[1,"md:col-span-2","md:col-start-2"],[1,"md:col-span-2","md:col-start-1"],[1,"my-8","w-max","mx-auto"],["mat-raised-button","","role","link",3,"routerLink","queryParams"],[1,"bold"],[1,"text-primary-three"]],template:function(n,s){1&n&&(o.j41(0,"main",0)(1,"div",1),o.DNE(2,no,2,0,"div",2)(3,eo,2,0,"div",3),o.k0s(),o.j41(4,"div",4)(5,"button",5)(6,"p",6),o.DNE(7,ao,4,0,"span")(8,io,5,0,"span"),o.k0s()()()()),2&n&&(o.R7$(2),o.vxM("login"===s.authPara?2:3),o.R7$(3),o.Y8G("routerLink",o.lJ4(4,to))("queryParams",o.eq3(5,ro,s.revertAuthParam)),o.R7$(2),o.vxM("login"===s.revertAuthParam?7:8))},dependencies:[c.Wk,u.$z,P,oo]})}return t})()}];let mo=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=o.$C({type:t});static \u0275inj=o.G2t({imports:[c.iI.forChild(so),c.iI]})}return t})();var lo=a(8177);let po=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=o.$C({type:t});static \u0275inj=o.G2t({providers:[{provide:l.U$,useValue:{appearance:"fill",subscriptSizing:"dynamic"}}],imports:[c.iI,j.MD,mo,lo.R,u.Hl,e.X1,d.fS,l.RG,m.Hu,y.Fg]})}return t})()}}]);